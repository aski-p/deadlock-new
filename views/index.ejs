<% 
const body = `
<div class="hero-section">
    <div class="hero-container">
        <h1 class="hero-title">Deadlock Coach</h1>
        <p class="hero-subtitle">ë°ë“œë½ ê²Œì„ì˜ ìµœê³  ì½”ì¹­ í”Œë«í¼</p>
        
        <div class="hero-stats">
            <div class="stat-card">
                <div class="stat-number">50,000+</div>
                <div class="stat-label">ë“±ë¡ëœ í”Œë ˆì´ì–´</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">1,000+</div>
                <div class="stat-label">ê²Œì„ ë¶„ì„</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">24/7</div>
                <div class="stat-label">ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸</div>
            </div>
        </div>

        ${!user ? `
        <div class="hero-cta">
            <a href="/auth/steam" class="cta-button">
                <img src="/images/steam-icon.png" alt="Steam" class="steam-icon">
                Steamìœ¼ë¡œ ì‹œì‘í•˜ê¸°
            </a>
        </div>
        ` : `
        <div class="hero-cta">
            <a href="/ko/leaderboards/europe" class="cta-button">
                ë¦¬ë”ë³´ë“œ ë³´ê¸°
            </a>
        </div>
        `}
    </div>
</div>

<div class="features-section">
    <div class="features-container">
        <h2 class="section-title">ì£¼ìš” ê¸°ëŠ¥</h2>
        
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">ğŸ†</div>
                <h3 class="feature-title">ë¦¬ë”ë³´ë“œ</h3>
                <p class="feature-description">ì‹¤ì‹œê°„ ê¸€ë¡œë²Œ ë° ì§€ì—­ë³„ ë­í‚¹ì„ í™•ì¸í•˜ì„¸ìš”</p>
                <a href="/ko/leaderboards/europe" class="feature-link">ë³´ëŸ¬ê°€ê¸°</a>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">ğŸ®</div>
                <h3 class="feature-title">í”Œë ˆì´ì–´ í†µê³„</h3>
                <p class="feature-description">ìƒì„¸í•œ ê°œì¸ í†µê³„ì™€ ê²Œì„ íˆìŠ¤í† ë¦¬ë¥¼ ë¶„ì„í•˜ì„¸ìš”</p>
                <a href="/ko/stats" class="feature-link">ë³´ëŸ¬ê°€ê¸°</a>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">ğŸ“š</div>
                <h3 class="feature-title">ê²Œì„ ê°€ì´ë“œ</h3>
                <p class="feature-description">ì˜ì›…ë³„ ê°€ì´ë“œì™€ ì•„ì´í…œ ë¹Œë“œë¥¼ í•™ìŠµí•˜ì„¸ìš”</p>
                <a href="/ko/heroes" class="feature-link">ë³´ëŸ¬ê°€ê¸°</a>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">âš”ï¸</div>
                <h3 class="feature-title">ë§¤ì¹˜ ë¶„ì„</h3>
                <p class="feature-description">ê²Œì„ ë¦¬í”Œë ˆì´ì™€ ìƒì„¸ ë¶„ì„ì„ ì œê³µí•©ë‹ˆë‹¤</p>
                <a href="/ko/matches" class="feature-link">ë³´ëŸ¬ê°€ê¸°</a>
            </div>
        </div>
    </div>
</div>

${user ? `
<div class="user-dashboard">
    <div class="dashboard-container">
        <h2 class="section-title">ì•ˆë…•í•˜ì„¸ìš”, ${user.username}ë‹˜!</h2>
        
        <div class="dashboard-grid">
            <div class="dashboard-card">
                <h3>ìµœê·¼ ê²Œì„</h3>
                <div id="recent-games">
                    <p>ìµœê·¼ ê²Œì„ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
                </div>
            </div>
            
            <div class="dashboard-card">
                <h3>í†µê³„ ìš”ì•½</h3>
                <div id="stats-summary">
                    <p>í†µê³„ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
                </div>
            </div>
            
            <div class="dashboard-card">
                <h3>ìˆœìœ„</h3>
                <div id="rank-info">
                    <p>ìˆœìœ„ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Load user data if logged in
async function loadUserData() {
    try {
        // Load recent games
        const recentResponse = await fetch('/api/player/${user.steamId}/recent');
        const recentData = await recentResponse.json();
        
        // Load stats
        const statsResponse = await fetch('/api/player/${user.steamId}/stats');
        const statsData = await statsResponse.json();
        
        // Update UI with data
        updateRecentGames(recentData);
        updateStats(statsData);
        
    } catch (error) {
        console.error('Error loading user data:', error);
    }
}

function updateRecentGames(data) {
    const container = document.getElementById('recent-games');
    if (data && data.response && data.response.games) {
        const games = data.response.games.slice(0, 3);
        container.innerHTML = games.map(game => 
            '<div class="recent-game">' +
            '<span class="game-name">' + game.name + '</span>' +
            '<span class="playtime">' + Math.round(game.playtime_2weeks / 60) + 'ì‹œê°„</span>' +
            '</div>'
        ).join('');
    } else {
        container.innerHTML = '<p>ìµœê·¼ ê²Œì„ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
    }
}

function updateStats(data) {
    const container = document.getElementById('stats-summary');
    if (data && data.playerstats) {
        container.innerHTML = '<p>ê²Œì„ í†µê³„ê°€ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.</p>';
    } else {
        container.innerHTML = '<p>í†µê³„ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>';
    }
}

// Load data when page loads
document.addEventListener('DOMContentLoaded', loadUserData);
</script>
` : ''}
`;
%>

<%- include('layout', { body: body, title: title, user: user }) %>
<div class="player-detail-section">
    <div class="player-detail-container">
        <!-- Welcome Message -->
        <div class="welcome-message">
            <h1>ì•ˆë…•í•˜ì„¸ìš”, <%= user.username %>ë‹˜! ğŸ‘‹</h1>
            <p>ë°ë“œë½ì—ì„œì˜ ì—¬ëŸ¬ë¶„ì˜ í™œì•½ì„ í™•ì¸í•´ë³´ì„¸ìš”!</p>
            <div class="quick-actions">
                <a href="/ko/leaderboards/asia" class="action-btn secondary">ğŸ† ë¦¬ë”ë³´ë“œ</a>
                <a href="<%= user.profileUrl || '#' %>" target="_blank" class="action-btn secondary">ğŸ® Steam</a>
            </div>
        </div>

        <!-- Loading State -->
        <div class="table-loading" id="player-loading">
            <div class="loading-spinner"></div>
            <p>í”Œë ˆì´ì–´ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
        </div>

        <!-- Player Content -->
        <div class="player-content" id="player-content" style="display: none;">
            <!-- Player Header -->
            <div class="player-header">
                <div class="player-basic-info">
                    <img class="player-detail-avatar" id="player-avatar" alt="Player Avatar">
                    <div class="player-main-info">
                        <h1 class="player-name" id="player-name">í”Œë ˆì´ì–´</h1>
                        <div class="player-meta">
                            <span class="player-country" id="player-country">ğŸŒ</span>
                            <span class="player-account-id">ê³„ì • ID: <%= accountId %></span>
                            <% if (user && user.steamId) { %>
                            <span class="player-steam-id">Steam ID: <%= user.steamId %></span>
                            <% } %>
                        </div>
                    </div>
                </div>
                <div class="player-rank">
                    <div class="rank-badge">
                        <img class="rank-medal" id="rank-medal" alt="Rank Medal">
                        <div class="rank-info">
                            <span class="rank-name" id="rank-name">ë­í¬ ì •ë³´ ì—†ìŒ</span>
                            <span class="rank-score" id="rank-score">-</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Player Stats -->
            <div class="player-stats">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="stat-matches">0</div>
                        <div class="stat-label">ë§¤ì¹˜</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="stat-winrate">0%</div>
                        <div class="stat-label">ìŠ¹ë¥ </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="stat-lane-winrate">0%</div>
                        <div class="stat-label">ë¼ì¸ ìŠ¹ë¥ </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="stat-kda">0.0</div>
                        <div class="stat-label">KDA</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="stat-souls">0</div>
                        <div class="stat-label">ì†Œìš¸/ë¶„</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="stat-denies">0</div>
                        <div class="stat-label">ë””ë‚˜ì´</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="stat-endorsements">0</div>
                        <div class="stat-label">ì¶”ì²œìˆ˜</div>
                    </div>
                </div>
            </div>

            <!-- Heroes Section (ì „ì²´ ê²Œì„ ê¸°ë°˜) -->
            <div class="player-section">
                <h2 class="section-title">í”Œë ˆì´í•œ ì˜ì›… (ì „ì²´ ê²Œì„)</h2>
                <p class="section-note">
                    <i class="fas fa-info-circle"></i>
                    ì˜ì›… í†µê³„ëŠ” ì™¸ë¶€ API ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ë©°, ì‹¤ì œ ê²Œì„ ë‚´ ë°ì´í„°ì™€ ì•½ê°„ì˜ ì°¨ì´ê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
                    ë°ì´í„°ëŠ” ì£¼ê¸°ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.
                </p>
                <div class="heroes-grid" id="heroes-grid">
                    <!-- Heroes will be populated by JavaScript -->
                </div>
            </div>

            <!-- Recent Matches - deadlock-api.com ìŠ¤íƒ€ì¼ -->
            <div class="player-section">
                <h2 class="section-title">ìµœê·¼ ë§¤ì¹˜</h2>
                <div class="deadlock-matches-container" id="matches-list">
                    <!-- Matches will be populated by JavaScript -->
                </div>
            </div>

            <!-- MMR Graph -->
            <div class="player-section">
                <h2 class="section-title">MMR íˆìŠ¤í† ë¦¬</h2>
                <div class="mmr-graph-container" id="mmr-graph-container">
                    <canvas id="mmr-chart" width="800" height="400"></canvas>
                </div>
            </div>

            <!-- Party Stats -->
            <div class="player-section">
                <h2 class="section-title">íŒŒí‹° í†µê³„ (í•¨ê»˜ í”Œë ˆì´í•œ íŒ€ì›)</h2>
                <div class="party-stats-list" id="party-stats-list">
                    <!-- Party stats will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Error State -->
        <div class="profile-error" id="profile-error" style="display: none;">
            <h2>âš ï¸ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤</h2>
            <p>ë°ë“œë½ í†µê³„ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>
            <p id="error-message" style="color: #EF4444; font-size: 14px; margin-top: 10px;"></p>
            <div style="margin-top: 20px;">
                <button onclick="loadMyProfileData()" class="retry-btn">ë‹¤ì‹œ ì‹œë„</button>
                <a href="/ko/leaderboards/asia" class="back-button" style="margin-left: 15px;">ë¦¬ë”ë³´ë“œ ë³´ê¸°</a>
            </div>
        </div>
    </div>
</div>

<style>
/* deadlock-api.com ì •í™•í•œ ë§¤ì¹˜ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
.deadlock-matches-container {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.deadlock-match-card {
    background: rgba(15, 23, 42, 0.6);
    border: 1px solid rgba(71, 85, 105, 0.3);
    border-radius: 12px;
    overflow: hidden;
    transition: all 0.2s ease;
}

.deadlock-match-card:hover {
    border-color: rgba(71, 85, 105, 0.5);
    background: rgba(15, 23, 42, 0.8);
}

/* ë§¤ì¹˜ ì¹´ë“œ í—¤ë” */
.deadlock-match-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 24px 12px;
    background: rgba(15, 23, 42, 0.4);
    border-bottom: 1px solid rgba(71, 85, 105, 0.2);
}

.match-outcome-section {
    display: flex;
    align-items: center;
    gap: 12px;
}

.match-result-badge {
    padding: 4px 12px;
    border-radius: 6px;
    font-weight: 600;
    font-size: 14px;
    text-transform: uppercase;
}

.match-result-badge.win {
    background: rgba(34, 197, 94, 0.15);
    color: #22c55e;
    border: 1px solid rgba(34, 197, 94, 0.3);
}

.match-result-badge.loss {
    background: rgba(239, 68, 68, 0.15);
    color: #ef4444;
    border: 1px solid rgba(239, 68, 68, 0.3);
}

.match-meta-info {
    display: flex;
    align-items: center;
    gap: 16px;
    font-size: 14px;
    color: #94a3b8;
}

.match-duration-rank {
    display: flex;
    align-items: center;
    gap: 12px;
}

.match-rank-img {
    width: 24px;
    height: 24px;
    border-radius: 4px;
}

/* ë§¤ì¹˜ ì¹´ë“œ ë©”ì¸ ì½˜í…ì¸  */
.deadlock-match-content {
    padding: 16px 24px;
}

.match-main-section {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 16px;
}

.match-hero-section {
    display: flex;
    align-items: center;
    gap: 16px;
}

.match-hero-img {
    width: 48px;
    height: 48px;
    border-radius: 8px;
    object-fit: cover;
}

.match-stats-section {
    text-align: right;
}

.match-kda {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 8px;
    justify-content: flex-end;
}

.kda-numbers {
    font-size: 18px;
    font-weight: 600;
    color: #f8fafc;
}

.kda-ratio {
    color: #22c55e;
    font-weight: 600;
}

.match-performance {
    display: flex;
    gap: 16px;
    justify-content: flex-end;
    font-size: 13px;
    color: #94a3b8;
}

/* ì•„ì´í…œ ê·¸ë¦¬ë“œ */
.match-items-section {
    margin-bottom: 16px;
}

.deadlock-items-grid {
    display: grid;
    grid-template-columns: repeat(6, 32px);
    gap: 8px;
    width: fit-content;
}

.deadlock-item-slot {
    width: 32px;
    height: 32px;
    border-radius: 6px;
    border: 1px solid rgba(71, 85, 105, 0.3);
    background: rgba(15, 23, 42, 0.6);
    display: flex;
    align-items: center;
    justify-content: center;
}

.deadlock-item-img {
    width: 28px;
    height: 28px;
    border-radius: 4px;
}

/* í”Œë ˆì´ì–´ ëª©ë¡ */
.match-players-section {
    background: rgba(15, 23, 42, 0.4);
    border-radius: 8px;
    padding: 16px;
}

.deadlock-players-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 8px 32px;
}

.deadlock-player-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 4px 0;
}

.deadlock-player-hero {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    border: 1px solid rgba(71, 85, 105, 0.3);
}

.deadlock-player-name {
    font-size: 13px;
    color: #e2e8f0;
    cursor: pointer;
    transition: color 0.2s;
    max-width: 120px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.deadlock-player-name:hover {
    color: #22c55e;
}

.match-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
    font-size: 14px;
}

.match-body {
    display: flex;
    gap: 24px;
    align-items: flex-start;
}

/* ìƒˆë¡œìš´ ë§¤ì¹˜ ì¹´ë“œ ë ˆì´ì•„ì›ƒ */
.match-content-grid {
    display: grid;
    grid-template-columns: 300px 1fr;
    gap: 24px;
    width: 100%;
    align-items: flex-start;
}

/* ê°œì¸ ìŠ¤íƒ¯ ì˜ì—­ (ì™¼ìª½) */
.match-personal-stats {
    background: rgba(30, 41, 59, 0.5);
    border-radius: 8px;
    padding: 16px;
    border: 1px solid rgba(71, 85, 105, 0.2);
}

.hero-rank-section {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 16px;
}

.hero-info-compact {
    display: flex;
    align-items: center;
    gap: 8px;
}

.hero-avatar {
    width: 40px;
    height: 40px;
    border-radius: 6px;
    border: 2px solid rgba(71, 85, 105, 0.3);
}

.hero-name-compact {
    font-weight: 600;
    color: #FFEFD7;
    font-size: 14px;
}

.rank-badge-compact .rank-icon {
    width: 32px;
    height: 32px;
}

.personal-stats-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    margin-bottom: 16px;
}

.kda-display {
    text-align: center;
}

.kda-numbers-large {
    font-size: 14px;
    font-weight: bold;
    color: #FFEFD7;
    font-family: monospace;
    white-space: nowrap;
    line-height: 1;
}

.kda-ratio-text {
    font-size: 12px;
    color: #94A3B8;
    margin-top: 4px;
}

.performance-display {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.stat-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.stat-label {
    font-size: 12px;
    color: #94A3B8;
}

.stat-value {
    font-size: 10px;
    font-weight: 500;
    color: #FFEFD7;
}

.match-items-compact {
    border-top: 1px solid rgba(71, 85, 105, 0.2);
    padding-top: 12px;
}

.items-label {
    font-size: 12px;
    color: #94A3B8;
    margin-bottom: 8px;
}

/* íŒ€ ì •ë³´ ì˜ì—­ (ì˜¤ë¥¸ìª½) */
.match-teams {
    background: rgba(30, 41, 59, 0.3);
    border-radius: 8px;
    padding: 16px;
    border: 1px solid rgba(71, 85, 105, 0.2);
    min-height: 200px;
}

.teams-header {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    margin-bottom: 12px;
    text-align: center;
}

.our-team-label {
    font-size: 12px;
    font-weight: 600;
    color: #10B981;
    padding: 4px 8px;
    background: rgba(16, 185, 129, 0.1);
    border-radius: 4px;
}

.enemy-team-label {
    font-size: 12px;
    font-weight: 600;
    color: #EF4444;
    padding: 4px 8px;
    background: rgba(239, 68, 68, 0.1);
    border-radius: 4px;
}

/* íŒ€ë³„ í”Œë ˆì´ì–´ í‘œì‹œ ìŠ¤íƒ€ì¼ */
.teams-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    height: 100%;
}

.team-section {
    display: flex;
    flex-direction: column;
    gap: 6px;
    padding: 10px;
    border-radius: 8px;
    background: rgba(15, 23, 42, 0.3);
    border: 1px solid rgba(71, 85, 105, 0.2);
    min-height: 160px;
}

.team-section.our-team {
    border-left: 4px solid #10B981;
    background: rgba(16, 185, 129, 0.05);
}

.team-section.enemy-team {
    border-left: 4px solid #EF4444;
    background: rgba(239, 68, 68, 0.05);
}

.team-label-header {
    font-size: 13px;
    font-weight: 600;
    padding: 5px 10px;
    margin-bottom: 8px;
    border-radius: 6px;
    text-align: center;
}

.our-team .team-label-header {
    color: #10B981;
    background: rgba(16, 185, 129, 0.2);
    border: 1px solid rgba(16, 185, 129, 0.3);
}

.enemy-team .team-label-header {
    color: #EF4444;
    background: rgba(239, 68, 68, 0.2);
    border: 1px solid rgba(239, 68, 68, 0.3);
}

.team-section .flex {
    background: rgba(30, 41, 59, 0.4);
    padding: 5px 8px;
    border-radius: 6px;
    border: 1px solid rgba(71, 85, 105, 0.15);
    transition: all 0.2s ease;
}

.team-section .flex:hover {
    background: rgba(30, 41, 59, 0.7);
    transform: translateX(2px);
}

.team-section img {
    width: 24px !important;
    height: 24px !important;
    border-radius: 50%;
    border: 2px solid rgba(71, 85, 105, 0.3);
}

.our-team .player-name-text {
    color: #10B981 !important;
    font-size: 12px;
    font-weight: 500;
}

.enemy-team .player-name-text {
    color: #EF4444 !important;
    font-size: 12px;
    font-weight: 500;
}

/* ë°˜ì‘í˜• ë””ìì¸ */
@media (max-width: 768px) {
    .match-content-grid {
        grid-template-columns: 1fr;
        gap: 16px;
    }
    
    .personal-stats-grid {
        grid-template-columns: 1fr;
        text-align: center;
    }
    
    .teams-header {
        grid-template-columns: 1fr;
        gap: 8px;
    }
}
}

.match-left-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 16px;
    min-width: 0;
}

.match-right-content {
    width: 420px;
    flex-shrink: 0;
}

.match-outcome-info {
    display: flex;
    gap: 8px;
    align-items: center;
}

.match-result-text.win {
    color: #4caf50;
    font-weight: bold;
}

.match-result-text.loss {
    color: #f44336;
    font-weight: bold;
}

.match-type {
    color: #999;
}

.match-date {
    color: #ccc;
}

.match-id-info {
    display: flex;
    gap: 12px;
    align-items: center;
    color: #999;
    font-size: 13px;
}

.match-main-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
}

.rank-hero-section {
    display: flex;
    align-items: center;
    gap: 16px;
}

.rank-badge-img {
    width: 32px;
    height: 32px;
    object-fit: cover;
}

.hero-info {
    display: flex;
    align-items: center;
    gap: 8px;
}

.hero-portrait {
    width: 40px;
    height: 40px;
    border-radius: 8px;
    object-fit: cover;
}

.hero-name {
    font-weight: bold;
    color: #fff;
    font-size: 16px;
}

.stats-section {
    text-align: right;
}

.kda-stats {
    margin-bottom: 4px;
}

.kda-numbers {
    font-size: 18px;
    font-weight: bold;
    color: #fff;
    margin-right: 8px;
}

.kda-ratio {
    color: #4caf50;
    font-weight: bold;
}

.performance-stats {
    display: flex;
    gap: 12px;
    justify-content: flex-end;
    font-size: 13px;
    color: #ccc;
}

.stat-item {
    white-space: nowrap;
}

.match-items-section {
    margin-bottom: 16px;
}

.grid {
    display: grid;
}

.grid-cols-6 {
    grid-template-columns: repeat(6, 1fr);
}

.gap-2 {
    gap: 8px;
}

.w-fit {
    width: fit-content;
}

.mb-1 {
    margin-bottom: 4px;
}

.w-8, .h-8 {
    width: 32px;
    height: 32px;
}

.rounded {
    border-radius: 4px;
}

.border-border {
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.bg-muted {
    background-color: rgba(100, 100, 100, 0.3);
}

.match-players {
    margin-top: 12px;
}

.grid-cols-2 {
    grid-template-columns: repeat(2, 1fr);
}

.grid-cols-1 {
    grid-template-columns: repeat(1, 1fr);
}

/* md: 768px ì´ìƒì—ì„œ auto 1fr auto ë ˆì´ì•„ì›ƒ */
@media (min-width: 768px) {
    .md\\:grid-cols-\\[auto_1fr_auto\\] {
        grid-template-columns: auto 1fr auto;
    }
}

.gap-x-4 {
    column-gap: 1rem;
}

.gap-y-8 {
    row-gap: 2rem;
}

.bg-card {
    background-color: var(--card-bg, rgba(0, 0, 0, 0.2));
}

.overflow-hidden {
    overflow: hidden;
}

.w-full {
    width: 100%;
}

.gap-x-5 {
    column-gap: 20px;
}

.gap-y-1_5 {
    row-gap: 6px;
}

.w-6, .h-6 {
    width: 24px;
    height: 24px;
}

.rounded-full {
    border-radius: 50%;
}

.player-name-text {
    font-size: 12px;
    color: #ccc;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 128px;
}

.flex {
    display: flex;
}

.items-center {
    align-items: center;
}

.w-full {
    width: 100%;
}

.p-3 {
    padding: 12px;
}

.items-start {
    align-items: flex-start;
}

/* Welcome Message Styles */
.welcome-message {
    text-align: center;
    background: linear-gradient(135deg, rgba(88, 101, 242, 0.1) 0%, rgba(0, 0, 0, 0) 100%);
    padding: 30px;
    border-radius: 16px;
    margin-bottom: 30px;
    border: 1px solid rgba(88, 101, 242, 0.2);
}

.welcome-message h1 {
    font-size: 32px;
    font-weight: 700;
    color: #FFEFD7;
    margin: 0 0 10px 0;
}

.welcome-message p {
    color: #999;
    margin: 0 0 20px 0;
    font-size: 16px;
}

.quick-actions {
    display: flex;
    justify-content: center;
    gap: 15px;
    flex-wrap: wrap;
}

.action-btn {
    padding: 8px 16px;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 500;
    font-size: 14px;
    transition: all 0.3s;
}

.action-btn.secondary {
    background: rgba(255, 255, 255, 0.1);
    color: #FFEFD7;
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.action-btn.secondary:hover {
    background: rgba(255, 255, 255, 0.15);
    border-color: rgba(255, 255, 255, 0.3);
    transform: translateY(-1px);
}

/* Player Detail Styles (ê¸°ì¡´ CSS ì¬ì‚¬ìš©) */
.player-detail-section {
    padding: 120px 0 60px;
    min-height: 100vh;
    background: #000000;
}

.player-detail-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 40px;
}

/* í”Œë ˆì´ì–´ ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
.player-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: rgba(255, 255, 255, 0.05);
    padding: 40px;
    border-radius: 16px;
    margin-bottom: 40px;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.player-basic-info {
    display: flex;
    align-items: center;
    gap: 20px;
}

.player-detail-avatar {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    border: 3px solid #63a2e2;
}

.player-main-info {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.player-name {
    font-size: 32px;
    font-weight: 700;
    color: #FFEFD7;
    margin: 0;
}

.player-meta {
    display: flex;
    align-items: center;
    gap: 15px;
    font-size: 16px;
    color: #999;
}

.player-country {
    font-size: 24px;
}

.player-account-id {
    font-family: monospace;
    font-size: 14px;
}

.player-rank {
    text-align: center;
}

.rank-badge {
    display: flex;
    align-items: center;
    gap: 15px;
}

.rank-medal {
    width: 64px;
    height: 64px;
}

.rank-info {
    display: flex;
    flex-direction: column;
    gap: 5px;
}

.rank-name {
    font-size: 18px;
    font-weight: 600;
    color: #63a2e2;
}

.rank-score {
    font-size: 24px;
    font-weight: 700;
    color: #FFEFD7;
}

.player-stats {
    background: rgba(255, 255, 255, 0.05);
    padding: 40px;
    border-radius: 16px;
    margin-bottom: 40px;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 30px;
}

.stat-card {
    text-align: center;
    padding: 20px;
    background: rgba(255, 255, 255, 0.03);
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    transition: all 0.3s;
}

.stat-card:hover {
    background: rgba(99, 162, 226, 0.1);
    border-color: #63a2e2;
    transform: translateY(-2px);
}

.stat-value {
    font-size: 28px;
    font-weight: 700;
    color: #63a2e2;
    margin-bottom: 8px;
    display: block;
}

.stat-label {
    font-size: 14px;
    color: #999;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.player-section {
    background: rgba(255, 255, 255, 0.05);
    padding: 40px;
    border-radius: 16px;
    margin-bottom: 40px;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.section-title {
    font-size: 24px;
    font-weight: 600;
    color: #FFEFD7;
    margin-bottom: 30px;
    border-bottom: 2px solid #63a2e2;
    padding-bottom: 10px;
}

.heroes-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
}

.hero-card {
    display: flex;
    align-items: center;
    gap: 15px;
    background: rgba(255, 255, 255, 0.03);
    padding: 20px;
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    transition: all 0.3s;
}

.hero-card:hover {
    background: rgba(99, 162, 226, 0.1);
    border-color: #63a2e2;
    transform: translateY(-2px);
}

.hero-card-image {
    width: 50px;
    height: 50px;
    border-radius: 8px;
}

.hero-card-info h3 {
    font-size: 16px;
    font-weight: 600;
    color: #FFEFD7;
    margin: 0 0 5px 0;
}

.hero-card-stats {
    font-size: 14px;
    color: #999;
}

/* ìƒì„¸ ì˜ì›… ì¹´ë“œ ìŠ¤íƒ€ì¼ */
.hero-card.detailed {
    flex-direction: column;
    align-items: stretch;
    padding: 25px;
    min-height: 300px;
}

.hero-card.detailed .hero-card-image {
    width: 60px;
    height: 60px;
    align-self: center;
    margin-bottom: 15px;
}

.hero-card-name {
    text-align: center;
    font-size: 18px;
    font-weight: 700;
    color: #FFEFD7;
    margin: 0 0 20px 0;
}

.hero-card-main-stats {
    margin-bottom: 15px;
    padding-bottom: 15px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.hero-card-detailed-stats {
    flex: 1;
}

.hero-stat-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
    font-size: 13px;
}

.hero-stat-label {
    color: #999;
    font-weight: 500;
}

.hero-stat-value {
    color: #FFEFD7;
    font-weight: 600;
}

.hero-stat-value.positive {
    color: #10B981;
}

.hero-stat-value.negative {
    color: #EF4444;
}

/* ë§¤ì¹˜ ë¦¬ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
.matches-list {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.match-card {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: rgba(255, 255, 255, 0.03);
    padding: 20px;
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    transition: all 0.3s;
}

.match-card:hover {
    background: rgba(99, 162, 226, 0.1);
    border-color: #63a2e2;
}

.match-card.win {
    border-left: 4px solid #10B981;
}

.match-card.loss {
    border-left: 4px solid #EF4444;
}

.match-hero {
    display: flex;
    align-items: center;
    gap: 15px;
    min-width: 140px;
}

.match-hero-image {
    width: 40px;
    height: 40px;
    border-radius: 6px;
}

.match-hero-name {
    font-weight: 500;
    color: #FFEFD7;
}

.match-result {
    display: flex;
    flex-direction: column;
    align-items: center;
    min-width: 80px;
}

.result-text {
    font-weight: 600;
    font-size: 14px;
}

.win-text {
    color: #10B981;
}

.loss-text {
    color: #EF4444;
}

.unknown-text {
    color: #999;
}

.match-outcomes {
    display: flex;
    flex-direction: column;
    gap: 2px;
    margin-bottom: 4px;
}

.match-outcome {
    font-weight: 600;
    font-size: 13px;
}

.lane-outcome {
    font-weight: 500;
    font-size: 11px;
}

.match-duration {
    font-size: 12px;
    color: #999;
}

.match-id {
    font-size: 11px;
    color: #666;
    font-family: monospace;
}

.match-stats {
    display: flex;
    flex-direction: column;
    align-items: center;
    min-width: 80px;
}

.kda {
    font-family: monospace;
    font-size: 16px;
    color: #FFEFD7;
}

.kda-ratio {
    font-size: 12px;
    color: #999;
}

.match-performance {
    display: flex;
    gap: 20px;
    flex: 1;
}

.performance-item {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.performance-label {
    font-size: 12px;
    color: #999;
    margin-bottom: 2px;
}

.performance-value {
    font-weight: 500;
    color: #FFEFD7;
    font-size: 14px;
}

.match-time {
    font-size: 12px;
    color: #999;
    min-width: 80px;
    text-align: right;
}

/* Match Items Styles */
.match-items {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    min-width: 250px;
}

.items-label {
    font-size: 12px;
    color: #999;
    font-weight: 500;
}

.items-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(40px, 1fr));
    gap: 4px;
    max-width: 240px;
}

.item-wrapper {
    position: relative;
    display: inline-block;
}

.empty-slot {
    opacity: 0.3;
}

.empty-item-placeholder {
    width: 48px;
    height: 48px;
    background: rgba(255, 255, 255, 0.1);
    border: 2px solid rgba(255, 255, 255, 0.2);
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #666;
    font-size: 20px;
}

.empty-item-placeholder::before {
    content: '?';
    font-weight: bold;
}

.items-info {
    font-size: 11px;
    color: #999;
    text-align: center;
    margin-top: 4px;
    font-style: italic;
}

.item-image {
    width: 48px;
    height: 48px;
    border-radius: 4px;
    transition: transform 0.2s ease;
    object-fit: cover;
}

.item-image:hover {
    transform: scale(1.1);
}

.item-image.real-item {
    border: 2px solid #10B981;
    box-shadow: 0 0 8px rgba(16, 185, 129, 0.3);
}

.item-image.real-item:hover {
    border-color: #059669;
    box-shadow: 0 0 12px rgba(16, 185, 129, 0.5);
}

.weapon-item {
    border-color: #FF8C42 !important;
}

.vitality-item {
    border-color: #4CAF50 !important;
}

.spirit-item {
    border-color: #8E44AD !important;
}

.item-cost {
    position: absolute;
    bottom: 2px;
    right: 2px;
    background: rgba(0, 0, 0, 0.8);
    color: #FFD700;
    font-size: 10px;
    font-weight: bold;
    padding: 1px 3px;
    border-radius: 2px;
    line-height: 1;
}


/* íŒŒí‹° ìŠ¤íƒ¯ ìŠ¤íƒ€ì¼ */
.party-stats-list {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.party-member {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 15px 20px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    transition: all 0.3s;
    cursor: pointer;
}

.party-member:hover {
    background: rgba(99, 162, 226, 0.1);
    border-color: #63a2e2;
    transform: translateX(5px);
}

.party-member:active {
    background: rgba(99, 162, 226, 0.15);
    border-color: #5289c7;
    transform: translateX(3px) scale(0.98);
}

.party-member-avatar {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    overflow: hidden;
    flex-shrink: 0;
}

.party-member-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.party-member-info {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.party-member-name {
    font-weight: 600;
    color: #FFEFD7;
    font-size: 16px;
}

.party-member-matches {
    font-size: 14px;
    color: #999;
}

.party-member-winrate {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    min-width: 80px;
}

.winrate-value {
    font-size: 20px;
    font-weight: 700;
    color: #63a2e2;
}

.winrate-label {
    font-size: 12px;
    color: #999;
    text-transform: uppercase;
}

.party-member-id {
    font-size: 12px;
    color: #999;
    font-family: monospace;
}

.party-stats {
    display: flex;
    gap: 25px;
    flex: 1;
}

.party-stat {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
}

.party-stat-label {
    font-size: 12px;
    color: #999;
    margin-bottom: 4px;
}

.party-stat-value {
    font-weight: 600;
    color: #63a2e2;
    font-size: 14px;
}

.party-last-played {
    font-size: 12px;
    color: #999;
    min-width: 100px;
    text-align: right;
}

/* MMR ê·¸ë˜í”„ ìŠ¤íƒ€ì¼ */
.mmr-graph-container {
    background: rgba(0, 0, 0, 0.3);
    border-radius: 15px;
    padding: 25px;
    margin: 20px 0;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

#mmr-chart {
    width: 100% !important;
    height: 400px !important;
    background: transparent;
}

.match-outcome-info {
    display: flex;
    gap: 8px;
    align-items: center;
}

.match-result-text.win {
    color: #4caf50;
    font-weight: bold;
}

.match-result-text.loss {
    color: #f44336;
    font-weight: bold;
}

.match-type {
    color: #999;
}

.match-date {
    color: #ccc;
}

.match-id-info {
    display: flex;
    gap: 12px;
    align-items: center;
    color: #999;
    font-size: 13px;
}

.match-main-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
}

.rank-hero-section {
    display: flex;
    align-items: center;
    gap: 16px;
}

.match-rank {
    font-weight: bold;
    color: #ffd700;
    font-size: 16px;
}

.hero-info {
    display: flex;
    align-items: center;
    gap: 8px;
}

.hero-portrait {
    width: 40px;
    height: 40px;
    border-radius: 8px;
    object-fit: cover;
}

.hero-name {
    font-weight: bold;
    color: #fff;
    font-size: 16px;
}

.stats-section {
    text-align: right;
}

.kda-stats {
    margin-bottom: 4px;
}

.kda-numbers {
    font-size: 18px;
    font-weight: bold;
    color: #fff;
    margin-right: 8px;
}

.kda-ratio {
    color: #4caf50;
    font-weight: bold;
}

.performance-stats {
    display: flex;
    gap: 12px;
    justify-content: flex-end;
    font-size: 13px;
    color: #ccc;
}

.stat-item {
    white-space: nowrap;
}

.match-items-section {
    margin-bottom: 16px;
}

.items-row {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.items-icons {
    display: flex;
    gap: 4px;
    flex-wrap: wrap;
}

.item-icon {
    width: 32px;
    height: 32px;
    border-radius: 4px;
    object-fit: cover;
}

.item-icon.tier-1 {
    border: 1px solid #8B7355;
}

.item-icon.tier-2 {
    border: 1px solid #4A90E2;
}

.item-icon.tier-3 {
    border: 1px solid #9B59B6;
}

.item-icon.tier-4 {
    border: 1px solid #FFD700;
}

.items-names {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    font-size: 12px;
    color: #999;
}

.item-name {
    white-space: nowrap;
}

.match-players {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    font-size: 13px;
}

.team {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.team-header {
    font-weight: bold;
    color: #ccc;
    margin-bottom: 8px;
}

.player-row {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 4px;
    border-radius: 4px;
}

.player-hero-small {
    width: 24px;
    height: 24px;
    border-radius: 4px;
    object-fit: cover;
}

.player-name {
    flex: 1;
    color: #fff;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

/* deadlock-api.com ìŠ¤íƒ€ì¼ ì¶”ê°€ CSS */
.rank-badge-container {
    display: flex;
    align-items: center;
    gap: 8px;
}

.rank-badge-img {
    width: 32px;
    height: 32px;
    object-fit: cover;
}

.rank-text-fallback {
    font-weight: bold;
    color: #ffd700;
    font-size: 16px;
}

.bg-muted {
    background-color: rgba(0, 0, 0, 0.2);
    border-radius: 8px;
}

.border-border {
    border-color: rgba(255, 255, 255, 0.2);
}

.text-muted-foreground {
    color: #999;
}

.player-name-text {
    font-size: 12px;
    color: #ccc;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.grid {
    display: grid;
}

.grid-cols-6 {
    grid-template-columns: repeat(6, 1fr);
}

.grid-cols-2 {
    grid-template-columns: repeat(2, 1fr);
}

.gap-2 {
    gap: 8px;
}

.gap-x-5 {
    column-gap: 20px;
}

.gap-y-1_5 {
    row-gap: 6px;
}

.w-fit {
    width: fit-content;
}

.mb-1 {
    margin-bottom: 4px;
}

.size-8, .w-8, .h-8 {
    width: 32px;
    height: 32px;
}

.w-6, .h-6 {
    width: 24px;
    height: 24px;
}

.rounded {
    border-radius: 4px;
}

.rounded-full {
    border-radius: 50%;
}

.aspect-square {
    aspect-ratio: 1 / 1;
}

.w-32 {
    width: 128px;
}

.truncate {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.text-xs {
    font-size: 12px;
}

.items-start {
    align-items: flex-start;
}

.p-3 {
    padding: 12px;
}

.flex {
    display: flex;
}

.items-center {
    align-items: center;
}

.w-full {
    width: 100%;
}

/* ê¸°ì¡´ ë§¤ì¹˜ ìŠ¤íƒ€ì¼ ìˆ¨ê¹€ */
.match-card {
    display: none;
}

/* ì—ëŸ¬ ë° ë¡œë”© ìŠ¤íƒ€ì¼ */
.profile-error {
    text-align: center;
    padding: 100px 20px;
    color: #FFEFD7;
}

.profile-error h2 {
    font-size: 36px;
    margin-bottom: 20px;
    color: #EF4444;
}

.retry-btn {
    background: #63a2e2;
    color: white;
    padding: 12px 24px;
    border: none;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
}

.retry-btn:hover {
    background: #5289c7;
    transform: translateY(-2px);
}

.back-button {
    display: inline-block;
    background: rgba(255, 255, 255, 0.1);
    color: #FFEFD7;
    padding: 12px 24px;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 500;
    transition: all 0.3s;
}

.back-button:hover {
    background: rgba(255, 255, 255, 0.2);
    color: #FFEFD7;
}

/* íŒ€ ë­í¬ ë°°ì§€ ìŠ¤íƒ€ì¼ */
.match-meta-info {
    display: flex;
    align-items: center;
    gap: 10px;
    margin: 4px 0;
}

.team-rank-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
    position: relative;
}

.rank-badge-image {
    width: 100%;
    height: 100%;
    object-fit: contain;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

.rank-fallback {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
    border-radius: 6px;
    font-weight: bold;
    font-size: 12px;
    color: white;
    background: linear-gradient(135deg, #63a2e2, #4a90e2);
    border: 2px solid #63a2e2;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
    line-height: 1;
}

/* íŒ€ ë­í¬ í˜¸ë²„ íš¨ê³¼ */
.team-rank-badge:hover {
    transform: scale(1.1);
    transition: transform 0.2s ease;
}

.team-rank-badge:hover .rank-badge-image {
    filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.5)) brightness(1.1);
}

/* ì•„ì´í…œ ì‹œê°„ í‘œì‹œ ìŠ¤íƒ€ì¼ */
.item-wrapper {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.item-time {
    position: absolute;
    bottom: -2px;
    right: -2px;
    background: rgba(0, 0, 0, 0.8);
    color: #fff;
    font-size: 9px;
    padding: 1px 3px;
    border-radius: 3px;
    line-height: 1;
    border: 1px solid rgba(255, 255, 255, 0.2);
    z-index: 2;
}

.empty-item-placeholder {
    width: 48px;
    height: 48px;
    background: rgba(255, 255, 255, 0.05);
    border: 2px dashed rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #666;
    font-size: 12px;
}

/* ë°˜ì‘í˜• */
@media (max-width: 768px) {
    .player-detail-container {
        padding: 0 20px;
    }
    
    .welcome-message h1 {
        font-size: 24px;
    }
    
    .quick-actions {
        flex-direction: column;
        align-items: center;
    }
    
    .player-header {
        flex-direction: column;
        gap: 20px;
        text-align: center;
    }
    
    .stats-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
    }
    
    .heroes-grid {
        grid-template-columns: 1fr;
    }
    
    .match-card {
        flex-direction: column;
        gap: 12px;
        text-align: center;
    }
    
    .match-hero, .match-result, .match-stats {
        min-width: auto;
    }
    
    .match-performance {
        justify-content: center;
    }
    
    .match-time {
        text-align: center;
        min-width: auto;
    }
    
    .match-meta-info {
        flex-direction: column;
        gap: 5px;
        align-items: center;
    }
    
    .team-rank-badge {
        width: 24px;
        height: 24px;
    }
    
    .rank-fallback {
        width: 20px;
        height: 20px;
        font-size: 10px;
    }
    
    .party-member {
        flex-direction: column;
        gap: 15px;
        text-align: center;
    }
    
    .party-member-info {
        min-width: auto;
    }
    
    .party-stats {
        justify-content: center;
        flex-wrap: wrap;
        gap: 15px;
    }
    
    .party-last-played {
        text-align: center;
        min-width: auto;
    }
}

/* Skeleton Loading Styles for Progressive Loading */
.skeleton-loading {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 8px;
    padding: 20px;
    text-align: center;
    color: #999;
    font-style: italic;
    animation: skeleton-pulse 1.5s ease-in-out infinite alternate;
}

@keyframes skeleton-pulse {
    0% {
        opacity: 0.6;
    }
    100% {
        opacity: 1;
    }
}

.skeleton-loading::before {
    content: "â³ ";
    margin-right: 8px;
}
</style>

<script>
// êµ­ê°€ í”Œë˜ê·¸ë¥¼ ì´ë¯¸ì§€ë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜
function getCountryImage(countryFlag) {
    const flagImageMap = {
        'ğŸ‡ºğŸ‡¸': '<img src="https://flagcdn.com/24x18/us.png" alt="ë¯¸êµ­" title="ë¯¸êµ­" class="flag-image">',
        'ğŸ‡¨ğŸ‡¦': '<img src="https://flagcdn.com/24x18/ca.png" alt="ìºë‚˜ë‹¤" title="ìºë‚˜ë‹¤" class="flag-image">',
        'ğŸ‡²ğŸ‡½': '<img src="https://flagcdn.com/24x18/mx.png" alt="ë©•ì‹œì½”" title="ë©•ì‹œì½”" class="flag-image">',
        'ğŸ‡¬ğŸ‡§': '<img src="https://flagcdn.com/24x18/gb.png" alt="ì˜êµ­" title="ì˜êµ­" class="flag-image">',
        'ğŸ‡©ğŸ‡ª': '<img src="https://flagcdn.com/24x18/de.png" alt="ë…ì¼" title="ë…ì¼" class="flag-image">',
        'ğŸ‡«ğŸ‡·': '<img src="https://flagcdn.com/24x18/fr.png" alt="í”„ë‘ìŠ¤" title="í”„ë‘ìŠ¤" class="flag-image">',
        'ğŸ‡ªğŸ‡¸': '<img src="https://flagcdn.com/24x18/es.png" alt="ìŠ¤í˜ì¸" title="ìŠ¤í˜ì¸" class="flag-image">',
        'ğŸ‡®ğŸ‡¹': '<img src="https://flagcdn.com/24x18/it.png" alt="ì´íƒˆë¦¬ì•„" title="ì´íƒˆë¦¬ì•„" class="flag-image">',
        'ğŸ‡¨ğŸ‡³': '<img src="https://flagcdn.com/24x18/cn.png" alt="ì¤‘êµ­" title="ì¤‘êµ­" class="flag-image">',
        'ğŸ‡¯ğŸ‡µ': '<img src="https://flagcdn.com/24x18/jp.png" alt="ì¼ë³¸" title="ì¼ë³¸" class="flag-image">',
        'ğŸ‡°ğŸ‡·': '<img src="https://flagcdn.com/24x18/kr.png" alt="í•œêµ­" title="í•œêµ­" class="flag-image">',
        'ğŸ‡¹ğŸ‡¼': '<img src="https://flagcdn.com/24x18/tw.png" alt="ëŒ€ë§Œ" title="ëŒ€ë§Œ" class="flag-image">',
        'ğŸ‡¸ğŸ‡¬': '<img src="https://flagcdn.com/24x18/sg.png" alt="ì‹±ê°€í¬ë¥´" title="ì‹±ê°€í¬ë¥´" class="flag-image">',
        'ğŸ‡·ğŸ‡º': '<img src="https://flagcdn.com/24x18/ru.png" alt="ëŸ¬ì‹œì•„" title="ëŸ¬ì‹œì•„" class="flag-image">',
        'ğŸ‡µğŸ‡±': '<img src="https://flagcdn.com/24x18/pl.png" alt="í´ë€ë“œ" title="í´ë€ë“œ" class="flag-image">',
        'ğŸ‡¸ğŸ‡ª': '<img src="https://flagcdn.com/24x18/se.png" alt="ìŠ¤ì›¨ë´" title="ìŠ¤ì›¨ë´" class="flag-image">',
        'ğŸ‡³ğŸ‡´': '<img src="https://flagcdn.com/24x18/no.png" alt="ë…¸ë¥´ì›¨ì´" title="ë…¸ë¥´ì›¨ì´" class="flag-image">',
        'ğŸ‡©ğŸ‡°': '<img src="https://flagcdn.com/24x18/dk.png" alt="ë´ë§ˆí¬" title="ë´ë§ˆí¬" class="flag-image">',
        'ğŸ‡¹ğŸ‡­': '<img src="https://flagcdn.com/24x18/th.png" alt="íƒœêµ­" title="íƒœêµ­" class="flag-image">',
        'ğŸ‡»ğŸ‡³': '<img src="https://flagcdn.com/24x18/vn.png" alt="ë² íŠ¸ë‚¨" title="ë² íŠ¸ë‚¨" class="flag-image">',
        'ğŸ‡²ğŸ‡¾': '<img src="https://flagcdn.com/24x18/my.png" alt="ë§ë ˆì´ì‹œì•„" title="ë§ë ˆì´ì‹œì•„" class="flag-image">',
        'ğŸ‡µğŸ‡­': '<img src="https://flagcdn.com/24x18/ph.png" alt="í•„ë¦¬í•€" title="í•„ë¦¬í•€" class="flag-image">',
        'ğŸ‡®ğŸ‡©': '<img src="https://flagcdn.com/24x18/id.png" alt="ì¸ë„ë„¤ì‹œì•„" title="ì¸ë„ë„¤ì‹œì•„" class="flag-image">',
        'ğŸŒ': '<img src="https://flagcdn.com/24x18/un.png" alt="ì•Œ ìˆ˜ ì—†ìŒ" title="ì•Œ ìˆ˜ ì—†ìŒ" class="flag-image">'
    };
    
    return flagImageMap[countryFlag] || '<img src="https://flagcdn.com/24x18/un.png" alt="ì•Œ ìˆ˜ ì—†ìŒ" title="ì•Œ ìˆ˜ ì—†ìŒ" class="flag-image">';
}

// Progressive Loading ì§€ì› í•¨ìˆ˜ë“¤
function populatePlayerData(data) {
    console.log('ğŸ¨ ê¸°ë³¸ í”„ë¡œí•„ ë°ì´í„°ë¡œ UI ì—…ë°ì´íŠ¸:', data);
    
    // ê¸°ë³¸ ì •ë³´ ì—…ë°ì´íŠ¸ (ì•ˆì „í•œ ìš”ì†Œ ì²´í¬)
    const playerAvatar = document.getElementById('player-avatar');
    const playerName = document.getElementById('player-name');
    const playerCountry = document.getElementById('player-country');
    
    if (playerAvatar) {
        playerAvatar.src = data.avatar || 'https://avatars.cloudflare.steamstatic.com/b5bd56c1aa4644a474a2e4972be27ef9e82e517e_full.jpg';
    }
    if (playerName) {
        playerName.textContent = data.name || 'Unknown Player';
    }
    if (playerCountry) {
        playerCountry.innerHTML = getCountryImage(data.country || 'ğŸŒ');
    }
    
    // ë­í¬ ì •ë³´ ì—…ë°ì´íŠ¸
    const rankMedal = document.getElementById('rank-medal');
    const rankName = document.getElementById('rank-name');
    const rankScore = document.getElementById('rank-score');
    
    if (rankMedal && rankName && rankScore) {
        const getMedalImage = (medal, subrank) => {
            const medalRankMap = {
                'Eternus': 11, 'Phantom': 10, 'Oracle': 9, 'Ritualist': 8,
                'Alchemist': 7, 'Arcanist': 6, 'Initiate': 5
            };
            const rankNumber = medalRankMap[medal] || 5;
            return `https://cdn.deadlock.coach/vpk/panorama/images/ranked/badges/rank${rankNumber}/badge_sm_subrank${subrank || 1}.webp`;
        };
        
        if (data.rank?.medal && data.rank?.subrank && data.rank?.score) {
            rankMedal.src = getMedalImage(data.rank.medal, data.rank.subrank);
            rankName.textContent = `${data.rank.medal} ${data.rank.subrank}`;
            rankScore.textContent = data.rank.score.toLocaleString();
        } else {
            rankMedal.src = getMedalImage('Initiate', 1);
            rankName.textContent = 'ë­í¬ ì •ë³´ ì—†ìŒ';
            rankScore.textContent = '-';
        }
    }
    
    // ê¸°ë³¸ ìŠ¤íƒ¯ ì—…ë°ì´íŠ¸ (ì•ˆì „í•œ ìš”ì†Œ ì²´í¬)
    const stats = data.stats || {};
    const statElements = [
        { id: 'stat-matches', value: stats.matches || '0' },
        { id: 'stat-winrate', value: `${stats.winRate || 0}%` },
        { id: 'stat-lane-winrate', value: `${stats.laneWinRate || 0}%` },
        { id: 'stat-kda', value: stats.kda || '0.0' },
        { id: 'stat-headshots', value: `${stats.headshotPct || 0}%` },
        { id: 'stat-souls', value: stats.soulsPerMin || '0' },
        { id: 'stat-damage', value: stats.denies || '0' },
        { id: 'stat-healing', value: stats.endorsements || '0' }
    ];
    
    statElements.forEach(({ id, value }) => {
        const element = document.getElementById(id);
        if (element) {
            element.textContent = value;
        } else {
            console.warn(`âš ï¸ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ: ${id}`);
        }
    });
}

function showSkeletonLoading() {
    console.log('ğŸ’€ ìŠ¤ì¼ˆë ˆí†¤ ë¡œë”© UI í‘œì‹œ');
    
    // ì˜ì›…, ë§¤ì¹˜, íŒŒí‹° ì„¹ì…˜ì— ìŠ¤ì¼ˆë ˆí†¤ UI í‘œì‹œ (ì•ˆì „í•œ ìš”ì†Œ ì²´í¬)
    const skeletonElements = [
        { id: 'heroes-grid', message: 'ì˜ì›… ë°ì´í„° ë¡œë”© ì¤‘...' },
        { id: 'matches-list', message: 'ë§¤ì¹˜ ë°ì´í„° ë¡œë”© ì¤‘...' },
        { id: 'party-members-list', message: 'íŒŒí‹° ë°ì´í„° ë¡œë”© ì¤‘...' }
    ];
    
    skeletonElements.forEach(({ id, message }) => {
        const element = document.getElementById(id);
        if (element) {
            element.innerHTML = `<div class="skeleton-loading">${message}</div>`;
        } else {
            console.warn(`âš ï¸ ìŠ¤ì¼ˆë ˆí†¤ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ: ${id}`);
        }
    });
}

async function loadMyProfileData() {
    const loading = document.getElementById('player-loading');
    const content = document.getElementById('player-content');
    const error = document.getElementById('profile-error');
    
    // DOM ìš”ì†Œ ì¡´ì¬ í™•ì¸
    if (!loading || !content) {
        console.error('âŒ í•„ìˆ˜ DOM ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
        return;
    }
    
    loading.style.display = 'flex';
    content.style.display = 'none';
    if (error) {
        error.style.display = 'none';
    }
    
    try {
        const accountId = '<%= accountId %>';
        console.log('ğŸ“‹ í”„ë¡œí•„ ë°ì´í„° ë¡œë”© ì‹œì‘, Account ID:', accountId);
        
        // accountId ìœ íš¨ì„± ê²€ì‚¬
        if (!accountId || accountId === 'null' || accountId === 'undefined') {
            throw new Error('Account IDê°€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.');
        }
        
        // Progressive Loading - ì„ì‹œ ë¹„í™œì„±í™” (ì•ˆì •ì„±ì„ ìœ„í•´)
        console.log('ğŸ”„ ê¸°ë³¸ í”„ë¡œí•„ ë°ì´í„° ë¡œë”© ì‹œì‘...');
        
        // íƒ€ì„ì•„ì›ƒì´ ìˆëŠ” fetch í•¨ìˆ˜
        const fetchWithTimeout = (url, timeout = 15000) => {
            return Promise.race([
                fetch(url, { 
                    headers: { 'Accept': 'application/json' },
                    cache: 'no-cache'
                }),
                new Promise((_, reject) => 
                    setTimeout(() => reject(new Error(`${url} ìš”ì²­ íƒ€ì„ì•„ì›ƒ`)), timeout)
                )
            ]);
        };
        
        // ìƒì„¸ ë°ì´í„°ë¥¼ ë³‘ë ¬ë¡œ ë¡œë“œ (íƒ€ì„ì•„ì›ƒ ì ìš©)
        console.log('ğŸ”„ ìƒì„¸ API í˜¸ì¶œ ì‹œì‘...');
        const apiCalls = await Promise.allSettled([
            fetchWithTimeout(`/api/v1/players/${accountId}`),
            fetchWithTimeout(`/api/v1/players/${accountId}/hero-stats`),
            fetchWithTimeout(`/api/v1/players/${accountId}/match-history?limit=10`),
            fetchWithTimeout(`/api/v1/players/${accountId}/party-stats`),
            fetchWithTimeout(`/api/v1/players/${accountId}/mmr`)
        ]);
        
        console.log('ğŸ“¡ API í˜¸ì¶œ ê²°ê³¼:', apiCalls.map((result, index) => ({
            index,
            status: result.status,
            reason: result.reason?.message
        })));
        
        // ì‘ë‹µ ì²˜ë¦¬
        const results = {
            player: null,
            heroStats: [],
            matchHistory: [],
            partyStats: [],
            mmrData: null
        };
        
        // API ê²°ê³¼ ì²˜ë¦¬
        for (let i = 0; i < apiCalls.length; i++) {
            const result = apiCalls[i];
            const apiNames = ['player', 'heroStats', 'matchHistory', 'partyStats', 'mmrData'];
            
            if (result.status === 'fulfilled') {
                try {
                    if (result.value.ok) {
                        const data = await result.value.json();
                        results[apiNames[i]] = data;
                        console.log(`âœ… ${apiNames[i]} ë¡œë“œ ì„±ê³µ`);
                    } else {
                        console.warn(`âš ï¸ ${apiNames[i]} API ì‹¤íŒ¨ (ìƒíƒœ: ${result.value.status})`);
                    }
                } catch (jsonError) {
                    console.error(`âŒ ${apiNames[i]} JSON íŒŒì‹± ì˜¤ë¥˜:`, jsonError);
                }
            } else {
                console.error(`âŒ ${apiNames[i]} ìš”ì²­ ì‹¤íŒ¨:`, result.reason);
            }
        }
        
        console.log('ğŸ“Š ìµœì¢… ë°›ì€ ë°ì´í„°:', {
            player: !!results.player,
            heroStats: Array.isArray(results.heroStats) ? results.heroStats.length : 0,
            matchHistory: Array.isArray(results.matchHistory) ? results.matchHistory.length : 0,
            partyStats: Array.isArray(results.partyStats) ? results.partyStats.length : 0,
            mmr: !!results.mmrData
        });
        
        // ìµœì†Œí•œ í”Œë ˆì´ì–´ ë°ì´í„°ë¼ë„ ìˆìœ¼ë©´ UI ì—…ë°ì´íŠ¸
        if (results.player && !results.player.error) {
            console.log('ğŸ¯ í”„ë¡œí•„ ë°ì´í„°ë¡œ UI ì—…ë°ì´íŠ¸');
            updatePlayerUIFast(results.player, results.heroStats, results.matchHistory, results.partyStats, results.mmrData);
            loading.style.display = 'none';
            content.style.display = 'block';
            console.log('âœ… í”„ë¡œí•„ ë°ì´í„° ë¡œë”© ì™„ë£Œ');
        } else {
            // ëª¨ë“  APIê°€ ì‹¤íŒ¨í•œ ê²½ìš° í´ë°± ì²˜ë¦¬
            console.warn('âš ï¸ í”Œë ˆì´ì–´ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŒ, ê¸°ë³¸ UI í‘œì‹œ');
            showFallbackUI(accountId);
            loading.style.display = 'none';
            content.style.display = 'block';
        }
        
    } catch (err) {
        console.error('âŒ í”„ë¡œí•„ ë°ì´í„° ë¡œë”© ì‹¤íŒ¨:', err);
        
        // ì•ˆì „í•œ ìš”ì†Œ ì¡°ì‘
        if (loading) {
            loading.style.display = 'none';
        }
        if (error) {
            error.style.display = 'block';
        }
        
        const errorMessageEl = document.getElementById('error-message');
        if (errorMessageEl) {
            errorMessageEl.textContent = `ì˜¤ë¥˜ ìƒì„¸: ${err.message || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'}`;
        } else {
            console.error('âŒ ì—ëŸ¬ ë©”ì‹œì§€ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ');
        }
    }
}

// í´ë°± UI í‘œì‹œ í•¨ìˆ˜
function showFallbackUI(accountId) {
    console.log('ğŸ”„ í´ë°± UI í‘œì‹œ, Account ID:', accountId);
    
    // ê¸°ë³¸ í”Œë ˆì´ì–´ ì •ë³´ ì„¤ì •
    const defaultAvatar = 'https://avatars.cloudflare.steamstatic.com/b5bd56c1aa4644a474a2e4972be27ef9e82e517e_full.jpg';
    const defaultName = 'Unknown Player';
    
    try {
        const playerAvatar = document.getElementById('player-avatar');
        const playerName = document.getElementById('player-name');
        const playerCountry = document.getElementById('player-country');
        
        if (playerAvatar) playerAvatar.src = defaultAvatar;
        if (playerName) playerName.textContent = defaultName;
        if (playerCountry) playerCountry.textContent = 'ğŸŒ';
        
        // ë¹ˆ ë§¤ì¹˜ íˆìŠ¤í† ë¦¬ í‘œì‹œ
        const matchesList = document.getElementById('matches-list');
        if (matchesList) {
            matchesList.innerHTML = '<p style="color: #94a3b8; text-align: center; padding: 2rem;">ë§¤ì¹˜ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.</p>';
        }
        
        // ë¹ˆ í†µê³„ í‘œì‹œ
        const heroStatsList = document.getElementById('hero-stats-list');
        if (heroStatsList) {
            heroStatsList.innerHTML = '<p style="color: #94a3b8; text-align: center; padding: 2rem;">ì˜ì›… í†µê³„ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>';
        }
        
        console.log('âœ… í´ë°± UI í‘œì‹œ ì™„ë£Œ');
    } catch (error) {
        console.error('âŒ í´ë°± UI í‘œì‹œ ì˜¤ë¥˜:', error);
    }
}

// ë¹ ë¥¸ UI ì—…ë°ì´íŠ¸ - ëª¨ë“  ë°ì´í„°ë¥¼ í•œ ë²ˆì— ì²˜ë¦¬
function updatePlayerUIFast(player, heroStats, matchHistory, partyStats, mmrData) {
    console.log('ğŸ¨ UI ì—…ë°ì´íŠ¸ ì‹œì‘, í”Œë ˆì´ì–´ ë°ì´í„°:', player);
    
    try {
        // Basic Info (ì•ˆì „í•œ ì ‘ê·¼)
        const avatar = player?.avatar || 'https://avatars.cloudflare.steamstatic.com/b5bd56c1aa4644a474a2e4972be27ef9e82e517e_full.jpg';
        const name = player?.name || 'Unknown Player';
        const country = player?.country || 'ğŸŒ';
        
        document.getElementById('player-avatar').src = avatar;
        document.getElementById('player-name').textContent = name;
        document.getElementById('player-country').innerHTML = getCountryImage(country);
        
        // Rank (ì•ˆì „í•œ ì ‘ê·¼)
        const getMedalImage = (medal, subrank) => {
            const medalRankMap = {
                'Eternus': 11, 'Phantom': 10, 'Oracle': 9, 'Ritualist': 8,
                'Alchemist': 7, 'Arcanist': 6, 'Initiate': 5
            };
            const rankNumber = medalRankMap[medal] || 9;
            return `https://cdn.deadlock.coach/vpk/panorama/images/ranked/badges/rank${rankNumber}/badge_sm_subrank${subrank || 1}.webp`;
        };
        
        // ì˜ì–´ ë“±ê¸‰ì„ í•œê¸€ë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜
        const getKoreanMedal = (englishMedal) => {
            const medalTranslation = {
                'Eternus': 'ì´í„°ëˆ„ìŠ¤',
                'Phantom': 'íŒ¬í…€',
                'Oracle': 'ì˜¤ë¼í´',
                'Ritualist': 'ë¦¬ì¸„ì–¼ë¦¬ìŠ¤íŠ¸',
                'Alchemist': 'ì•Œì¼€ë¯¸ìŠ¤íŠ¸',
                'Arcanist': 'ì•„ì¼€ë‹ˆìŠ¤íŠ¸',
                'Initiate': 'íƒí—˜ê°€'
            };
            return medalTranslation[englishMedal] || englishMedal;
        };
        
        const medal = player?.rank?.medal || null;
        const subrank = player?.rank?.subrank || null;
        const score = player?.rank?.score || null;
        
        if (medal && subrank && score) {
            document.getElementById('rank-medal').src = getMedalImage(medal, subrank);
            document.getElementById('rank-name').textContent = `${getKoreanMedal(medal)} ${subrank}`;
            document.getElementById('rank-score').textContent = (typeof score === 'number' ? score : parseInt(score) || 0).toLocaleString();
        } else {
            // ê¸°ë³¸ ë­í¬ ì´ë¯¸ì§€ (Initiate 1)
            document.getElementById('rank-medal').src = getMedalImage('Initiate', 1);
            document.getElementById('rank-name').textContent = 'ë­í¬ ì •ë³´ ì—†ìŒ';
            document.getElementById('rank-score').textContent = '-';
        }
        
        // Stats (ì•ˆì „í•œ ì ‘ê·¼)
        const stats = player?.stats || {};
        const matches = stats.matches || 0;
        const winRate = stats.winRate || 0;
        const laneWinRate = stats.laneWinRate || 0;
        const kda = stats.kda || '0.0';
        const soulsPerMin = stats.soulsPerMin || 0;
        const denies = stats.denies || 0;
        const endorsements = stats.endorsements || 0;
        
        document.getElementById('stat-matches').textContent = matches;
        document.getElementById('stat-winrate').textContent = `${winRate}%`;
        document.getElementById('stat-lane-winrate').textContent = `${laneWinRate}%`;
        document.getElementById('stat-kda').textContent = kda;
        document.getElementById('stat-souls').textContent = (typeof soulsPerMin === 'number' ? soulsPerMin : parseInt(soulsPerMin) || 0).toLocaleString();
        document.getElementById('stat-denies').textContent = (typeof denies === 'number' ? denies : parseInt(denies) || 0).toLocaleString();
        document.getElementById('stat-endorsements').textContent = (typeof endorsements === 'number' ? endorsements : parseInt(endorsements) || 0).toLocaleString();
        
        
        console.log('âœ… ê¸°ë³¸ UI ì—…ë°ì´íŠ¸ ì™„ë£Œ');
        
        // ì¦‰ì‹œ ì˜ì›… ë° ë§¤ì¹˜ ë°ì´í„° í‘œì‹œ
        if (heroStats && Array.isArray(heroStats) && heroStats.length > 0) {
            console.log('ğŸ¯ ì˜ì›… ìŠ¤íƒ¯ í‘œì‹œ:', heroStats.length, 'ê°œ');
            displayHeroStats(heroStats);
        } else {
            console.log('âš ï¸ ì˜ì›… ìŠ¤íƒ¯ ì—†ìŒ');
            document.getElementById('heroes-grid').innerHTML = '<p style="color: #999; text-align: center;">ì˜ì›… ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
        }
        
        if (matchHistory && Array.isArray(matchHistory) && matchHistory.length > 0) {
            console.log('ğŸ“‹ ë§¤ì¹˜ íˆìŠ¤í† ë¦¬ í‘œì‹œ:', matchHistory.length, 'ê°œ');
            displayMatchHistory(matchHistory);
        } else {
            console.log('âš ï¸ ë§¤ì¹˜ íˆìŠ¤í† ë¦¬ ì—†ìŒ');
            document.getElementById('matches-list').innerHTML = '<p style="color: #999; text-align: center;">ìµœê·¼ ë§¤ì¹˜ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
        }
        
        if (partyStats && Array.isArray(partyStats) && partyStats.length > 0) {
            console.log('ğŸ‘¥ íŒŒí‹° ìŠ¤íƒ¯ í‘œì‹œ:', partyStats.length, 'ê°œ');
            displayPartyStats(partyStats);
        } else {
            console.log('âš ï¸ íŒŒí‹° ìŠ¤íƒ¯ ì—†ìŒ');
            document.getElementById('party-stats-list').innerHTML = '<p style="color: #999; text-align: center;">íŒŒí‹° ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
        }
        
        // MMR ê·¸ë˜í”„ í‘œì‹œ - ë§¤ì¹˜ íˆìŠ¤í† ë¦¬ì—ì„œ ë­í¬ ë°ì´í„° ì¶”ì¶œ
        if (matchHistory && Array.isArray(matchHistory) && matchHistory.length > 0) {
            // ë§¤ì¹˜ íˆìŠ¤í† ë¦¬ì—ì„œ ë­í¬ ì •ë³´ ì¶”ì¶œí•˜ì—¬ MMR ê·¸ë˜í”„ ìƒì„±
            const mmrDataFromMatches = matchHistory
                .filter(match => match.teamRank && match.playedAt)
                .map(match => ({
                    date: match.playedAt,
                    rank: match.teamRank,
                    mmr: (9 - match.teamRank) * 1000 // ë­í¬ë¥¼ ëŒ€ëµì ì¸ MMRë¡œ ë³€í™˜ (ì„ì‹œ)
                }))
                .reverse(); // ì‹œê°„ìˆœìœ¼ë¡œ ì •ë ¬
                
            if (mmrDataFromMatches.length > 0) {
                console.log('ğŸ“ˆ ë§¤ì¹˜ íˆìŠ¤í† ë¦¬ì—ì„œ MMR ê·¸ë˜í”„ ìƒì„±:', mmrDataFromMatches.length, 'ê°œ ë°ì´í„°');
                displayMMRGraph(mmrDataFromMatches);
            } else {
                console.log('âš ï¸ ë­í¬ ë°ì´í„°ê°€ ìˆëŠ” ë§¤ì¹˜ê°€ ì—†ìŒ');
                document.getElementById('mmr-graph-container').innerHTML = '<p style="color: #999; text-align: center;">ë­í¬ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>';
            }
        } else {
            console.log('âš ï¸ ë§¤ì¹˜ íˆìŠ¤í† ë¦¬ ì—†ìŒ');
            document.getElementById('mmr-graph-container').innerHTML = '<p style="color: #999; text-align: center;">ë§¤ì¹˜ ë°ì´í„°ê°€ ì—†ì–´ MMR ê·¸ë˜í”„ë¥¼ í‘œì‹œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>';
        }
        
        console.log('ğŸ‰ ëª¨ë“  UI ì—…ë°ì´íŠ¸ ì™„ë£Œ');
        
    } catch (error) {
        console.error('âŒ UI ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜:', error);
        throw error;
    }
}

// ê¸°ì¡´ í•¨ìˆ˜ëŠ” í˜¸í™˜ì„±ì„ ìœ„í•´ ìœ ì§€
function updatePlayerUI(player) {
    // ê¸°ë³¸ ì •ë³´ë§Œ ì—…ë°ì´íŠ¸í•˜ê³  ë³„ë„ë¡œ ë¡œë“œ
    document.getElementById('player-avatar').src = player.avatar;
    document.getElementById('player-name').textContent = player.name;
    document.getElementById('player-country').textContent = player.country;
    
    const getMedalImage = (medal, subrank) => {
        const medalRankMap = {
            'Eternus': 11, 'Phantom': 10, 'Oracle': 9, 'Ritualist': 8,
            'Alchemist': 7, 'Arcanist': 6, 'Initiate': 5
        };
        const rankNumber = medalRankMap[medal] || 9;
        return `https://cdn.deadlock.coach/vpk/panorama/images/ranked/badges/rank${rankNumber}/badge_sm_subrank${subrank}.webp`;
    };
    
    // ì˜ì–´ ë“±ê¸‰ì„ í•œê¸€ë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜
    const getKoreanMedal = (englishMedal) => {
        const medalTranslation = {
            'Eternus': 'ì´í„°ëˆ„ìŠ¤',
            'Phantom': 'íŒ¬í…€',
            'Oracle': 'ì˜¤ë¼í´',
            'Ritualist': 'ë¦¬ì¸„ì–¼ë¦¬ìŠ¤íŠ¸',
            'Alchemist': 'ì•Œì¼€ë¯¸ìŠ¤íŠ¸',
            'Arcanist': 'ì•„ì¼€ë‹ˆìŠ¤íŠ¸',
            'Initiate': 'íƒí—˜ê°€'
        };
        return medalTranslation[englishMedal] || englishMedal;
    };
    
    if (player.rank?.medal && player.rank?.subrank && player.rank?.score) {
        document.getElementById('rank-medal').src = getMedalImage(player.rank.medal, player.rank.subrank);
        document.getElementById('rank-name').textContent = `${getKoreanMedal(player.rank.medal)} ${player.rank.subrank}`;
        document.getElementById('rank-score').textContent = player.rank.score.toLocaleString();
    } else {
        document.getElementById('rank-medal').src = getMedalImage('Initiate', 1);
        document.getElementById('rank-name').textContent = 'ë­í¬ ì •ë³´ ì—†ìŒ';
        document.getElementById('rank-score').textContent = '-';
    }
    
    document.getElementById('stat-matches').textContent = player.stats.matches;
    document.getElementById('stat-winrate').textContent = `${player.stats.winRate}%`;
    document.getElementById('stat-lane-winrate').textContent = `${player.stats.laneWinRate}%`;
    document.getElementById('stat-kda').textContent = player.stats.kda;
    document.getElementById('stat-headshots').textContent = `${player.stats.headshotPercent}%`;
    document.getElementById('stat-souls').textContent = player.stats.soulsPerMin.toLocaleString();
    document.getElementById('stat-damage').textContent = player.stats.damagePerMin.toLocaleString();
    document.getElementById('stat-healing').textContent = player.stats.healingPerMin.toLocaleString();
    
    
    loadHeroStats(player.accountId);
    loadMatchHistory(player.accountId);
}

// ì˜ì›…ë³„ ìŠ¤íƒ¯ ë¡œë“œ
async function loadHeroStats(accountId) {
    const grid = document.getElementById('heroes-grid');
    
    try {
        const response = await fetch(`/api/v1/players/${accountId}/hero-stats`);
        const heroStats = await response.json();
        
        if (response.ok && heroStats.length > 0) {
            displayHeroStats(heroStats);
        } else {
            throw new Error('ì˜ì›… ìŠ¤íƒ¯ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
        }
    } catch (error) {
        console.error('ì˜ì›… ìŠ¤íƒ¯ ë¡œë“œ ì‹¤íŒ¨:', error);
        grid.innerHTML = '<p style="color: #999; text-align: center;">ì˜ì›… ìŠ¤íƒ¯ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>';
    }
}

// ì˜ì›… ìŠ¤íƒ¯ í‘œì‹œ
function displayHeroStats(heroStats) {
    const grid = document.getElementById('heroes-grid');
    
    try {
        console.log('ğŸ¯ ì˜ì›… ìŠ¤íƒ¯ í‘œì‹œ ì‹œì‘:', heroStats);
        
        if (!Array.isArray(heroStats) || heroStats.length === 0) {
            grid.innerHTML = '<p style="color: #999; text-align: center;">ì˜ì›… ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
            return;
        }
        
        // Player_ìˆ«ì í˜•íƒœì—ì„œ ì‹¤ì œ í”Œë ˆì´ì–´ ì´ë¦„ì„ ì°¾ëŠ” í•¨ìˆ˜
        const getPlayerDisplayName = async (player) => {
            let displayName = player.name || player.player_name || player.steam_name || player.hero || 'Player';
            
            // Player_ìˆ«ì íŒ¨í„´ ê°ì§€ (ì˜ˆ: Player_92418199)
            const playerIdMatch = displayName.match(/^Player_(\d+)$/);
            if (playerIdMatch) {
                const playerId = playerIdMatch[1];
                console.log(`ğŸ” Player_${playerId} íŒ¨í„´ ê°ì§€, ì‹¤ì œ í”Œë ˆì´ì–´ ì •ë³´ API í˜¸ì¶œ ì¤‘...`);
                
                try {
                    // ì‹¤ì œ í”Œë ˆì´ì–´ ì •ë³´ë¥¼ APIì—ì„œ ê°€ì ¸ì˜¤ê¸°
                    const response = await fetch(`/api/v1/players/${playerId}`);
                    if (response.ok) {
                        const playerData = await response.json();
                        const realName = playerData.name || playerData.player_name || playerData.steam_name;
                        if (realName && realName !== 'undefined' && realName !== playerId) {
                            console.log(`âœ… Player_${playerId} â†’ ì‹¤ì œ ì´ë¦„: ${realName}`);
                            return realName;
                        }
                    }
                } catch (error) {
                    console.error(`âŒ Player_${playerId} ì •ë³´ ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:`, error);
                }
                
                // API í˜¸ì¶œì´ ì‹¤íŒ¨í•˜ë©´ í”Œë ˆì´ì–´ IDë§Œ í‘œì‹œ
                return `Player #${playerId}`;
            }
            
            // ì¼ë°˜ì ì¸ ê²½ìš°
            return displayName === 'undefined' || !displayName ? player.hero || 'Player' : displayName;
        };

        const getHeroImage = (heroName) => {
            const heroImageMap = {
                'Abrams': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/bull_mm.webp',
                'Bebop': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/bebop_mm.webp',
                'Calico': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/nano_mm.webp',
                'Dynamo': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/sumo_mm.webp',
                'Grey Talon': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/archer_mm.webp',
                'Haze': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/haze_mm.webp',
                'Infernus': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/inferno_mm.webp',
                'Ivy': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/tengu_mm.webp',
                'Kelvin': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/kelvin_mm.webp',
                'Mo & Krill': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/digger_mm.webp',
                'Paradox': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/chrono_mm.webp',
                'Pocket': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/synth_mm.webp',
                'Seven': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/gigawatt_mm.webp',
                'Viper': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/viper_mm.webp',
                'Vyper': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/viper_mm.webp',
                'Lady Geist': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/lady_geist_mm.webp',
                'Lash': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/lash_mm.webp',
                'McGinnis': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/mcginnis_mm.webp',
                'Mo & Krill': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/digger_mm.webp',
                'Paradox': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/chrono_mm.webp',
                'Pocket': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/synth_mm.webp',
                'Seven': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/gigawatt_mm.webp',
                'Shiv': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/shiv_mm.webp',
                'Viper': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/viper_mm.webp',
                'Viscous': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/viscous_mm.webp',
                'Warden': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/warden_mm.webp',
                'Vyper': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/viper_mm.webp',
                'Holliday': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/astro_mm.webp',
                'Mirage': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/mirage_mm.webp',
                'Wraith': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/wraith_mm.webp',
                'Yamato': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/yamato_mm.webp',
                'Sinclair': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/sinclair_mm.webp',
                'Vindicta': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/vindicta_mm.webp'
            };
            return heroImageMap[heroName] || 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/abrams_mm.webp';
        };
        
        const heroCards = heroStats.map((hero, index) => {
            try {
                // ìƒˆë¡œìš´ hero-stats API ë°ì´í„° êµ¬ì¡° ì‚¬ìš©
                const matches = parseInt(hero?.matches) || 0;
                const wins = parseInt(hero?.wins) || 0;
                const losses = parseInt(hero?.losses) || (matches - wins);
                const winRate = hero?.winRate || (matches > 0 ? Math.round((wins / matches) * 100) : 0);
                const kda = hero?.kda || '0.0';
                const avgKills = hero?.avgKills || 0;
                const avgDeaths = hero?.avgDeaths || 0;
                const avgAssists = hero?.avgAssists || 0;
                const avgSoulsPerMin = hero?.avgSoulsPerMin || 0;
                const avgDamagePerMin = hero?.avgDamagePerMin || 0;
                const avgHealingPerMin = hero?.avgHealingPerMin || 0;
                const avgMatchDuration = hero?.avgMatchDuration || 0;
                const durationFormatted = hero?.avgMatchDurationFormatted || 
                    (avgMatchDuration > 0 ? `${Math.floor(avgMatchDuration / 60)}:${(avgMatchDuration % 60).toString().padStart(2, '0')}` : '0:00');
                const heroName = hero?.hero || hero?.name || `Hero${index + 1}`;
                const accuracy = hero?.accuracy || 0;
                const critShotRate = hero?.critShotRate || 0;
                const avgLevel = hero?.avgLevel || 0;
                const timePlayedHours = hero?.timePlayedTotal ? (hero.timePlayedTotal / 3600).toFixed(1) : 0;
                
                return `
                    <div class="hero-card detailed">
                        <img src="${getHeroImage(heroName)}" alt="${heroName}" class="hero-card-image">
                        <div class="hero-card-info">
                            <h3 class="hero-card-name">${heroName}</h3>
                            <div class="hero-card-main-stats">
                                <div class="hero-stat-row">
                                    <span class="hero-stat-label">ë§¤ì¹˜:</span>
                                    <span class="hero-stat-value">${matches} (${wins}ìŠ¹ ${losses}íŒ¨)</span>
                                </div>
                                <div class="hero-stat-row">
                                    <span class="hero-stat-label">ìŠ¹ë¥ :</span>
                                    <span class="hero-stat-value ${winRate >= 50 ? 'positive' : 'negative'}">${winRate}%</span>
                                </div>
                                <div class="hero-stat-row">
                                    <span class="hero-stat-label">ì´ í”Œë ˆì´ ì‹œê°„:</span>
                                    <span class="hero-stat-value">${timePlayedHours}ì‹œê°„</span>
                                </div>
                            </div>
                            <div class="hero-card-detailed-stats">
                                <div class="hero-stat-row">
                                    <span class="hero-stat-label">KDA:</span>
                                    <span class="hero-stat-value">${avgKills}/${avgDeaths}/${avgAssists} (${kda})</span>
                                </div>
                                <div class="hero-stat-row">
                                    <span class="hero-stat-label">í‰ê·  ë ˆë²¨:</span>
                                    <span class="hero-stat-value">${avgLevel}</span>
                                </div>
                                <div class="hero-stat-row">
                                    <span class="hero-stat-label">ëª…ì¤‘ë¥ :</span>
                                    <span class="hero-stat-value">${accuracy}%</span>
                                </div>
                                <div class="hero-stat-row">
                                    <span class="hero-stat-label">í¬ë¦¬í‹°ì»¬ìœ¨:</span>
                                    <span class="hero-stat-value">${critShotRate}%</span>
                                </div>
                                <div class="hero-stat-row">
                                    <span class="hero-stat-label">ì†Œìš¸/ë¶„:</span>
                                    <span class="hero-stat-value">${avgSoulsPerMin.toLocaleString()}</span>
                                </div>
                                <div class="hero-stat-row">
                                    <span class="hero-stat-label">ë°ë¯¸ì§€/ë¶„:</span>
                                    <span class="hero-stat-value">${avgDamagePerMin.toLocaleString()}</span>
                                </div>
                                <div class="hero-stat-row">
                                    <span class="hero-stat-label">í‰ê·  ì‹œê°„:</span>
                                    <span class="hero-stat-value">${durationFormatted}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            } catch (heroError) {
                console.error('ì˜ì›… ì¹´ë“œ ìƒì„± ì˜¤ë¥˜:', heroError, hero);
                return `
                    <div class="hero-card">
                        <img src="https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/abrams_mm.webp" alt="Unknown" class="hero-card-image">
                        <div class="hero-card-info">
                            <h3>Unknown Hero</h3>
                            <div class="hero-card-stats">ë°ì´í„° ì˜¤ë¥˜</div>
                        </div>
                    </div>
                `;
            }
        });
        
        grid.innerHTML = heroCards.join('');
        console.log('âœ… ì˜ì›… ìŠ¤íƒ¯ í‘œì‹œ ì™„ë£Œ');
        
    } catch (error) {
        console.error('âŒ ì˜ì›… ìŠ¤íƒ¯ í‘œì‹œ ì˜¤ë¥˜:', error);
        grid.innerHTML = '<p style="color: #ff6b6b; text-align: center;">ì˜ì›… ë°ì´í„° í‘œì‹œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>';
    }
}

// ë§¤ì¹˜ íˆìŠ¤í† ë¦¬ ë¡œë“œ
async function loadMatchHistory(accountId) {
    const matchesList = document.getElementById('matches-list');
    
    try {
        const response = await fetch(`/api/v1/players/${accountId}/match-history?limit=20`);
        const matches = await response.json();
        
        if (response.ok && matches.length > 0) {
            displayMatchHistory(matches);
        } else {
            throw new Error('ë§¤ì¹˜ íˆìŠ¤í† ë¦¬ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
        }
    } catch (error) {
        console.error('ë§¤ì¹˜ íˆìŠ¤í† ë¦¬ ë¡œë“œ ì‹¤íŒ¨:', error);
        matchesList.innerHTML = '<p style="color: #999; text-align: center;">ë§¤ì¹˜ íˆìŠ¤í† ë¦¬ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>';
    }
}

// í–¥ìƒëœ ë°ë“œë½ ì•„ì´í…œ ë§¤ì²˜ ì‹œìŠ¤í…œ
class DeadlockItemMatcher {
    constructor() {
        this.itemsCache = null;
        this.initialized = false;
        this.apiUrl = '/api/v1/items';
    }

    async fetchItemStats() {
        if (this.itemsCache) {
            return this.itemsCache;
        }

        try {
            console.log('ğŸ’ ì•„ì´í…œ ì •ë³´ API í˜¸ì¶œ ì¤‘...');
            const response = await fetch(this.apiUrl);
            const data = await response.json();
            
            if (data.success) {
                this.itemsCache = data.data.items;
                this.initialized = true;
                console.log(`âœ… ${data.data.totalItems}ê°œ ì•„ì´í…œ ì •ë³´ ë¡œë“œ ì™„ë£Œ`);
                return this.itemsCache;
            } else {
                throw new Error(data.error || 'ì•„ì´í…œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
            }
        } catch (error) {
            console.error('âŒ ì•„ì´í…œ ì •ë³´ ë¡œë“œ ì‹¤íŒ¨:', error);
            
            // í´ë°± ë°ì´í„° ì‚¬ìš©
            this.itemsCache = this.getFallbackItems();
            this.initialized = true;
            return this.itemsCache;
        }
    }

    getFallbackItems() {
        return {
            // ë¬´ê¸° ì•„ì´í…œ (Weapon Items)
            715762406: { name: 'í™•ì¥ íƒ„ì°½', cost: 800, tier: 1, image: 'https://assets-bucket.deadlock-api.com/assets-api-res/images/items/weapon/basic_magazine_sm.png', type: 'weapon' },
            1342610602: { name: 'ê³ ë§‰ë ¥ íƒ„í™˜', cost: 800, tier: 1, image: 'https://assets-bucket.deadlock-api.com/assets-api-res/images/items/weapon/high_velocity_mag_sm.png', type: 'weapon' },
            1458044103: { name: 'ê¸°ë³¸ íƒ„ì°½', cost: 800, tier: 1, image: 'https://assets-bucket.deadlock-api.com/assets-api-res/images/items/weapon/basic_magazine_sm.png', type: 'weapon' },
            1835738020: { name: 'ëª¬ìŠ¤í„° íƒ„í™˜', cost: 800, tier: 1, image: 'https://assets-bucket.deadlock-api.com/assets-api-res/images/items/weapon/monster_rounds_sm.png', type: 'weapon' },
            2460791803: { name: 'ê´‘ì „ì‚¬', cost: 1600, tier: 2, image: 'https://assets-bucket.deadlock-api.com/assets-api-res/images/items/weapon/berserker_sm.png', type: 'weapon' },
            3977876567: { name: 'í…ŒìŠ¬ë¼ íƒ„í™˜', cost: 1600, tier: 2, image: 'https://assets-bucket.deadlock-api.com/assets-api-res/images/items/weapon/tesla_bullets_sm.png', type: 'weapon' },
            3731635960: { name: 'ì‹ ë¹„í•œ ì •í™•ë„', cost: 1600, tier: 2, image: 'https://assets-bucket.deadlock-api.com/assets-api-res/images/items/weapon/mystic_shot_sm.png', type: 'weapon' },
            865846625: { name: 'ê±°ëŒ€í•œ íƒ„ì°½', cost: 1600, tier: 2, image: 'https://assets-bucket.deadlock-api.com/assets-api-res/images/items/weapon/titanic_magazine_sm.png', type: 'weapon' },
            1414319208: { name: 'ì‚¬ëƒ¥ê¾¼ì˜ ì˜¤ë¼', cost: 1600, tier: 2, image: 'https://assets-bucket.deadlock-api.com/assets-api-res/images/items/weapon/hunters_aura_sm.png', type: 'weapon' },
            
            // ìƒëª…ë ¥ ì•„ì´í…œ (Vitality Items)
            1537272748: { name: 'ì¶”ê°€ ì²´ë ¥', cost: 800, tier: 1, image: 'https://assets-bucket.deadlock-api.com/vitality/extra_health_sm.jpg', type: 'vitality' },
            3970837787: { name: 'ì •ì‹ ë ¥ ê°‘ì˜·', cost: 800, tier: 1, image: 'https://assets-bucket.deadlock-api.com/vitality/spirit_armor_sm.jpg', type: 'vitality' },
            3791587546: { name: 'ì´ì•Œ ê°‘ì˜·', cost: 800, tier: 1, image: 'https://assets-bucket.deadlock-api.com/vitality/bullet_armor_sm.jpg', type: 'vitality' },
            2863754076: { name: 'ì¶”ê°€ ì¬ìƒ', cost: 800, tier: 1, image: 'https://assets-bucket.deadlock-api.com/vitality/extra_regen_sm.jpg', type: 'vitality' },
            3675059374: { name: 'ì¶”ê°€ ì§€êµ¬ë ¥', cost: 800, tier: 1, image: 'https://assets-bucket.deadlock-api.com/vitality/extra_stamina_sm.jpg', type: 'vitality' },
            2598983158: { name: 'ìŠ¤í”„ë¦°íŠ¸ ë¶€ì¸ ', cost: 800, tier: 1, image: 'https://assets-bucket.deadlock-api.com/vitality/sprint_boots_sm.jpg', type: 'vitality' },
            3730717068: { name: 'ì¹˜ìœ  ì˜ì‹', cost: 800, tier: 1, image: 'https://assets-bucket.deadlock-api.com/vitality/healing_rite_sm.jpg', type: 'vitality' },
            1845966100: { name: 'ì§€ì† ì†ë„', cost: 1600, tier: 2, image: 'https://assets-bucket.deadlock-api.com/vitality/enduring_speed_sm.jpg', type: 'vitality' },
            4033043084: { name: 'ì¹˜ìœ  ì¦ê°•ê¸°', cost: 1600, tier: 2, image: 'https://assets-bucket.deadlock-api.com/vitality/healing_booster_sm.jpg', type: 'vitality' },
            1955841979: { name: 'ê¸ˆì† í”¼ë¶€', cost: 3200, tier: 3, image: 'https://assets-bucket.deadlock-api.com/vitality/metal_skin_sm.jpg', type: 'vitality' },
            339443430: { name: 'ê±°ì‹ ìƒ', cost: 3200, tier: 3, image: 'https://assets-bucket.deadlock-api.com/vitality/colossus_sm.jpg', type: 'vitality' },
            
            // ì •ì‹ ë ¥ ì•„ì´í…œ (Spirit Items)
            2095565695: { name: 'ì¶”ê°€ ì •ì‹ ë ¥', cost: 800, tier: 1, image: 'https://assets-bucket.deadlock-api.com/spirit/extra_spirit_sm.jpg', type: 'spirit' },
            1282141666: { name: 'ì‹ ë¹„í•œ í­ë°œ', cost: 800, tier: 1, image: 'https://assets-bucket.deadlock-api.com/spirit/mystic_burst_sm.jpg', type: 'spirit' },
            3677653320: { name: 'ì •ì‹ ë ¥ íƒ€ê²©', cost: 800, tier: 1, image: 'https://assets-bucket.deadlock-api.com/spirit/spirit_strike_sm.jpg', type: 'spirit' },
            3702319013: { name: 'í•œíŒŒ', cost: 800, tier: 1, image: 'https://assets-bucket.deadlock-api.com/spirit/cold_front_sm.jpg', type: 'spirit' },
            859037655: { name: 'ë¶€íŒ¨', cost: 800, tier: 1, image: 'https://assets-bucket.deadlock-api.com/spirit/decay_sm.jpg', type: 'spirit' },
            3574779418: { name: 'ì£¼ì…ê¸°', cost: 800, tier: 1, image: 'https://assets-bucket.deadlock-api.com/spirit/infuser_sm.jpg', type: 'spirit' },
            1673325555: { name: 'ì •ì‹ ë ¥ í¡í˜ˆ', cost: 800, tier: 1, image: 'https://assets-bucket.deadlock-api.com/spirit/spirit_lifesteal_sm.jpg', type: 'spirit' },
            673001892: { name: 'ì´ë” ë³€í™˜', cost: 1600, tier: 2, image: 'https://assets-bucket.deadlock-api.com/spirit/ethereal_shift_sm.jpg', type: 'spirit' },
            1656913918: { name: 'ìƒê¸‰ ì¿¨ë‹¤ìš´', cost: 1600, tier: 2, image: 'https://assets-bucket.deadlock-api.com/spirit/superior_cooldown_sm.jpg', type: 'spirit' },
            3754524659: { name: 'í–¥ìƒëœ ì¿¨ë‹¤ìš´', cost: 1600, tier: 2, image: 'https://assets-bucket.deadlock-api.com/spirit/improved_cooldown_sm.jpg', type: 'spirit' },
            3812615317: { name: 'ë©”ì•„ë¦¬ íŒŒí¸', cost: 3200, tier: 3, image: 'https://assets-bucket.deadlock-api.com/spirit/echo_shard_sm.jpg', type: 'spirit' },
            1729727717: { name: 'ì‹ ë¹„í•œ ì”í–¥', cost: 3200, tier: 3, image: 'https://assets-bucket.deadlock-api.com/spirit/mystic_reverb_sm.jpg', type: 'spirit' },
            3802996421: { name: 'ë¦¬í”„ë ˆì…”', cost: 3200, tier: 3, image: 'https://assets-bucket.deadlock-api.com/spirit/refresher_sm.jpg', type: 'spirit' }
        };
    }

    getItemById(itemId) {
        if (!this.initialized || !this.itemsCache) {
            console.warn('âš ï¸ ì•„ì´í…œ ë§¤ì²˜ê°€ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤');
            return null;
        }

        const numericId = parseInt(itemId);
        const item = this.itemsCache[numericId];
        
        if (item) {
            return {
                ...item,
                type: item.type || this.getItemTypeByName(item.name),
                id: numericId
            };
        }

        return null;
    }

    getItemTypeByName(itemName) {
        const weaponItems = ['Basic Magazine', 'Close Quarters', 'Berserker', 'Monster Rounds', 'Tesla Bullets', 'Mystic Shot', 'Titanic Magazine', "Hunter's Aura", 'Headshot Booster', 'High-Velocity Mag', 'Hollow Point Ward', 'Rapid Rounds', 'Restorative Shot', 'Soul Shredder Bullets', 'Toxic Bullets'];
        const vitalityItems = ['Extra Health', 'Spirit Armor', 'Bullet Armor', 'Metal Skin', 'Colossus', 'Extra Regen', 'Extra Stamina', 'Sprint Boots', 'Healing Rite'];
        const spiritItems = ['Extra Spirit', 'Mystic Burst', 'Ethereal Shift', 'Echo Shard', 'Superior Cooldown', 'Spirit Strike', 'Cold Front', 'Decay', 'Infuser', 'Spirit Lifesteal'];
        
        if (weaponItems.includes(itemName)) return 'weapon';
        if (vitalityItems.includes(itemName)) return 'vitality';
        if (spiritItems.includes(itemName)) return 'spirit';
        return 'weapon'; // ê¸°ë³¸ê°’
    }

    parseItemName(itemName) {
        if (!itemName) return null;
        
        // Unknown Item (ID) í˜•íƒœ íŒŒì‹±
        const unknownItemMatch = itemName.match(/Unknown Item \((\d+)\)/);
        if (unknownItemMatch) {
            const itemId = parseInt(unknownItemMatch[1]);
            const item = this.getItemById(itemId);
            if (item) {
                console.log(`ğŸ”„ ì•„ì´í…œ ID ë§¤í•‘: ${itemName} â†’ ${item.name}`);
                return item;
            }
        }

        // ì§ì ‘ ì•„ì´í…œ ì´ë¦„ìœ¼ë¡œ ê²€ìƒ‰
        if (this.itemsCache) {
            for (const [id, item] of Object.entries(this.itemsCache)) {
                if (item.name === itemName) {
                    return {
                        ...item,
                        type: item.type || this.getItemTypeByName(item.name),
                        id: parseInt(id)
                    };
                }
            }
        }

        return null;
    }

    getItemData(itemName) {
        const item = this.parseItemName(itemName);
        
        if (item) {
            return {
                name: item.name,
                image: item.image,
                type: item.type,
                cost: item.cost || 0,
                tier: item.tier || 1,
                id: item.id
            };
        }

        // í´ë°± ì²˜ë¦¬
        return {
            name: itemName,
            image: 'https://assets-bucket.deadlock-api.com/assets-api-res/images/items/weapon/basic_magazine_sm.png',
            type: 'unknown',
            cost: 0,
            tier: 1,
            id: null
        };
    }
}

// ì•„ì´í…œ ë§¤ì¹­ ì´ˆê¸°í™” í•¨ìˆ˜
async function initializeItemMatching() {
    try {
        console.log('ğŸ”„ ì•„ì´í…œ ë§¤ì¹­ ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì¤‘...');
        
        // ì „ì—­ ì•„ì´í…œ ë§¤ì²˜ ìƒì„±
        window.itemMatcher = new DeadlockItemMatcher();
        await window.itemMatcher.fetchItemStats();
        
        console.log('âœ… ì•„ì´í…œ ë§¤ì¹­ ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì™„ë£Œ');
        
        // ê¸°ì¡´ ë§¤ì¹˜ ë¦¬ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
        updateExistingMatches();
        
    } catch (error) {
        console.error('âŒ ì•„ì´í…œ ë§¤ì¹­ ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
    }
}

// ê¸°ì¡´ ë§¤ì¹˜ì˜ ì•„ì´í…œ ìŠ¬ë¡¯ ì—…ë°ì´íŠ¸
function updateExistingMatches() {
    try {
        const matchCards = document.querySelectorAll('.match-card');
        console.log(`ğŸ”„ ${matchCards.length}ê°œ ë§¤ì¹˜ ì¹´ë“œì˜ ì•„ì´í…œ ì—…ë°ì´íŠ¸ ì¤‘...`);
        
        matchCards.forEach((matchCard, matchIndex) => {
            const itemsGrid = matchCard.querySelector('.items-grid');
            if (itemsGrid && window.itemMatcher && window.itemMatcher.initialized) {
                // ë¡œë”© ë©”ì‹œì§€ê°€ ìˆëŠ” ê²½ìš° ì•„ì´í…œ ë°ì´í„° ì¬ì²˜ë¦¬
                const loadingMessage = itemsGrid.querySelector('[style*="grid-column: 1/-1"]');
                if (loadingMessage && loadingMessage.textContent.includes('ë¡œë”© ì¤‘')) {
                    console.log(`ğŸ’ ë§¤ì¹˜ ${matchIndex} ì•„ì´í…œ ì¬ì²˜ë¦¬...`);
                    
                    // ì‹¤ì œ ì•„ì´í…œ ë°ì´í„°ê°€ ìˆë‹¤ë©´ ë‹¤ì‹œ ì²˜ë¦¬ (ì´ ë¶€ë¶„ì€ ì‹¤ì œ ë§¤ì¹˜ ë°ì´í„°ì— ë”°ë¼ ì¡°ì • í•„ìš”)
                    // ì—¬ê¸°ì„œëŠ” ì˜ˆì‹œë¡œ ë¹ˆ ìŠ¬ë¡¯ ë©”ì‹œì§€ë¥¼ ì—…ë°ì´íŠ¸
                    itemsGrid.innerHTML = `
                        <div style="grid-column: 1/-1; text-align: center; color: #10B981; font-size: 11px; padding: 8px; border: 1px dashed #10B981; border-radius: 4px;">
                            <i class="fas fa-check-circle"></i> ì•„ì´í…œ ë§¤ì¹­ ì‹œìŠ¤í…œ ì¤€ë¹„ ì™„ë£Œ
                        </div>
                    `;
                }
            }
        });
        
        console.log('âœ… ê¸°ì¡´ ë§¤ì¹˜ ì•„ì´í…œ ì—…ë°ì´íŠ¸ ì™„ë£Œ');
    } catch (error) {
        console.error('âŒ ê¸°ì¡´ ë§¤ì¹˜ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:', error);
    }
}

// ë°ë“œë½ ì•„ì´í…œã…‡ê´€ë¦¬ ì‹œìŠ¤í…œ (í˜¸í™˜ì„±ì„ ìœ„í•´ ìœ ì§€)
class DeadlockItemManager {
    constructor() {
        this.itemCache = new Map();
        this.initialized = false;
        this.fallbackItems = this.initializeFallbackItems();
    }

    initializeFallbackItems() {
        return {
            'weapon': {
                'Basic Magazine': { type: 'weapon', tier: 1, color: '#FF6B35' },
                'Close Quarters': { type: 'weapon', tier: 1, color: '#FF6B35' },
                'Headshot Booster': { type: 'weapon', tier: 1, color: '#FF6B35' },
                'High-Velocity Mag': { type: 'weapon', tier: 1, color: '#FF6B35' },
                'Hollow Point Ward': { type: 'weapon', tier: 1, color: '#FF6B35' },
                'Monster Rounds': { type: 'weapon', tier: 1, color: '#FF6B35' },
                'Rapid Rounds': { type: 'weapon', tier: 1, color: '#FF6B35' },
                'Restorative Shot': { type: 'weapon', tier: 1, color: '#FF6B35' },
                'Soul Shredder Bullets': { type: 'weapon', tier: 1, color: '#FF6B35' },
                'Titanic Magazine': { type: 'weapon', tier: 2, color: '#FF8C42' },
                'Toxic Bullets': { type: 'weapon', tier: 1, color: '#FF6B35' },
                'Active Reload': { type: 'weapon', tier: 2, color: '#FF8C42' },
                'Berserker': { type: 'weapon', tier: 2, color: '#FF8C42' },
                'Burst Fire': { type: 'weapon', tier: 2, color: '#FF8C42' },
                'Escalating Resilience': { type: 'weapon', tier: 2, color: '#FF8C42' },
                'Fleetfoot': { type: 'weapon', tier: 2, color: '#FF8C42' },
                "Hunter's Aura": { type: 'weapon', tier: 2, color: '#FF8C42' },
                'Intensifying Magazine': { type: 'weapon', tier: 2, color: '#FF8C42' },
                'Kinetic Dash': { type: 'weapon', tier: 2, color: '#FF8C42' },
                'Long Range': { type: 'weapon', tier: 2, color: '#FF8C42' },
                'Melee Lifesteal': { type: 'weapon', tier: 2, color: '#FF8C42' },
                'Mystic Shot': { type: 'weapon', tier: 2, color: '#FF8C42' },
                'Point Blank': { type: 'weapon', tier: 2, color: '#FF8C42' },
                'Pristine Emblem': { type: 'weapon', tier: 2, color: '#FF8C42' },
                'Sharpshooter': { type: 'weapon', tier: 2, color: '#FF8C42' },
                'Slowing Bullets': { type: 'weapon', tier: 2, color: '#FF8C42' },
                'Spiritual Overflow': { type: 'weapon', tier: 2, color: '#FF8C42' },
                'Tesla Bullets': { type: 'weapon', tier: 2, color: '#FF8C42' },
                'Warp Stone': { type: 'weapon', tier: 2, color: '#FF8C42' },
                'Alchemical Fire': { type: 'weapon', tier: 3, color: '#FFA500' },
                'Crippling Headshot': { type: 'weapon', tier: 3, color: '#FFA500' },
                'Frenzy': { type: 'weapon', tier: 3, color: '#FFA500' },
                'Glass Cannon': { type: 'weapon', tier: 3, color: '#FFA500' },
                'Heroic Aura': { type: 'weapon', tier: 3, color: '#FFA500' },
                'Inhibitor': { type: 'weapon', tier: 3, color: '#FFA500' },
                'Lucky Shot': { type: 'weapon', tier: 3, color: '#FFA500' },
                'Phantom Strike': { type: 'weapon', tier: 3, color: '#FFA500' },
                'Ricochet': { type: 'weapon', tier: 3, color: '#FFA500' },
                'Shadow Weave': { type: 'weapon', tier: 3, color: '#FFA500' },
                'Silencer': { type: 'weapon', tier: 3, color: '#FFA500' },
                'Vampiric Burst': { type: 'weapon', tier: 3, color: '#FFA500' },
                'Leech': { type: 'weapon', tier: 3, color: '#FFA500' }
            },
            'vitality': {
                'Extra Health': { type: 'vitality', tier: 1, color: '#4CAF50' },
                'Extra Regen': { type: 'vitality', tier: 1, color: '#4CAF50' },
                'Extra Stamina': { type: 'vitality', tier: 1, color: '#4CAF50' },
                'Sprint Boots': { type: 'vitality', tier: 1, color: '#4CAF50' },
                'Healing Rite': { type: 'vitality', tier: 1, color: '#4CAF50' },
                'Bullet Armor': { type: 'vitality', tier: 1, color: '#4CAF50' },
                'Spirit Armor': { type: 'vitality', tier: 1, color: '#4CAF50' },
                "Enchanter's Barrier": { type: 'vitality', tier: 2, color: '#66BB6A' },
                'Enduring Speed': { type: 'vitality', tier: 2, color: '#66BB6A' },
                'Healing Booster': { type: 'vitality', tier: 2, color: '#66BB6A' },
                'Health Nova': { type: 'vitality', tier: 2, color: '#66BB6A' },
                'Majestic Leap': { type: 'vitality', tier: 2, color: '#66BB6A' },
                'Return Fire': { type: 'vitality', tier: 2, color: '#66BB6A' },
                'Restorative Locket': { type: 'vitality', tier: 2, color: '#66BB6A' },
                'Divine Barrier': { type: 'vitality', tier: 2, color: '#66BB6A' },
                'Fortitude': { type: 'vitality', tier: 2, color: '#66BB6A' },
                'Improved Bullet Armor': { type: 'vitality', tier: 2, color: '#66BB6A' },
                'Improved Spirit Armor': { type: 'vitality', tier: 2, color: '#66BB6A' },
                'Lifestrike': { type: 'vitality', tier: 2, color: '#66BB6A' },
                'Metal Skin': { type: 'vitality', tier: 3, color: '#81C784' },
                'Superior Stamina': { type: 'vitality', tier: 2, color: '#66BB6A' },
                'Combat Barrier': { type: 'vitality', tier: 3, color: '#81C784' },
                'Colossus': { type: 'vitality', tier: 3, color: '#81C784' },
                'Soul Rebirth': { type: 'vitality', tier: 3, color: '#81C784' },
                'Unstoppable': { type: 'vitality', tier: 3, color: '#81C784' }
            },
            'spirit': {
                'Extra Spirit': { type: 'spirit', tier: 1, color: '#9C27B0' },
                'Spirit Strike': { type: 'spirit', tier: 1, color: '#9C27B0' },
                'Mystic Burst': { type: 'spirit', tier: 1, color: '#9C27B0' },
                'Cold Front': { type: 'spirit', tier: 1, color: '#9C27B0' },
                'Decay': { type: 'spirit', tier: 1, color: '#9C27B0' },
                'Infuser': { type: 'spirit', tier: 1, color: '#9C27B0' },
                'Spirit Lifesteal': { type: 'spirit', tier: 1, color: '#9C27B0' },
                'Ammo Scavenger': { type: 'spirit', tier: 2, color: '#BA68C8' },
                'Bullet Resist Shredder': { type: 'spirit', tier: 2, color: '#BA68C8' },
                'Ethereal Shift': { type: 'spirit', tier: 2, color: '#BA68C8' },
                'Improved Burst': { type: 'spirit', tier: 2, color: '#BA68C8' },
                'Improved Cooldown': { type: 'spirit', tier: 2, color: '#BA68C8' },
                'Improved Reach': { type: 'spirit', tier: 2, color: '#BA68C8' },
                'Improved Spirit': { type: 'spirit', tier: 2, color: '#BA68C8' },
                'Quicksilver Reload': { type: 'spirit', tier: 2, color: '#BA68C8' },
                'Rapid Recharge': { type: 'spirit', tier: 2, color: '#BA68C8' },
                'Superior Cooldown': { type: 'spirit', tier: 2, color: '#BA68C8' },
                'Superior Duration': { type: 'spirit', tier: 2, color: '#BA68C8' },
                'Torment Pulse': { type: 'spirit', tier: 2, color: '#BA68C8' },
                'Boundless Spirit': { type: 'spirit', tier: 3, color: '#CE93D8' },
                'Curse': { type: 'spirit', tier: 3, color: '#CE93D8' },
                "Diviner's Kevlar": { type: 'spirit', tier: 3, color: '#CE93D8' },
                'Echo Shard': { type: 'spirit', tier: 3, color: '#CE93D8' },
                'Escalating Exposure': { type: 'spirit', tier: 3, color: '#CE93D8' },
                'Frost Grenade': { type: 'spirit', tier: 3, color: '#CE93D8' },
                'Knockdown': { type: 'spirit', tier: 3, color: '#CE93D8' },
                'Magic Carpet': { type: 'spirit', tier: 3, color: '#CE93D8' },
                'Mystic Reverb': { type: 'spirit', tier: 3, color: '#CE93D8' },
                'Refresher': { type: 'spirit', tier: 3, color: '#CE93D8' },
                'Silence Glyph': { type: 'spirit', tier: 3, color: '#CE93D8' },
                'Slowing Hex': { type: 'spirit', tier: 3, color: '#CE93D8' },
                'Surge of Power': { type: 'spirit', tier: 3, color: '#CE93D8' },
                'Withering Whip': { type: 'spirit', tier: 3, color: '#CE93D8' }
            }
        };
    }

    getItemNameById(itemId) {
        const itemMap = {
            715762406: 'Basic Magazine',
            1342610602: 'Close Quarters',
            1458044103: 'Basic Magazine',
            1537272748: 'Extra Health',
            1656913918: 'Superior Cooldown',
            1835738020: 'Monster Rounds',
            2460791803: 'Berserker',
            2095565695: 'Extra Spirit',
            1282141666: 'Mystic Burst',
            1955841979: 'Metal Skin',
            339443430: 'Colossus',
            673001892: 'Ethereal Shift',
            3812615317: 'Echo Shard',
            3731635960: 'Mystic Shot',
            865846625: 'Titanic Magazine',
            1414319208: "Hunter's Aura",
            3977876567: 'Tesla Bullets',
            3970837787: 'Spirit Armor',
            3791587546: 'Bullet Armor',
            2712976700: 'Headshot Booster',
            1297326004: 'High-Velocity Mag',
            4247951502: 'Hollow Point Ward',
            2464663797: 'Rapid Rounds',
            2789634532: 'Restorative Shot',
            2829779411: 'Soul Shredder Bullets',
            2502493491: 'Toxic Bullets',
            2616956618: 'Active Reload',
            3925892505: 'Burst Fire',
            2928055866: 'Escalating Resilience',
            4015163062: 'Fleetfoot',
            1275334329: 'Intensifying Magazine',
            3423715847: 'Kinetic Dash',
            1831513066: 'Long Range',
            3536999506: 'Melee Lifesteal',
            2699888085: 'Point Blank',
            3606745462: 'Pristine Emblem',
            3508439251: 'Sharpshooter',
            3600633316: 'Slowing Bullets',
            3635659736: 'Spiritual Overflow',
            2693100866: 'Warp Stone',
            4181896897: 'Alchemical Fire',
            3725728185: 'Crippling Headshot',
            1890169084: 'Frenzy',
            1825436633: 'Glass Cannon',
            3726002346: 'Heroic Aura',
            1549482179: 'Inhibitor',
            2406133962: 'Lucky Shot',
            2547346736: 'Phantom Strike',
            3829306297: 'Ricochet',
            3742624969: 'Shadow Weave',
            3806203616: 'Silencer',
            4245983209: 'Vampiric Burst',
            2462996994: 'Leech',
            2863754076: 'Extra Regen',
            3675059374: 'Extra Stamina',
            2598983158: 'Sprint Boots',
            3730717068: 'Healing Rite',
            2712654494: "Enchanter's Barrier",
            1845966100: 'Enduring Speed',
            4033043084: 'Healing Booster',
            3965969966: 'Health Nova',
            2549827618: 'Majestic Leap',
            3738768485: 'Return Fire',
            4194838994: 'Restorative Locket',
            3986173616: 'Divine Barrier',
            1774871043: 'Fortitude',
            3537157157: 'Improved Bullet Armor',
            3732493568: 'Improved Spirit Armor',
            1751689003: 'Lifestrike',
            1829488953: 'Superior Stamina',
            3534253000: 'Combat Barrier',
            3984996802: 'Soul Rebirth',
            1743913723: 'Unstoppable',
            3677653320: 'Spirit Strike',
            3702319013: 'Cold Front',
            859037655: 'Decay',
            3574779418: 'Infuser',
            1673325555: 'Spirit Lifesteal',
            3655967536: 'Ammo Scavenger',
            2978949851: 'Bullet Resist Shredder',
            3704089726: 'Improved Burst',
            3754524659: 'Improved Cooldown',
            2944647108: 'Improved Reach',
            3792327923: 'Improved Spirit',
            4226924901: 'Quicksilver Reload',
            3984263060: 'Rapid Recharge',
            1723652463: 'Superior Duration',
            3991092218: 'Torment Pulse',
            1833936772: 'Boundless Spirit',
            1845815269: 'Curse',
            3701569419: "Diviner's Kevlar",
            2978738440: 'Escalating Exposure',
            3785419690: 'Frost Grenade',
            1743013306: 'Knockdown',
            3984079998: 'Magic Carpet',
            1729727717: 'Mystic Reverb',
            3802996421: 'Refresher',
            1722829208: 'Silence Glyph',
            3742779730: 'Slowing Hex',
            3706103885: 'Surge of Power',
            2995023008: 'Withering Whip'
        };
        return itemMap[itemId] || `Unknown Item (${itemId})`;
    }

    getItemData(itemName) {
        if (this.itemCache.has(itemName)) {
            return this.itemCache.get(itemName);
        }

        // Unknown Item (ID) í˜•íƒœ ì²˜ë¦¬
        let actualItemName = itemName;
        if (itemName && itemName.startsWith('Unknown Item (') && itemName.endsWith(')')) {
            const itemId = itemName.match(/Unknown Item \((\d+)\)/)?.[1];
            if (itemId) {
                actualItemName = this.getItemNameById(parseInt(itemId));
                console.log(`ğŸ”„ ì•„ì´í…œ ID ë§¤í•‘: ${itemName} â†’ ${actualItemName}`);
            }
        }

        // Fallback ë°ì´í„°ì—ì„œ ê²€ìƒ‰
        for (const category of Object.values(this.fallbackItems)) {
            if (category[actualItemName]) {
                const itemData = {
                    name: actualItemName,
                    ...category[actualItemName],
                    image: this.getItemImageUrl(actualItemName)
                };
                this.itemCache.set(itemName, itemData);
                return itemData;
            }
        }

        // Unknown Item ì²˜ë¦¬
        const unknownItem = {
            name: actualItemName,
            type: 'unknown',
            tier: 1,
            color: '#666666',
            image: this.getItemImageUrl('Basic Magazine')
        };
        this.itemCache.set(itemName, unknownItem);
        return unknownItem;
    }

    getItemImageUrl(itemName) {
        // ìƒˆë¡œìš´ Final Items ë¡œì§ì„ ì‚¬ìš©í•˜ë„ë¡ ë¦¬ë‹¤ì´ë ‰íŠ¸
        return window.getDeadlockApiItemUrl ? window.getDeadlockApiItemUrl(itemName) : `https://assets-bucket.deadlock-api.com/assets-api-res/images/items/weapon/basic_magazine_sm.png`;
    }
}

// í´ë°± ì•„ì´í…œ ë§¤í•‘ í•¨ìˆ˜ë“¤
function getKoreanItemName(itemId) {
    const itemMap = {
        // ë¬´ê¸° ì•„ì´í…œ (Weapon Items)
        715762406: 'í™•ì¥ íƒ„ì°½',
        1342610602: 'ê³ ë§ˆë ¥ íƒ„í™˜',
        1458044103: 'ê¸°ë³¸ íƒ„ì°½',
        1835738020: 'ëª¬ìŠ¤í„° íƒ„í™˜',
        2460791803: 'ê´‘ì „ì‚¬',
        3977876567: 'í…ŒìŠ¬ë¼ íƒ„í™˜',
        3731635960: 'ì‹ ë¹„í•œ ì •í™•ë„',
        865846625: 'ê±°ëŒ€í•œ íƒ„ì°½',
        1414319208: 'ì‚¬ëƒ¥ê¾¼ì˜ ì˜¤ë¼',
        
        // ìƒëª…ë ¥ ì•„ì´í…œ (Vitality Items)
        1537272748: 'ì¶”ê°€ ì²´ë ¥',
        3970837787: 'ì •ì‹ ë ¥ ê°‘ì˜·',
        3791587546: 'ì´ì•Œ ê°‘ì˜·',
        2863754076: 'ì¶”ê°€ ì¬ìƒ',
        3675059374: 'ì¶”ê°€ ì§€êµ¬ë ¥',
        2598983158: 'ìŠ¤í”„ë¦°íŠ¸ ë¶€ì¸ ',
        3730717068: 'ì¹˜ìœ  ì˜ì‹',
        1845966100: 'ì§€ì† ì†ë„',
        4033043084: 'ì¹˜ìœ  ì¦ê°•ê¸°',
        1955841979: 'ê¸ˆì† í”¼ë¶€',
        339443430: 'ê±°ì‹ ìƒ',
        
        // ì •ì‹ ë ¥ ì•„ì´í…œ (Spirit Items)
        2095565695: 'ì¶”ê°€ ì •ì‹ ë ¥',
        1282141666: 'ì‹ ë¹„í•œ í­ë°œ',
        3677653320: 'ì •ì‹ ë ¥ íƒ€ê²©',
        3702319013: 'í•œíŒŒ',
        859037655: 'ë¶€íŒ¨',
        3574779418: 'ì£¼ì…ê¸°',
        1673325555: 'ì •ì‹ ë ¥ í¡í˜ˆ',
        673001892: 'ì´ë” ë³€í™˜',
        1656913918: 'ìƒê¸‰ ì¿¨ë‹¤ìš´',
        3754524659: 'í–¥ìƒëœ ì¿¨ë‹¤ìš´',
        3812615317: 'ë©”ì•„ë¦¬ íŒŒí¸',
        1729727717: 'ì‹ ë¹„í•œ ì”í–¥',
        3802996421: 'ë¦¬í”„ë ˆì…”'
    };
    return itemMap[itemId] || `Unknown Item (${itemId})`;
}

function getItemImageUrl(itemName) {
    // ì•„ì´í…œ í˜ì´ì§€ì™€ ë™ì¼í•œ ë§¤í•‘ ì‚¬ìš© - í•œêµ­ì–´ + ì˜ì–´ ëª¨ë‘ ì§€ì›
    const imageMap = {
        // ë¬´ê¸° ì•„ì´í…œ (í•œêµ­ì–´)
        'ê¸°ë³¸ íƒ„ì°½': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/basic_magazine_sm.webp',
        'í—¤ë“œìƒ· ë¶€ìŠ¤í„°': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/headshot_booster_sm.webp',
        'ê³ ì†íƒ„': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/high_velocity_rounds_sm.webp',
        'ëª¬ìŠ¤í„° íƒ„í™˜': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/monster_rounds_sm.webp',
        'ê³ ì† ì‚¬ê²©': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/rapid_rounds_sm.webp',
        'íšŒë³µ ì‚¬ê²©': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/restorative_shot_sm.webp',
        'ëŠ¥ë™ ì¬ì¥ì „': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/active_reload_sm.webp',
        'ë°±ìŠ¤íƒœë²„': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/backstabber_sm.webp',
        'ì‹ ì†í•œ ë°œ': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/fleetfoot_sm.webp',
        'ê°•í™” íƒ„ì°½': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/intensifying_magazine_sm.webp',
        'ì—­ë™ì  ëŒì§„': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/kinetic_dash_sm.webp',
        'ì¥ê±°ë¦¬': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/long_range_sm.webp',
        'ê·¼ì ‘ ëŒê²©': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/melee_charge_sm.webp',
        'ì‹ ë¹„í•œ ì‚¬ê²©': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/mystic_shot_sm.webp',
        'ì˜¤í”„ë‹ ë¼ìš´ë“œ': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/opening_rounds_sm.webp',
        'ë‘”í™” íƒ„í™˜': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/slowing_bullets_sm.webp',
        'ì •ì‹  íŒŒì‡„íƒ„': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/spirit_shredder_bullets_sm.webp',
        'ë¶„ì‚° ì‚¬ê²©': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/split_shot_sm.webp',
        'ì‹ ì†í•œ íƒ€ê²©ì': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/swift_striker_sm.webp',
        'ê±°ëŒ€í•œ íƒ„ì°½': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/titanic_magazine_sm.webp',
        'ì•½í™” í—¤ë“œìƒ·': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/weakening_headshot_sm.webp',
        'ì—°ê¸ˆìˆ  í™”ì—¼': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/alchemical_fire_sm.webp',
        'ê´‘ì „ì‚¬': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/berserker_sm.webp',
        'í”¼ì˜ ê³µë¬¼': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/blood_tribute_sm.webp',
        'ì ì‚¬': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/burst_fire_sm.webp',
        'ì»¬í‹°ìŠ¤íŠ¸ í¬ìƒ': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/cultist_sacrifice_sm.webp',
        'í™•ëŒ€ë˜ëŠ” ì €í•­': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/escalating_resilience_sm.webp',
        'ê³ ì† ì‚¬ê²©': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/express_shot_sm.webp',
        'í—¤ë“œí—Œí„°': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/headhunter_sm.webp',
        'ì˜ì›…ì˜ ì˜¤ë¼': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/heroic_aura_sm.webp',
        'í• ë¡œìš° í¬ì¸íŠ¸': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/hollow_point_sm.webp',
        'ì‚¬ëƒ¥ê¾¼ì˜ ì˜¤ë¼': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/hunters_aura_sm.webp',
        'ê·¼ê±°ë¦¬ ì‚¬ê²©': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/point_blank_sm.webp',
        'ëª…ì‚¬ìˆ˜': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/sharp_shooter_sm.webp',
        'ì£¼ë¬¸ìˆ ì‚¬ í—¤ë“œìƒ·': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/spellslinger_headshots_sm.webp',
        'í…ŒìŠ¬ë¼ íƒ„í™˜': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/tesla_bullets_sm.webp',
        'ë…ì„± íƒ„í™˜': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/toxic_bullets_sm.webp',
        'ë¬´ê±°ìš´ ì‚¬ê²©': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/weighted_shots_sm.webp',
        'ë°©ì–´ ê´€í†µíƒ„': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/armor_piercing_rounds_sm.webp',
        'ì¶•ì „ê¸°': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/capacitor_sm.webp',
        'ì¹˜ëª…ì  í—¤ë“œìƒ·': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/crippling_headshot_sm.webp',
        'ë¶„ì‡„í•˜ëŠ” ì£¼ë¨¹': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/crushing_fists_sm.webp',
        'ê´‘ë€': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/frenzy_sm.webp',
        'ìœ ë¦¬ ëŒ€í¬': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/glass_cannon_sm.webp',
        'í–‰ìš´ì˜ ì‚¬ê²©': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/lucky_shot_sm.webp',
        'ë„íƒ„': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/ricochet_sm.webp',
        'ê·¸ë¦¼ì ì§ì¡°': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/shadow_weave_sm.webp',
        'ì†ŒìŒê¸°': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/silencer_sm.webp',
        'ì£¼ë¬¸ìˆ ì‚¬': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/spell_slinger_sm.webp',
        'ì˜ì  ë„˜ì¹¨': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/spiritual_overflow_sm.webp',

        // í™œë ¥ ì•„ì´í…œ (í•œêµ­ì–´)
        'ì¶”ê°€ ì²´ë ¥': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/extra_health_sm.webp',
        'ì¶”ê°€ ì¬ìƒ': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/extra_regen_sm.webp',
        'ì¶”ê°€ ìŠ¤íƒœë¯¸ë‚˜': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/extra_stamina_sm.webp',
        'ì¹˜ìœ  ì˜ì‹': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/healing_rite_sm.webp',
        'ê·¼ì ‘ í¡í˜ˆ': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/melee_lifesteal_sm.webp',
        'ë°˜ë°•': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/rebuttal_sm.webp',
        'ë‹¬ë¦¬ê¸° ë¶€ì¸ ': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/sprint_boots_sm.webp',
        'ì „íˆ¬ ì¡°ë¼': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/battle_vest_sm.webp',
        'íƒ„í™˜ í¡í˜ˆ': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/bullet_lifesteal_sm.webp',
        'ë””ë²„í”„ ê°ì†Œê¸°': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/debuff_reducer_sm.webp',
        'ë§ˆë²•ì‚¬ì˜ ë¬¸ì¥': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/enchanters_emblem_sm.webp',
        'ì§€ì† ì†ë„': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/enduring_speed_sm.webp',
        'ìˆ˜í˜¸ ì™€ë“œ': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/guardian_ward_sm.webp',
        'ì¹˜ìœ  ì°¨ë‹¨': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/healbane_sm.webp',
        'ì¹˜ìœ  ë¶€ìŠ¤í„°': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/healing_booster_sm.webp',
        'ë°˜ì‘ ë°©ë²½': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/reactive_barrier_sm.webp',
        'íšŒë³µ ëª©ê±¸ì´': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/restorative_locket_sm.webp',
        'ë°˜ê²©': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/return_fire_sm.webp',
        'ì •ì‹  í¡í˜ˆ': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/spirit_lifesteal_sm.webp',
        'ì •ì‹  ë³´í˜¸ë§‰': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/spirit_shielding_sm.webp',
        'ë¬´ê¸° ë³´í˜¸ë§‰': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/weapon_shielding_sm.webp',
        'íƒ„í™˜ ì €í•­': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/bullet_resilience_sm.webp',
        'ì£¼ë¬¸ ì°¨ë‹¨': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/counterspell_sm.webp',
        'ë””ë²„í”„ ì œê±°': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/debuff_remover_sm.webp',
        'ë¶ˆêµ´': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/fortitude_sm.webp',
        'ë¶„ë…¸ í™©í™€': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/fury_trance_sm.webp',
        'ì¹˜ìœ  ë…¸ë°”': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/healing_nova_sm.webp',
        'ìƒëª…ë ¥ ê°•íƒ€': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/lifestrike_sm.webp',
        'ì¥ì—„í•œ ë„ì•½': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/majestic_leap_sm.webp',
        'ê¸ˆì† í”¼ë¶€': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/metal_skin_sm.webp',
        'êµ¬ì¡° ê´‘ì„ ': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/rescue_beam_sm.webp',
        'ì •ì‹  ì €í•­': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/spirit_resilience_sm.webp',
        'ìŠ¤íƒœë¯¸ë‚˜ ìˆ™ë ¨': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/stamina_mastery_sm.webp',
        'íŠ¸ë¡œí”¼ ìˆ˜ì§‘ê°€': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/trophy_collector_sm.webp',
        'ë² ì¼ ì›Œì»¤': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/veil_walker_sm.webp',
        'ì›Œí”„ ìŠ¤í†¤': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/warp_stone_sm.webp',
        'ì£½ìŒ ì†ì´ê¸°': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/cheat_death_sm.webp',
        'ê±°ì‹ ': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/colossus_sm.webp',
        'ì‹ ì„±í•œ ë°©ë²½': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/divine_barrier_sm.webp',
        'ì ìˆ ì‚¬ì˜ ì¼€ë¸”ë¼': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/diviners_kevlar_sm.webp',
        'ì¹˜ìœ  í…œí¬': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/healing_tempo_sm.webp',
        'ì£¼ì…ê¸°': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/infuser_sm.webp',
        'ì–µì œì œ': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/inhibitor_sm.webp',
        'ì €ê±°ë„ˆíŠ¸': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/juggernaut_sm.webp',
        'ê±°ë¨¸ë¦¬': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/leech_sm.webp',
        'íŒ¬í…€ ìŠ¤íŠ¸ë¼ì´í¬': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/phantom_strike_sm.webp',
        'ì¥ê°‘ ê°‘ì˜·': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/plated_armor_sm.webp',
        'í¡ìˆ˜ íƒ„í™˜': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/siphon_bullets_sm.webp',
        'ì£¼ë¬¸ ì°¨ë‹¨ê¸°': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/spellbreaker_sm.webp',
        'ì €ì§€ë¶ˆê°€': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/unstoppable_sm.webp',
        'í¡í˜ˆ í­ë°œ': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/vampiric_burst_sm.webp',
        'ë§ˆë…€ ê°‘ì˜·': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/witchmail_sm.webp',

        // ì •ì‹  ì•„ì´í…œ (í•œêµ­ì–´)
        'ì¶”ê°€ ì¶©ì „': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/extra_charge_sm.webp',
        'ì¶”ê°€ ì •ì‹ ë ¥': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/extra_spirit_sm.webp',
        'ì‹ ë¹„í•œ í­ë°œ': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/mystic_burst_sm.webp',
        'ì‹ ë¹„í•œ ì‚¬ê±°ë¦¬': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/mystic_reach_sm.webp',
        'ì‹ ë¹„í•œ ì¬ìƒ': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/mystic_regen_sm.webp',
        'ë…¹ìŠ¨ ì´ì‹ ': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/rusted_barrel_sm.webp',
        'ì •ì‹  ê°•íƒ€': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/spirit_strike_sm.webp',
        'ë¹„ì „ ì‡„ë„': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/arcane_surge_sm.webp',
        'íƒ„í™˜ ì €í•­ íŒŒì‡„ê¸°': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/bullet_resist_shredder_sm.webp',
        'í•œë­ ì „ì„ ': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/cold_front_sm.webp',
        'ê°œì„ ëœ ì¬ì‚¬ìš© ëŒ€ê¸°ì‹œê°„': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/improved_cooldown_sm.webp',
        'ì§€ì†ì‹œê°„ ì—°ì¥ê¸°': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/duration_extender_sm.webp',
        'ê°œì„ ëœ ì •ì‹ ë ¥': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/improved_spirit_sm.webp',
        'ì‹ ë¹„í•œ ë‘”í™”': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/mystic_slow_sm.webp',
        'ì‹ ë¹„í•œ ì·¨ì•½': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/mystic_vulnerability_sm.webp',
        'ì‹ ì† ì¬ì¥ì „': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/quicksilver_reload_sm.webp',
        'ë‘”í™” ì£¼ë¬¸': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/slowing_hex_sm.webp',
        'ì •ì‹  í¡ìˆ˜': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/spirit_sap_sm.webp',
        'ì–µì œê¸°': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/suppressor_sm.webp',
        'ë¶€íŒ¨': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/decay_sm.webp',
        'ë¬´ì¥ í•´ì œ ì£¼ë¬¸': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/disarming_hex_sm.webp',
        'ê±°ëŒ€í•œ í™•ì¥': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/greater_expansion_sm.webp',
        'ë„‰ë‹¤ìš´': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/knockdown_sm.webp',
        'ë¹›ë‚˜ëŠ” ì¬ìƒ': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/radiant_regeneration_sm.webp',
        'ë¹ ë¥¸ ì¶©ì „': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/rapid_recharge_sm.webp',
        'ì¹¨ë¬µ ë¬¸ì–‘': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/silence_glyph_sm.webp',
        'ì •ì‹  ê°•íƒˆ': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/spirit_snatch_sm.webp',
        'ìš°ì›”í•œ ì¬ì‚¬ìš© ëŒ€ê¸°ì‹œê°„': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/superior_cooldown_sm.webp',
        'ìš°ì›”í•œ ì§€ì†ì‹œê°„': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/superior_duration_sm.webp',
        'í˜ì˜ ì‡„ë„': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/surge_of_power_sm.webp',
        'íƒ±í¬ë²„ìŠ¤í„°': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/tankbuster_sm.webp',
        'ê³ í†µ íŒŒë™': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/torment_pulse_sm.webp',
        'ê·¹ì§€ ëŒí’': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/arctic_blast_sm.webp',
        'ë¬´í•œí•œ ì •ì‹ ë ¥': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/boundless_spirit_sm.webp',
        'ì €ì£¼': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/curse_sm.webp',
        'ë©”ì•„ë¦¬ íŒŒí¸': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/echo_shard_sm.webp',
        'í™•ëŒ€ë˜ëŠ” ë…¸ì¶œ': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/escalating_exposure_sm.webp',
        'ì´ë”ë¦¬ì–¼ ì‹œí”„íŠ¸': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/ethereal_shift_sm.webp',
        'ì§‘ì¤‘ ë Œì¦ˆ': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/focus_lens_sm.webp',
        'ë²ˆê°œ ë‘ë£¨ë§ˆë¦¬': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/lightning_scroll_sm.webp',
        'ë§ˆë²• ì¹´í«': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/magic_carpet_sm.webp',
        'ìˆ˜ì€ ëŒ€í˜• ê¶Œì´': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/mercurial_magnum_sm.webp',
        'ì‹ ë¹„í•œ ì”í–¥': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/mystic_reverb_sm.webp',
        'ë¦¬í”„ë ˆì…”': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/refresher_sm.webp',
        'ì¬ì•™': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/scourge_sm.webp',
        'ì •ì‹  ì—°ì†Œ': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/spirit_burn_sm.webp',
        'ì´ˆì›”ì  ì¬ì‚¬ìš© ëŒ€ê¸°ì‹œê°„': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/transcendent_cooldown_sm.webp',
        'ì†Œìš©ëŒì´ ê±°ë¯¸ì¤„': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/vortex_web_sm.webp',

        // ì˜ì–´ ì´ë¦„ ì§€ì› (ê²Œì„ APIì—ì„œ ì˜ì–´ë¡œ ì˜¬ ê²½ìš°)
        'Basic Magazine': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/basic_magazine_sm.webp',
        'Headshot Booster': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/headshot_booster_sm.webp',
        'High-Velocity Rounds': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/high_velocity_rounds_sm.webp',
        'Monster Rounds': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/monster_rounds_sm.webp',
        'Rapid Rounds': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/rapid_rounds_sm.webp',
        'Restorative Shot': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/restorative_shot_sm.webp',
        'Active Reload': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/active_reload_sm.webp',
        'Backstabber': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/backstabber_sm.webp',
        'Fleetfoot': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/fleetfoot_sm.webp',
        'Berserker': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/berserker_sm.webp',
        'Tesla Bullets': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/tesla_bullets_sm.webp',
        'Mystic Shot': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/mystic_shot_sm.webp',
        'Titanic Magazine': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/titanic_magazine_sm.webp',
        'Hunter\'s Aura': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/hunters_aura_sm.webp',
        'Glass Cannon': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/glass_cannon_sm.webp',
        'Extra Health': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/extra_health_sm.webp',
        'Extra Regen': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/extra_regen_sm.webp',
        'Extra Stamina': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/extra_stamina_sm.webp',
        'Sprint Boots': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/sprint_boots_sm.webp',
        'Healing Rite': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/healing_rite_sm.webp',
        'Enduring Speed': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/enduring_speed_sm.webp',
        'Metal Skin': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/metal_skin_sm.webp',
        'Colossus': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/colossus_sm.webp',
        'Extra Spirit': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/extra_spirit_sm.webp',
        'Mystic Burst': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/mystic_burst_sm.webp',
        'Spirit Strike': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/spirit_strike_sm.webp',
        'Cold Front': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/cold_front_sm.webp',
        'Decay': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/decay_sm.webp',
        'Infuser': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/infuser_sm.webp',
        'Superior Cooldown': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/superior_cooldown_sm.webp',
        'Improved Cooldown': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/improved_cooldown_sm.webp',
        'Echo Shard': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/echo_shard_sm.webp',
        'Mystic Reverb': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/mystic_reverb_sm.webp',
        'Refresher': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/refresher_sm.webp',
        'Healing Booster': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/healing_booster_sm.webp',
        'Melee Lifesteal': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/melee_lifesteal_sm.webp',
        'Improved Reach': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/improved_reach_sm.webp'
    };
    
    // ì •í™•í•œ ë§¤ì¹­ ë¨¼ì € ì‹œë„
    if (imageMap[itemName]) {
        return imageMap[itemName];
    }
    
    // ë¶€ë¶„ ë§¤ì¹­ ì‹œë„ (Unknown Item (ID) ì¼€ì´ìŠ¤)
    const unknownItemMatch = itemName.match(/Unknown Item \((\d+)\)/);
    if (unknownItemMatch) {
        // ID ê¸°ë°˜ìœ¼ë¡œ ì•„ì´í…œ ë§¤í•‘ ì‹œë„
        const itemId = parseInt(unknownItemMatch[1]);
        console.log(`ğŸ” Unknown Item ID: ${itemId} - ì•„ì´í…œ ID ê¸°ë°˜ ë§¤í•‘ ì‹œë„...`);
        
        // ì•„ì´í…œ IDì™€ ì˜ì–´ ì´ë¦„ ë§¤í•‘ (imageMapê³¼ ì¼ì¹˜í•˜ë„ë¡ ì˜ì–´ëª… ì‚¬ìš©)
        const itemIdToName = {
            // ë¬´ê¸° ì•„ì´í…œ (Weapon Items)
            715762406: 'Basic Magazine',
            1342610602: 'Close Quarters',
            1437614329: 'Headshot Booster',
            4072270083: 'High-Velocity Mag',
            2220233739: 'Hollow Point Ward',
            1009965641: 'Monster Rounds',
            4147641675: 'Rapid Rounds',
            499683006: 'Restorative Shot',
            1842576017: 'Active Reload',
            393974127: 'Berserker',
            2981692841: 'Escalating Resilience',
            4139877411: 'Fleetfoot',
            1414319208: "Hunter's Aura",
            509856396: 'Kinetic Dash',
            3633614685: 'Long Range',
            2824119765: 'Melee Lifesteal',
            3731635960: 'Mystic Shot',
            865846625: 'Titanic Magazine',
            3977876567: 'Tesla Bullets',
            690458959: 'Rapid Rounds',
            1250307611: 'Restorative Shot',
            1396247347: 'Monster Rounds',
            
            // í™œë ¥ ì•„ì´í…œ (Vitality Items)
            1537272748: 'Extra Health',
            3970837787: 'Spirit Armor',
            3791587546: 'Bullet Armor',
            2863754076: 'Extra Regen',
            3675059374: 'Extra Stamina',
            2598983158: 'Sprint Boots',
            3730717068: 'Healing Rite',
            1845966100: 'Enduring Speed',
            4033043084: 'Healing Booster',
            1955841979: 'Metal Skin',
            339443430: 'Colossus',
            7409189: 'Healing Booster',
            2463960640: 'Extra Health',
            2061574352: 'Melee Lifesteal',
            2121044373: 'Healing Rite',
            
            // ì •ì‹  ì•„ì´í…œ (Spirit Items)
            2095565695: 'Extra Spirit',
            1282141666: 'Mystic Burst',
            3677653320: 'Spirit Strike',
            3702319013: 'Cold Front',
            859037655: 'Decay',
            3574779418: 'Infuser',
            1673325555: 'Spirit Lifesteal',
            673001892: 'Ethereal Shift',
            1656913918: 'Superior Cooldown',
            3754524659: 'Improved Cooldown',
            3812615317: 'Echo Shard',
            1729727717: 'Mystic Reverb',
            3802996421: 'Refresher',
            3089858203: 'Improved Reach',
            1292979587: 'Mystic Burst',
            2951612397: 'Spirit Lifesteal'
        };
        
        const englishName = itemIdToName[itemId];
        if (englishName && imageMap[englishName]) {
            console.log(`âœ… ID ${itemId} â†’ ${englishName} â†’ ì´ë¯¸ì§€ ë§¤í•‘ ì„±ê³µ`);
            return imageMap[englishName];
        }
    }
    
    // ê¸°ë³¸ í´ë°± ì´ë¯¸ì§€
    return 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/basic_magazine_sm.webp';
}

function getItemType(itemId) {
    const weaponItems = [715762406, 1342610602, 1458044103, 1835738020, 2460791803, 3977876567, 3731635960, 865846625, 1414319208];
    const vitalityItems = [1537272748, 3970837787, 3791587546, 2863754076, 3675059374, 2598983158, 3730717068, 1845966100, 4033043084, 1955841979, 339443430];
    const spiritItems = [2095565695, 1282141666, 3677653320, 3702319013, 859037655, 3574779418, 1673325555, 673001892, 1656913918, 3754524659, 3812615317, 1729727717, 3802996421];
    
    if (weaponItems.includes(itemId)) return 'weapon';
    if (vitalityItems.includes(itemId)) return 'vitality';
    if (spiritItems.includes(itemId)) return 'spirit';
    return 'weapon';
}

function getItemCost(itemId) {
    const costs = {
        // Tier 1 - 800 ì†Œìš¸
        715762406: 800, 1342610602: 800, 1458044103: 800, 1835738020: 800,
        1537272748: 800, 3970837787: 800, 3791587546: 800, 2863754076: 800, 3675059374: 800, 2598983158: 800, 3730717068: 800,
        2095565695: 800, 1282141666: 800, 3677653320: 800, 3702319013: 800, 859037655: 800, 3574779418: 800, 1673325555: 800,
        
        // Tier 2 - 1600 ì†Œìš¸
        2460791803: 1600, 3977876567: 1600, 3731635960: 1600, 865846625: 1600, 1414319208: 1600,
        1845966100: 1600, 4033043084: 1600,
        673001892: 1600, 1656913918: 1600, 3754524659: 1600,
        
        // Tier 3 - 3200 ì†Œìš¸
        1955841979: 3200, 339443430: 3200,
        3812615317: 3200, 1729727717: 3200, 3802996421: 3200
    };
    return costs[itemId] || 0;
}

function getItemTier(itemId) {
    const tier1 = [715762406, 1342610602, 1458044103, 1835738020, 1537272748, 3970837787, 3791587546, 2863754076, 3675059374, 2598983158, 3730717068, 2095565695, 1282141666, 3677653320, 3702319013, 859037655, 3574779418, 1673325555];
    const tier2 = [2460791803, 3977876567, 3731635960, 865846625, 1414319208, 1845966100, 4033043084, 673001892, 1656913918, 3754524659];
    const tier3 = [1955841979, 339443430, 3812615317, 1729727717, 3802996421];
    
    if (tier1.includes(itemId)) return 1;
    if (tier2.includes(itemId)) return 2;
    if (tier3.includes(itemId)) return 3;
    return 1;
}

// ë§¤ì¹˜ íˆìŠ¤í† ë¦¬ í‘œì‹œ - deadlock-api.com ìŠ¤íƒ€ì¼
function displayMatchHistory(matches) {
    const matchesList = document.getElementById('matches-list');
    
    console.log('ğŸ”„ deadlock-api.com ìŠ¤íƒ€ì¼ ë§¤ì¹˜ í‘œì‹œ ì‹œì‘:', matches.length, 'ê°œ');
    
    try {
        if (!Array.isArray(matches) || matches.length === 0) {
            matchesList.innerHTML = '<p style="color: #94a3b8; text-align: center;">ìµœê·¼ ë§¤ì¹˜ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
            return;
        }
        
        // Player_ìˆ«ì í˜•íƒœì—ì„œ ì‹¤ì œ í”Œë ˆì´ì–´ ì´ë¦„ì„ ì°¾ëŠ” í•¨ìˆ˜
        const getPlayerDisplayName = async (player) => {
            let displayName = player.name || player.player_name || player.steam_name || player.hero || 'Player';
            
            // Player_ìˆ«ì íŒ¨í„´ ê°ì§€ (ì˜ˆ: Player_92418199)
            const playerIdMatch = displayName.match(/^Player_(\d+)$/);
            if (playerIdMatch) {
                const playerId = playerIdMatch[1];
                console.log(`ğŸ” Player_${playerId} íŒ¨í„´ ê°ì§€, ì‹¤ì œ í”Œë ˆì´ì–´ ì •ë³´ API í˜¸ì¶œ ì¤‘...`);
                
                try {
                    // ì‹¤ì œ í”Œë ˆì´ì–´ ì •ë³´ë¥¼ APIì—ì„œ ê°€ì ¸ì˜¤ê¸°
                    const response = await fetch(`/api/v1/players/${playerId}`);
                    if (response.ok) {
                        const playerData = await response.json();
                        const realName = playerData.name || playerData.player_name || playerData.steam_name;
                        if (realName && realName !== 'undefined' && realName !== playerId) {
                            console.log(`âœ… Player_${playerId} â†’ ì‹¤ì œ ì´ë¦„: ${realName}`);
                            return realName;
                        }
                    }
                } catch (error) {
                    console.error(`âŒ Player_${playerId} ì •ë³´ ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:`, error);
                }
                
                // API í˜¸ì¶œì´ ì‹¤íŒ¨í•˜ë©´ í”Œë ˆì´ì–´ IDë§Œ í‘œì‹œ
                return `Player #${playerId}`;
            }
            
            // ì¼ë°˜ì ì¸ ê²½ìš°
            return displayName === 'undefined' || !displayName ? player.hero || 'Player' : displayName;
        };

        const getHeroImage = (heroName) => {
            const heroImageMap = {
                'Abrams': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/bull_mm.webp',
                'Bebop': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/bebop_mm.webp',
                'Calico': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/nano_mm.webp',
                'Dynamo': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/sumo_mm.webp',
                'Grey Talon': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/archer_mm.webp',
                'Haze': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/haze_mm.webp',
                'Infernus': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/inferno_mm.webp',
                'Ivy': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/tengu_mm.webp',
                'Kelvin': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/kelvin_mm.webp',
                'Mo & Krill': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/digger_mm.webp',
                'Paradox': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/chrono_mm.webp',
                'Pocket': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/synth_mm.webp',
                'Seven': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/gigawatt_mm.webp',
                'Viper': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/viper_mm.webp',
                'Vyper': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/viper_mm.webp',
                'Lady Geist': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/lady_geist_mm.webp',
                'Lash': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/lash_mm.webp',
                'McGinnis': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/mcginnis_mm.webp',
                'Mo & Krill': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/digger_mm.webp',
                'Paradox': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/chrono_mm.webp',
                'Pocket': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/synth_mm.webp',
                'Seven': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/gigawatt_mm.webp',
                'Shiv': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/shiv_mm.webp',
                'Viper': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/viper_mm.webp',
                'Viscous': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/viscous_mm.webp',
                'Warden': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/warden_mm.webp',
                'Vyper': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/viper_mm.webp',
                'Holliday': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/astro_mm.webp',
                'Mirage': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/mirage_mm.webp',
                'Wraith': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/wraith_mm.webp',
                'Yamato': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/yamato_mm.webp',
                'Sinclair': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/sinclair_mm.webp',
                'Vindicta': 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/vindicta_mm.webp'
            };
            return heroImageMap[heroName] || 'https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/abrams_mm.webp';
        };
        
        const formatDate = (dateString) => {
            try {
                const date = new Date(dateString);
                if (isNaN(date.getTime())) return 'ì•Œ ìˆ˜ ì—†ìŒ';
                
                const now = new Date();
                const diffHours = Math.floor((now - date) / (1000 * 60 * 60));
                
                if (diffHours < 1) return 'ë°©ê¸ˆ ì „';
                if (diffHours < 24) return `${diffHours}ì‹œê°„ ì „`;
                const diffDays = Math.floor(diffHours / 24);
                if (diffDays < 7) return `${diffDays}ì¼ ì „`;
                return date.toLocaleDateString('ko-KR');
            } catch (error) {
                return 'ì•Œ ìˆ˜ ì—†ìŒ';
            }
        };
        
        // ì •í™•í•œ ì•„ì´í…œ ì´ë¯¸ì§€ ë§¤í•‘ í•¨ìˆ˜
        const getItemImage = (itemNameOrId) => {
            // ì‹¤ì œ Deadlock APIì—ì„œ ì‚¬ìš©í•˜ëŠ” ì•„ì´í…œ ë§¤í•‘
            const itemImageMap = {
                // Weapon Items
                'Basic Magazine': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/basic_magazine.webp',
                'Close Quarters': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/close_quarters.webp',
                'Headshot Booster': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/headshot_booster.webp',
                'High-Velocity Mag': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/high_velocity_mag.webp',
                'Hollow Point Ward': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/hollow_point_ward.webp',
                'Monster Rounds': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/monster_rounds.webp',
                'Rapid Rounds': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/rapid_rounds.webp',
                'Restorative Shot': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/restorative_shot.webp',
                'Soul Shredder Bullets': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/soul_shredder_bullets.webp',
                'Titanic Magazine': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/titanic_magazine.webp',
                'Toxic Bullets': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/toxic_bullets.webp',
                'Active Reload': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/active_reload.webp',
                'Berserker': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/berserker.webp',
                'Burst Fire': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/burst_fire.webp',
                'Escalating Resilience': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/escalating_resilience.webp',
                'Fleetfoot': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/fleetfoot.webp',
                'Hunter\'s Aura': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/hunters_aura.webp',
                'Intensifying Magazine': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/intensifying_magazine.webp',
                'Kinetic Dash': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/kinetic_dash.webp',
                'Long Range': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/long_range.webp',
                'Melee Lifesteal': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/melee_lifesteal.webp',
                'Mystic Shot': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/mystic_shot.webp',
                'Point Blank': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/point_blank.webp',
                'Pristine Emblem': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/pristine_emblem.webp',
                'Sharpshooter': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/sharpshooter.webp',
                'Slowing Bullets': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/slowing_bullets.webp',
                'Spiritual Overflow': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/spiritual_overflow.webp',
                'Tesla Bullets': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/tesla_bullets.webp',
                'Warp Stone': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/warp_stone.webp',
                'Alchemical Fire': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/alchemical_fire.webp',
                'Crippling Headshot': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/crippling_headshot.webp',
                'Frenzy': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/frenzy.webp',
                'Glass Cannon': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/glass_cannon.webp',
                'Heroic Aura': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/heroic_aura.webp',
                'Inhibitor': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/inhibitor.webp',
                'Lucky Shot': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/lucky_shot.webp',
                'Phantom Strike': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/phantom_strike.webp',
                'Ricochet': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/ricochet.webp',
                'Shadow Weave': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/shadow_weave.webp',
                'Silencer': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/silencer.webp',
                'Vampiric Burst': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/vampiric_burst.webp',
                'Leech': 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/leech.webp',
                
                // Vitality Items
                'Extra Health': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/extra_health.webp',
                'Extra Regen': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/extra_regen.webp',
                'Extra Stamina': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/extra_stamina.webp',
                'Melee Lifesteal': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/melee_lifesteal.webp',
                'Sprint Boots': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/sprint_boots.webp',
                'Healing Rite': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/healing_rite.webp',
                'Bullet Armor': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/bullet_armor.webp',
                'Spirit Armor': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/spirit_armor.webp',
                'Enchanter\'s Barrier': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/enchanters_barrier.webp',
                'Enduring Speed': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/enduring_speed.webp',
                'Healing Booster': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/healing_booster.webp',
                'Health Nova': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/health_nova.webp',
                'Majestic Leap': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/majestic_leap.webp',
                'Return Fire': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/return_fire.webp',
                'Restorative Locket': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/restorative_locket.webp',
                'Divine Barrier': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/divine_barrier.webp',
                'Fortitude': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/fortitude.webp',
                'Improved Bullet Armor': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/improved_bullet_armor.webp',
                'Improved Spirit Armor': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/improved_spirit_armor.webp',
                'Lifestrike': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/lifestrike.webp',
                'Metal Skin': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/metal_skin.webp',
                'Superior Stamina': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/superior_stamina.webp',
                'Combat Barrier': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/combat_barrier.webp',
                'Colossus': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/colossus.webp',
                'Leech': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/leech.webp',
                'Soul Rebirth': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/soul_rebirth.webp',
                'Unstoppable': 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/unstoppable.webp',
                
                // Spirit Items
                'Extra Spirit': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/extra_spirit.webp',
                'Spirit Strike': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/spirit_strike.webp',
                'Mystic Burst': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/mystic_burst.webp',
                'Cold Front': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/cold_front.webp',
                'Decay': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/decay.webp',
                'Infuser': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/infuser.webp',
                'Spirit Lifesteal': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/spirit_lifesteal.webp',
                'Ammo Scavenger': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/ammo_scavenger.webp',
                'Bullet Resist Shredder': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/bullet_resist_shredder.webp',
                'Ethereal Shift': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/ethereal_shift.webp',
                'Improved Burst': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/improved_burst.webp',
                'Improved Cooldown': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/improved_cooldown.webp',
                'Improved Reach': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/improved_reach.webp',
                'Improved Spirit': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/improved_spirit.webp',
                'Quicksilver Reload': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/quicksilver_reload.webp',
                'Rapid Recharge': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/rapid_recharge.webp',
                'Spirit Lifesteal': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/spirit_lifesteal.webp',
                'Superior Cooldown': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/superior_cooldown.webp',
                'Superior Duration': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/superior_duration.webp',
                'Torment Pulse': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/torment_pulse.webp',
                'Boundless Spirit': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/boundless_spirit.webp',
                'Curse': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/curse.webp',
                'Diviner\'s Kevlar': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/diviners_kevlar.webp',
                'Echo Shard': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/echo_shard.webp',
                'Escalating Exposure': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/escalating_exposure.webp',
                'Frost Grenade': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/frost_grenade.webp',
                'Knockdown': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/knockdown.webp',
                'Magic Carpet': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/magic_carpet.webp',
                'Mystic Reverb': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/mystic_reverb.webp',
                'Refresher': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/refresher.webp',
                'Silence Glyph': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/silence_glyph.webp',
                'Slowing Hex': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/slowing_hex.webp',
                'Surge of Power': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/surge_of_power.webp',
                'Withering Whip': 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/withering_whip.webp'
            };
            
            // ì•„ì´í…œ ì´ë¦„ìœ¼ë¡œ ë¨¼ì € ì°¾ê¸°
            if (itemImageMap[itemNameOrId]) {
                return itemImageMap[itemNameOrId];
            }
            
            // IDë¡œ ì°¾ê¸° (í•„ìš”í•œ ê²½ìš°)
            // TODO: APIì—ì„œ ì˜¤ëŠ” ì‹¤ì œ ì•„ì´í…œ ID ë§¤í•‘ ì¶”ê°€
            
            // ê¸°ë³¸ ì´ë¯¸ì§€ (ì¹´í…Œê³ ë¦¬ë³„)
            const weaponDefault = 'https://cdn.deadlock.coach/vpk/panorama/images/items/weapon/basic_magazine.webp';
            const vitalityDefault = 'https://cdn.deadlock.coach/vpk/panorama/images/items/vitality/extra_health.webp';
            const spiritDefault = 'https://cdn.deadlock.coach/vpk/panorama/images/items/spirit/extra_spirit.webp';
            
            return weaponDefault; // ê¸°ë³¸ê°’
        };
        
        // ì•„ì´í…œ ì¹´í…Œê³ ë¦¬ ê²°ì • í•¨ìˆ˜
        const getItemCategory = (itemNameOrId) => {
            const weaponItems = [
                'Basic Magazine', 'Close Quarters', 'Headshot Booster', 'High-Velocity Mag', 'Hollow Point Ward',
                'Monster Rounds', 'Rapid Rounds', 'Restorative Shot', 'Soul Shredder Bullets', 'Titanic Magazine',
                'Toxic Bullets', 'Active Reload', 'Berserker', 'Burst Fire', 'Escalating Resilience', 'Fleetfoot',
                'Hunter\'s Aura', 'Intensifying Magazine', 'Kinetic Dash', 'Long Range', 'Melee Lifesteal',
                'Mystic Shot', 'Point Blank', 'Pristine Emblem', 'Sharpshooter', 'Slowing Bullets',
                'Spiritual Overflow', 'Tesla Bullets', 'Warp Stone', 'Alchemical Fire', 'Crippling Headshot',
                'Frenzy', 'Glass Cannon', 'Heroic Aura', 'Inhibitor', 'Lucky Shot', 'Phantom Strike',
                'Ricochet', 'Shadow Weave', 'Silencer', 'Vampiric Burst', 'Leech'
            ];
            
            const vitalityItems = [
                'Extra Health', 'Extra Regen', 'Extra Stamina', 'Melee Lifesteal', 'Sprint Boots', 'Healing Rite',
                'Bullet Armor', 'Spirit Armor', 'Enchanter\'s Barrier', 'Enduring Speed', 'Healing Booster',
                'Health Nova', 'Majestic Leap', 'Return Fire', 'Restorative Locket', 'Divine Barrier',
                'Fortitude', 'Improved Bullet Armor', 'Improved Spirit Armor', 'Lifestrike', 'Metal Skin',
                'Superior Stamina', 'Combat Barrier', 'Colossus', 'Soul Rebirth', 'Unstoppable'
            ];
            
            const spiritItems = [
                'Extra Spirit', 'Spirit Strike', 'Mystic Burst', 'Cold Front', 'Decay', 'Infuser',
                'Spirit Lifesteal', 'Ammo Scavenger', 'Bullet Resist Shredder', 'Ethereal Shift',
                'Improved Burst', 'Improved Cooldown', 'Improved Reach', 'Improved Spirit',
                'Quicksilver Reload', 'Rapid Recharge', 'Superior Cooldown', 'Superior Duration',
                'Torment Pulse', 'Boundless Spirit', 'Curse', 'Diviner\'s Kevlar', 'Echo Shard',
                'Escalating Exposure', 'Frost Grenade', 'Knockdown', 'Magic Carpet', 'Mystic Reverb',
                'Refresher', 'Silence Glyph', 'Slowing Hex', 'Surge of Power', 'Withering Whip'
            ];
            
            if (weaponItems.includes(itemNameOrId)) return 'weapon';
            if (vitalityItems.includes(itemNameOrId)) return 'vitality';
            if (spiritItems.includes(itemNameOrId)) return 'spirit';
            
            return 'weapon'; // ê¸°ë³¸ê°’
        };
        
        // deadlock-api.com ìŠ¤íƒ€ì¼ ë§¤ì¹˜ ì¹´ë“œ ìƒì„±
        const matchCards = matches.map((match, index) => {
            try {
                // ì•ˆì „í•œ ë°ì´í„° ì¶”ì¶œ
                const hero = match?.hero || 'Unknown';
                const result = match?.result || 'ì•Œ ìˆ˜ ì—†ìŒ';
                const isWin = result === 'ìŠ¹ë¦¬';
                const duration = match?.durationFormatted || match?.duration ? `${Math.floor(match.duration / 60)}:${(match.duration % 60).toString().padStart(2, '0')}` : '0:00';
                const kills = parseInt(match?.kills) || 0;
                const deaths = parseInt(match?.deaths) || 0;
                const assists = parseInt(match?.assists) || 0;
                const kda = match?.kda || '0.0';
                const souls = parseInt(match?.souls) || 0;
                const soulsPerMin = match?.soulsPerMin || Math.round(souls / (match?.duration || 1800) * 60);
                const playedAt = match?.playedAt || new Date().toISOString();
                const matchId = match?.matchId || 'Unknown';
                const teamRank = parseInt(match?.teamRank) || 6;
                const denies = parseInt(match?.denies) || 0;
                const netWorth = Math.round(souls / 1000 * 10) / 10; // ì†Œìš¸ì„ ë„¤íŠ¸ì›ŒìŠ¤ë¡œ ë³€í™˜
                
                // ë‚ ì§œ í¬ë§·íŒ… (deadlock-api.com ìŠ¤íƒ€ì¼: 08/10 03:25)
                const dateObj = new Date(playedAt);
                const dateStr = `${(dateObj.getMonth() + 1).toString().padStart(2, '0')}/${dateObj.getDate().toString().padStart(2, '0')} ${dateObj.getHours().toString().padStart(2, '0')}:${dateObj.getMinutes().toString().padStart(2, '0')}`;
                
                // ë­í¬ ì´ë¦„ ë³€í™˜ (íŒ€ ë­í¬ë¥¼ ì‹¤ì œ ë­í¬ë¡œ)
                const getRankName = (rank) => {
                    const rankMap = {
                        1: 'Eternus',
                        2: 'Phantom', 
                        3: 'Oracle',
                        4: 'Ritualist',
                        5: 'Alchemist',
                        6: 'Arcanist',
                        7: 'Seeker',
                        8: 'Initiate'
                    };
                    return rankMap[rank] || 'Arcanist';
                };
                
                const rankName = getRankName(teamRank);
                
                // ë­í¬ ë²ˆí˜¸ ë§¤í•‘ (deadlock-api.com URL êµ¬ì¡°ì— ë§ì¶¤)
                const getRankUrlNumber = (rankName) => {
                    const rankUrlMap = {
                        'Eternus': '1',
                        'Phantom': '1', 
                        'Oracle': '1',
                        'Ritualist': '4',
                        'Alchemist': '3',
                        'Arcanist': '4',
                        'Seeker': '2',
                        'Initiate': '8'
                    };
                    return rankUrlMap[rankName] || '4';
                };
                
                const rankUrlNumber = getRankUrlNumber(rankName);
                
                return `
                    <div class="deadlock-match-card">
                        <div class="deadlock-match-header">
                            <div class="match-outcome-info">
                                <span class="match-result-text ${isWin ? 'win' : 'loss'}">${isWin ? 'Win' : 'Loss'}</span>
                                <span class="match-type">Normal</span>
                                <span class="match-date">${dateStr}</span>
                            </div>
                            <div class="match-id-info">
                                <span class="match-id-label">Match ID: ${matchId}</span>
                                <span class="match-duration">${duration}</span>
                            </div>
                        </div>
                        
                        <div class="match-body">
                            <!-- ìƒˆë¡œìš´ ë ˆì´ì•„ì›ƒ: ê°œì¸ ìŠ¤íƒ¯ ì™¼ìª½, íŒ€ ì •ë³´ ì˜¤ë¥¸ìª½ -->
                            <div class="match-content-grid">
                                <!-- ì™¼ìª½: ê°œì¸ ìŠ¤íƒ¯ ì˜ì—­ -->
                                <div class="match-personal-stats">
                                    <div class="hero-rank-section">
                                        <div class="hero-info-compact">
                                            <img src="${getHeroImage(hero)}" alt="${hero}" class="hero-avatar">
                                            <span class="hero-name-compact">${hero}</span>
                                        </div>
                                        <div class="rank-badge-compact">
                                            <img src="https://assets-bucket.deadlock-api.com/assets-api-res/images/ranks/rank${rankUrlNumber}/badge_sm_subrank${teamRank}.png" 
                                                 alt="${rankName}" 
                                                 class="rank-icon"
                                                 title="${rankName} ${teamRank}"
                                                 onerror="this.style.display='none';">
                                        </div>
                                    </div>
                                    
                                    <div class="personal-stats-grid">
                                        <div class="kda-display">
                                            <div class="kda-labels" style="font-size: 10px; color: #94A3B8; margin-bottom: 2px;">KILL / DEATH / ASSIST</div>
                                            <div class="kda-numbers-large">${kills} / ${deaths} / ${assists}</div>
                                            <div class="kda-ratio-text">${kda} KDA</div>
                                        </div>
                                        
                                        <div class="performance-display">
                                            <div class="stat-row">
                                                <span class="stat-label">SPM</span>
                                                <span class="stat-value">${soulsPerMin}</span>
                                            </div>
                                            <div class="stat-row">
                                                <span class="stat-label">Net Worth</span>
                                                <span class="stat-value">${netWorth}K</span>
                                            </div>
                                            <div class="stat-row">
                                                <span class="stat-label">Denies</span>
                                                <span class="stat-value">${denies}</span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- ì•„ì´í…œ ì˜ì—­ë„ ê°œì¸ ìŠ¤íƒ¯ì— í¬í•¨ -->
                                    <div class="match-items-compact">
                                        <div class="items-label">Final Items</div>
                                        <div class="items-row" id="match-items-${index}">
                                            <!-- ì•„ì´í…œë“¤ì´ ì—¬ê¸° í‘œì‹œë©ë‹ˆë‹¤ -->
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- ì˜¤ë¥¸ìª½: íŒ€ ì •ë³´ ì˜ì—­ -->
                                <div class="match-teams">
                                    <div class="match-players" id="match-players-${index}">
                                        <!-- í”Œë ˆì´ì–´ ëª©ë¡ì´ ì—¬ê¸° í‘œì‹œë©ë‹ˆë‹¤ -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            } catch (matchError) {
                console.error('ë§¤ì¹˜ ì¹´ë“œ ìƒì„± ì˜¤ë¥˜:', matchError, match);
                return `
                    <div class="match-card">
                        <div class="match-hero">
                            <img src="https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/abrams_mm.webp" alt="Unknown" class="match-hero-image">
                            <span class="match-hero-name">Unknown</span>
                        </div>
                        <div class="match-result">
                            <span class="result-text">ë°ì´í„° ì˜¤ë¥˜</span>
                        </div>
                    </div>
                `;
            }
        });
        
        matchesList.innerHTML = matchCards.join('');
        
        // ë§¤ì¹˜ ì•„ì´í…œ ë°ì´í„°ì™€ í”Œë ˆì´ì–´ ë°ì´í„°ë¥¼ ì¦‰ì‹œ ë¡œë“œí•˜ì—¬ í‘œì‹œ
        for (let index = 0; index < matches.length; index++) {
            const match = matches[index];
            const itemsContainer = document.getElementById(`match-items-${index}`);
            const playersContainer = document.getElementById(`match-players-${index}`);
            
            // í”Œë ˆì´ì–´ ëª©ë¡ í‘œì‹œ (ì‹¤ì œ ë§¤ì¹˜ ë°ì´í„° ì‚¬ìš©)
            if (playersContainer) {
                console.log(`ğŸ® ë§¤ì¹˜ ${index} í”Œë ˆì´ì–´ ë°ì´í„° í™•ì¸:`, match);
                
                // ì‹¤ì œ ë§¤ì¹˜ ë°ì´í„°ì—ì„œ í”Œë ˆì´ì–´ ì •ë³´ ì¶”ì¶œ
                let players = [];
                if (match.participants && match.participants.length > 0) {
                    console.log(`âœ… ë§¤ì¹˜ ${index}: ì‹¤ì œ participants ë°ì´í„° ì‚¬ìš© (${match.participants.length}ëª…)`);
                    players = await Promise.all(match.participants.map(async (p, idx) => ({
                        hero: p.hero || 'Unknown',
                        name: await getPlayerDisplayName(p),
                        team: p.team || (idx < 6 ? 1 : 2), // 0-5ë²ˆì€ íŒ€1, 6-11ë²ˆì€ íŒ€2
                        account_id: p.account_id || p.steam_id
                    })));
                } else {
                    console.log(`âš ï¸ ë§¤ì¹˜ ${index}: participants ë°ì´í„°ê°€ ì—†ì–´ ë¹ˆ ë°°ì—´ ì‚¬ìš©`);
                    players = []; // ë¹ˆ ë°°ì—´ë¡œ ì„¤ì •, ë”ë¯¸ ë°ì´í„° ì‚¬ìš© ì•ˆí•¨
                }
                
                console.log(`ğŸ‘¥ ë§¤ì¹˜ ${index} ì‚¬ìš©í•  í”Œë ˆì´ì–´ ë°ì´í„°:`, players);
                
                const getHeroApiUrl = (heroName) => {
                    const heroMap = {
                        'Infernus': 'infernus',
                        'Yamato': 'yamato',
                        'Holliday': 'holliday',
                        'Haze': 'haze',
                        'Lash': 'lash',
                        'Vindicta': 'vindicta',
                        'Bebop': 'bebop', 
                        'Shiv': 'shiv',
                        'Paradox': 'paradox',
                        'Calico': 'calico',
                        'Ivy': 'ivy',
                        'Abrams': 'abrams',
                        'Mo & Krill': 'mo_and_krill',
                        'McGinnis': 'mcginnis',
                        'Mirage': 'mirage',
                        'Grey Talon': 'grey_talon',
                        'Pocket': 'pocket',
                        'Viper': 'viper',
                        'Vyper': 'viper', // Viperì˜ ëŒ€ì²´ ì² ì
                        'Dynamo': 'dynamo',
                        'Kelvin': 'kelvin',
                        'Lady Geist': 'lady_geist',
                        'Seven': 'seven',
                        'Warden': 'warden',
                        'Wraith': 'wraith',
                        'Viscous': 'viscous',
                        'Sinclair': 'sinclair',
                        'Atlas': 'sinclair',
                        // ìƒˆë¡œìš´ ì˜ì›…ë“¤ ì¶”ê°€
                        'Trapper': 'trapper',
                        'Magician': 'sinclair', 
                        'Fathom': 'fathom',
                        'Wrecker': 'wrecker',
                        'Savage': 'savage',
                        'Forge': 'forge',
                        'Buttercup': 'buttercup',
                        'Cadence': 'cadence',
                        // Playerë‚˜ Unknown ì²˜ë¦¬
                        'Player': 'abrams',
                        'Unknown': 'abrams',
                        'player': 'abrams',
                        'unknown': 'abrams',
                        '': 'abrams',
                        null: 'abrams',
                        undefined: 'abrams',
                        // ëŒ€ì†Œë¬¸ì ë³€í˜•
                        'infernus': 'infernus',
                        'yamato': 'yamato',
                        'holliday': 'holliday',
                        'haze': 'haze',
                        'lash': 'lash',
                        'vindicta': 'vindicta',
                        'bebop': 'bebop',
                        'shiv': 'shiv',
                        'paradox': 'paradox',
                        'calico': 'calico',
                        'ivy': 'ivy',
                        'abrams': 'abrams',
                        'mcginnis': 'mcginnis',
                        'mirage': 'mirage',
                        'pocket': 'pocket',
                        'viper': 'viper',
                        'dynamo': 'dynamo',
                        'kelvin': 'kelvin',
                        'seven': 'seven',
                        'warden': 'warden',
                        'wraith': 'wraith',
                        'viscous': 'viscous'
                    };
                    // ì˜ì›… ì´ë¦„ ì •ê·œí™” ë° fallback ì²˜ë¦¬
                    let normalizedName = '';
                    if (heroName && heroName !== null && heroName !== undefined) {
                        normalizedName = heroName.toString().trim();
                    }
                    
                    // ë¹ˆ ë¬¸ìì—´ì´ë‚˜ "Player"ì¸ ê²½ìš° ì²˜ë¦¬
                    if (!normalizedName || normalizedName === 'Player' || normalizedName === 'Unknown') {
                        normalizedName = 'Player';
                    }
                    
                    const heroKey = heroMap[normalizedName] || heroMap[normalizedName.toLowerCase()] || 'abrams';
                    return `https://assets-bucket.deadlock-api.com/assets-api-res/images/heroes/${heroKey}_mm.webp`;
                };
                
                if (players.length > 0) {
                    // í˜„ì¬ ì‚¬ìš©ì(aski)ì˜ íŒ€ì„ ì°¾ê¸° - account_idë¡œë„ í™•ì¸
                    let currentUserTeam = 1;
                    let currentUserIndex = -1;
                    
                    // aski ì‚¬ìš©ì ì°¾ê¸°
                    for (let i = 0; i < players.length; i++) {
                        const p = players[i];
                        if (p.name === 'aski' || 
                            p.account_id === 54776284 || 
                            p.account_id === '54776284' ||
                            (p.name && p.name.includes('54776284'))) {
                            currentUserIndex = i;
                            currentUserTeam = p.team;
                            break;
                        }
                    }
                    
                    // íŒ€ ë¶„ë¦¬
                    let myTeam = [];
                    let enemyTeam = [];
                    
                    // ì‚¬ìš©ìë¥¼ ëª»ì°¾ìœ¼ë©´ ì¸ë±ìŠ¤ ê¸°ë°˜ìœ¼ë¡œ íŒ€ êµ¬ë¶„ (ê°•ì œë¡œ 6:6 ë¶„ë¦¬)
                    if (currentUserIndex === -1) {
                        console.log('âš ï¸ í˜„ì¬ ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ, ê°•ì œë¡œ 6:6 ë¶„ë¦¬');
                        myTeam = players.slice(0, 6);  // ì²« 6ëª…
                        enemyTeam = players.slice(6, 12); // ë‚˜ë¨¸ì§€ 6ëª…
                    } else {
                        // ì‚¬ìš©ìë¥¼ ì°¾ì•˜ìœ¼ë©´ íŒ€ ê¸°ë°˜ìœ¼ë¡œ ë¶„ë¦¬
                        myTeam = players.filter(p => p.team === currentUserTeam);
                        enemyTeam = players.filter(p => p.team !== currentUserTeam);
                        
                        // ë§Œì•½ íŒ€ ë¶„ë¦¬ê°€ ì´ìƒí•˜ë©´ (í•œ íŒ€ì— 12ëª… ë“±) ê°•ì œë¡œ 6:6 ë¶„ë¦¬
                        if (myTeam.length === 12 || enemyTeam.length === 12 || myTeam.length === 0 || enemyTeam.length === 0) {
                            console.log('âš ï¸ íŒ€ ë¶„ë¦¬ ì´ìƒ, ê°•ì œë¡œ 6:6 ë¶„ë¦¬');
                            myTeam = players.slice(0, 6);
                            enemyTeam = players.slice(6, 12);
                        }
                    }
                    
                    console.log(`ğŸ‘¥ í˜„ì¬ ì‚¬ìš©ì íŒ€: ${currentUserTeam}, ìš°ë¦¬íŒ€: ${myTeam.length}ëª…, ìƒëŒ€íŒ€: ${enemyTeam.length}ëª…`);
                    
                    // ìš°ë¦¬íŒ€ HTML ìƒì„±
                    const myTeamHTML = myTeam.map(player => `
                        <div class="flex items-center gap-2">
                            <picture>
                                <source srcset="${getHeroApiUrl(player.hero)}" type="image/webp">
                                <source srcset="${getHeroApiUrl(player.hero).replace('.webp', '.png')}" type="image/png">
                                <img loading="lazy" alt="${player.hero}" title="${player.hero}" 
                                     class="size-8 aspect-square w-6 h-6 rounded-full border border-border" 
                                     src="${getHeroApiUrl(player.hero)}">
                            </picture>
                            <span class="player-name-text w-32 truncate text-xs text-green-400" title="${player.name}">${player.name}</span>
                        </div>
                    `).join('');
                    
                    // ìƒëŒ€íŒ€ HTML ìƒì„±
                    const enemyTeamHTML = enemyTeam.map(player => `
                        <div class="flex items-center gap-2">
                            <picture>
                                <source srcset="${getHeroApiUrl(player.hero)}" type="image/webp">
                                <source srcset="${getHeroApiUrl(player.hero).replace('.webp', '.png')}" type="image/png">
                                <img loading="lazy" alt="${player.hero}" title="${player.hero}" 
                                     class="size-8 aspect-square w-6 h-6 rounded-full border border-border" 
                                     src="${getHeroApiUrl(player.hero)}">
                            </picture>
                            <span class="player-name-text w-32 truncate text-xs text-red-400" title="${player.name}">${player.name}</span>
                        </div>
                    `).join('');
                    
                    playersContainer.innerHTML = `
                        <div class="teams-grid">
                            <!-- íŒ€ ì„¹ì…˜ -->
                            <div class="team-section our-team">
                                ${myTeamHTML}
                            </div>
                            <div class="team-section enemy-team">
                                ${enemyTeamHTML}
                            </div>
                        </div>
                    `;
                } else {
                    // í”Œë ˆì´ì–´ ë°ì´í„°ê°€ ì—†ì„ ê²½ìš° ë¡œë”© ë©”ì‹œì§€ í‘œì‹œ
                    playersContainer.innerHTML = `
                        <div class="bg-muted flex items-start p-3 rounded">
                            <div class="w-full text-center text-xs text-muted-foreground py-2">
                                í”Œë ˆì´ì–´ ì •ë³´ ë¡œë”© ì¤‘...
                            </div>
                        </div>
                    `;
                }
            }
            
            if (itemsContainer) {
                console.log(`ğŸ’ ë§¤ì¹˜ ${index} ì•„ì´í…œ ì²˜ë¦¬ ì‹œì‘:`, match);
                
                // ë°±ì—”ë“œì—ì„œ ì²˜ë¦¬ëœ ì•„ì´í…œ ë°ì´í„° ì‚¬ìš© (finalItems ìš°ì„ , ì—†ìœ¼ë©´ items)
                let itemsData = match.finalItems || match.items || [];
                
                console.log(`ğŸ“¦ ë§¤ì¹˜ ${index} ì‚¬ìš©í•  ì•„ì´í…œ ë°ì´í„°:`, itemsData);
                
                if (itemsData && itemsData.length > 0) {
                    // ê²Œì„ ì¢…ë£Œ ì‹œ ìµœì¢… ë³´ìœ í•œ ëª¨ë“  ì•„ì´í…œ í‘œì‹œ
                    // sold_timeì´ ì—†ê±°ë‚˜ 0ì¸ ì•„ì´í…œë“¤ë§Œ í•„í„°ë§ (íŒë§¤ë˜ì§€ ì•Šì€ ì•„ì´í…œ)
                    const finalItems = itemsData.filter(item => {
                        const soldTime = item.sold_time_s || item.soldTime || 0;
                        return !soldTime || soldTime === 0;
                    });
                    
                    console.log(`ğŸ† ê²Œì„ ì¢…ë£Œ ì‹œ ìµœì¢… ë³´ìœ  ì•„ì´í…œ ${finalItems.length}ê°œ:`, finalItems.map(i => i.name));
                    
                    // deadlock-api.comê³¼ ë™ì¼í•œ Final Items ë¡œì§ (ì „ì—­ í•¨ìˆ˜ë¡œ ìƒì„±)
                    window.getDeadlockApiItemUrl = function(itemName) {
                        // ì •í™•í•œ deadlock-api.com ìŠ¤íƒ€ì¼ ë§¤í•‘ (kebab-case ë³€í™˜ í¬í•¨)
                        const directMappings = {
                            // Items I observed on deadlock-api.com:
                            'Arcane Surge': 'spirit/arcane_surge_sm',
                            "Enchanter's Emblem": 'vitality/enchanters_emblem_sm', 
                            'Rapid Recharge': 'spirit/rapid_recharge_sm',
                            'Tankbuster': 'spirit/tankbuster_sm',
                            'Boundless Spirit': 'spirit/boundless_spirit_sm',
                            'Leech': 'vitality/leech_sm',
                            'Mystic Shot': 'weapon/mystic_shot_sm',
                            'Trophy Collector': 'vitality/trophy_collector_sm',
                            'Greater Expansion': 'spirit/greater_expansion_sm',
                            'Debuff Remover': 'vitality/debuff_remover_sm',
                            'Transcendent Cooldown': 'spirit/transcendent_cooldown_sm',
                            'Arctic Blast': 'spirit/arctic_blast_sm',
                            'Extra Health': 'vitality/extra_health_sm',
                            'Titanic Magazine': 'weapon/titanic_magazine_sm',
                            'Long Range': 'weapon/long_range_sm',
                            'Battle Vest': 'vitality/battle_vest_sm',
                            'Glass Cannon': 'weapon/glass_cannon_sm',
                            'Extra Stamina': 'vitality/extra_stamina_sm',
                            'Swift Striker': 'weapon/swift_striker_sm',
                            'Bullet Lifesteal': 'vitality/bullet_lifesteal_sm',
                            'Express Shot': 'weapon/express_shot_sm',
                            'Return Fire': 'vitality/return_fire_sm',
                            'Radiant Regeneration': 'vitality/radiant_regeneration_sm',
                            'Healbane': 'vitality/healbane_sm',
                            'Bullet Resilience': 'vitality/bullet_resilience_sm',
                            'Spirit Resilience': 'vitality/spirit_resilience_sm',
                            'Siphon Bullets': 'weapon/siphon_bullets_sm',
                            'Mystic Burst': 'spirit/mystic_burst_sm',
                            'Cold Front': 'spirit/cold_front_sm',
                            'Superior Cooldown': 'spirit/superior_cooldown_sm',
                            'Mystic Expansion': 'spirit/mystic_expansion_sm',
                            'Extra Charge': 'spirit/extra_charge_sm',
                            'Improved Spirit': 'spirit/improved_spirit_sm',
                            'Compress Cooldown': 'spirit/compress_cooldown_sm',
                            'Sprint Boots': 'vitality/sprint_boots_sm',
                            'Superior Duration': 'spirit/superior_duration_sm',
                            'Kinetic Dash': 'weapon/kinetic_dash_sm',
                            'Burst Fire': 'weapon/burst_fire_sm',
                            'Berserker': 'weapon/berserker_sm',
                            'Quicksilver Reload': 'weapon/quicksilver_reload_sm',
                            'Ricochet': 'weapon/ricochet_sm',
                            'Vampiric Burst': 'weapon/vampiric_burst_sm',
                            'Lucky Shot': 'weapon/lucky_shot_sm',
                            'Mystic Vulnerability': 'spirit/mystic_vulnerability_sm',
                            'Mystic Slow': 'spirit/mystic_slow_sm',
                            'Decay': 'vitality/decay_sm',
                            'Mystic Regeneration': 'spirit/mystic_regeneration_sm',
                            'Warp Stone': 'spirit/warp_stone_sm',
                            'Majestic Leap': 'vitality/majestic_leap_sm',
                            'High-Velocity Rounds': 'weapon/high_velocity_rounds_sm',
                            'Enduring Speed': 'vitality/enduring_speed_sm',
                            'Headhunter': 'weapon/headhunter_sm',
                            'Opening Rounds': 'weapon/opening_rounds_sm',
                            'Sharpshooter': 'weapon/sharpshooter_sm',
                            'Spirit Strike': 'spirit/spirit_strike_sm',
                            'Spirit Lifesteal': 'vitality/spirit_lifesteal_sm',
                            'Crushing Fists': 'vitality/crushing_fists_sm',
                            'Healing Tempo': 'vitality/healing_tempo_sm',
                            'Torment Pulse': 'spirit/torment_pulse_sm',
                            'Phantom Strike': 'vitality/phantom_strike_sm',
                            'Healer Tempo': 'vitality/healer_tempo_sm',
                            'Lifestrike': 'vitality/lifestrike_sm',
                            'Spirit Snatch': 'spirit/spirit_snatch_sm',
                            'Cultist Sacrifice': 'spirit/cultist_sacrifice_sm',
                            'Toxic Bullets': 'weapon/toxic_bullets_sm',
                            'Stamina Mastery': 'vitality/stamina_mastery_sm',
                            'Mercurial Magnum': 'weapon/mercurial_magnum_sm',
                            'Suppressor': 'weapon/suppressor_sm',
                            'Escalating Resilience': 'weapon/escalating_resilience_sm',
                            'Surge of Power': 'spirit/surge_of_power_sm',
                            'Basic Magazine': 'weapon/basic_magazine_sm',
                            'Close Quarters': 'weapon/close_quarters_sm',
                            'Monster Rounds': 'weapon/monster_rounds_sm'
                        };
                        
                        // ì§ì ‘ ë§¤í•‘ì—ì„œ ì°¾ê¸°
                        if (directMappings[itemName]) {
                            return `https://assets-bucket.deadlock-api.com/assets-api-res/images/items/${directMappings[itemName]}.png`;
                        }
                        
                        // ìë™ ë³€í™˜ ì‹œë„ (ëŒ€ë¶€ë¶„ì˜ ì•„ì´í…œì€ ì´ë¦„ì„ kebab-caseë¡œ ë³€í™˜í•˜ë©´ ë¨)
                        const kebabCase = itemName
                            .toLowerCase()
                            .replace(/['\s&]+/g, '_')
                            .replace(/_+/g, '_')
                            .replace(/^_|_$/g, '');
                        
                        // ì¹´í…Œê³ ë¦¬ ì¶”ì • (ì•„ì´í…œ ì´ë¦„ ê¸°ë°˜)
                        const spiritKeywords = ['mystic', 'spirit', 'arcane', 'charge', 'recharge', 'surge', 'blast', 'expansion', 'cooldown', 'vulnerability', 'slow', 'regeneration', 'warp', 'burst', 'cold', 'compress', 'transcendent', 'boundless', 'greater', 'rapid', 'improved', 'superior', 'torment', 'snatch', 'cultist'];
                        const vitalityKeywords = ['health', 'armor', 'lifesteal', 'stamina', 'boots', 'emblem', 'vest', 'resilience', 'regeneration', 'healbane', 'bullet', 'debuff', 'remover', 'leech', 'trophy', 'collector', 'radiant', 'return', 'fire', 'siphon', 'battle', 'extra', 'enduring', 'majestic', 'leap', 'decay', 'crushing', 'healing', 'tempo', 'phantom', 'strike', 'lifestrike', 'mastery'];
                        
                        let category = 'weapon'; // default
                        const lowerName = itemName.toLowerCase();
                        
                        if (spiritKeywords.some(keyword => lowerName.includes(keyword))) {
                            category = 'spirit';
                        } else if (vitalityKeywords.some(keyword => lowerName.includes(keyword))) {
                            category = 'vitality';
                        }
                        
                        return `https://assets-bucket.deadlock-api.com/assets-api-res/images/items/${category}/${kebabCase}_sm.png`;
                    };
                    
                    // ê°„ë‹¨í•œ 12ê°œ ìŠ¬ë¡¯ ë°°ì¹˜ (deadlock-api.com ìŠ¤íƒ€ì¼)
                    const itemGridHTML = finalItems.slice(0, 12).map((item, index) => {
                        let itemName = item.name || `Item ${item.itemId || item.id || 'Unknown'}`;
                        const itemUrl = getDeadlockApiItemUrl(itemName);
                        
                        return `
                            <img loading="lazy" alt="${itemName}" title="${itemName}" 
                                 class="w-8 h-8 rounded border border-border" 
                                 src="${itemUrl}"
                                 onerror="this.style.opacity='0.3';">
                        `;
                    }).join('');
                    
                    // ë¹ˆ ìŠ¬ë¡¯ìœ¼ë¡œ 12ê°œ ì±„ìš°ê¸°
                    const emptySlots = Math.max(0, 12 - finalItems.length);
                    const emptyHTML = Array(emptySlots).fill('<div class="w-8 h-8 rounded border border-border bg-muted opacity-30"></div>').join('');
                    
                    itemsContainer.innerHTML = `
                        <div class="grid grid-cols-6 gap-1 w-fit">
                            ${itemGridHTML}${emptyHTML}
                        </div>
                    `;
                    console.log(`âœ… ë§¤ì¹˜ ${index} ê²Œì„ ì¢…ë£Œ ì‹œ ìµœì¢… ë³´ìœ  ì•„ì´í…œ ${finalItems.length}ê°œ í‘œì‹œ ì™„ë£Œ (ì „ì²´ ${itemsData.length}ê°œ ì¤‘)`);
                } else {
                    // ì•„ì´í…œ ë°ì´í„°ê°€ ì—†ëŠ” ê²½ìš° - ë°”ë¡œ ë¹ˆ ìŠ¬ë¡¯ í‘œì‹œ (ë¬´í•œë¡œë”© ë°©ì§€)
                    console.log(`âš ï¸ ë§¤ì¹˜ ${index}: ì•„ì´í…œ ë°ì´í„° ì—†ìŒ, ë¹ˆ ìŠ¬ë¡¯ í‘œì‹œ`);
                    
                    itemsContainer.innerHTML = `
                        <div class="grid grid-cols-6 gap-1 w-fit">
                            ${Array(12).fill('<div class="w-8 h-8 rounded border border-border bg-muted opacity-30"></div>').join('')}
                        </div>
                    `;
                    
                    // deadlock-api.comì—ì„œ ì‹¤ì‹œê°„ ë§¤ì¹˜ ìƒì„¸ ì •ë³´ë¥¼ ê°€ì ¸ì™€ì„œ ì•„ì´í…œ í‘œì‹œ (í•œ ë²ˆë§Œ ì‹œë„)
                    if (!match._itemsRetried) {
                        match._itemsRetried = true; // ì¬ì‹œë„ í”Œë˜ê·¸ ì„¤ì •
                        setTimeout(async () => {
                        try {
                            console.log(`ğŸ”„ ë§¤ì¹˜ ${match.matchId}: deadlock-api.comì—ì„œ ì‹¤ì‹œê°„ final items ê°€ì ¸ì˜¤ëŠ” ì¤‘...`);
                            const matchDetailsResponse = await fetch(`/api/v1/matches/${match.matchId}/details`);
                            if (matchDetailsResponse.ok) {
                                const detailsData = await matchDetailsResponse.json();
                                console.log(`ğŸ“¡ ë§¤ì¹˜ ${match.matchId} API ì‘ë‹µ:`, detailsData);
                                
                                // í˜„ì¬ í‘œì‹œì¤‘ì¸ í”Œë ˆì´ì–´ì™€ ë§¤ì¹­ë˜ëŠ” í”Œë ˆì´ì–´ ì°¾ê¸°
                                if (detailsData.finalItemsData && detailsData.finalItemsData.length > 0) {
                                    // ì˜ì›… ì´ë¦„ì´ë‚˜ í”Œë ˆì´ì–´ ì´ë¦„ìœ¼ë¡œ ë§¤ì¹­ ì‹œë„
                                    const currentPlayerData = detailsData.finalItemsData.find(playerData => 
                                        playerData.heroName === match.hero || 
                                        playerData.playerName === match.playerName
                                    );
                                    
                                    if (currentPlayerData && currentPlayerData.finalItems && currentPlayerData.finalItems.length > 0) {
                                        console.log(`âœ… ë§¤ì¹˜ ${match.matchId}: ${currentPlayerData.heroName}ì˜ final items ${currentPlayerData.finalItems.length}ê°œ ë°œê²¬`);
                                        const finalItems = currentPlayerData.finalItems;
                                    
                                        // deadlock-api.com URL êµ¬ì¡°ë¡œ ì•„ì´í…œ í‘œì‹œ (12ê°œ ìŠ¬ë¡¯)
                                        const retryItemsHTML = finalItems.slice(0, 12).map((item, itemIndex) => {
                                            let itemName = item.name || `Item ${item.itemId || item.id || 'Unknown'}`;
                                            const itemUrl = getDeadlockApiItemUrl(itemName);
                                            
                                            return `
                                                <img loading="lazy" alt="${itemName}" title="${itemName}" 
                                                     class="w-8 h-8 rounded border border-border" 
                                                     src="${itemUrl}"
                                                     onerror="this.style.opacity='0.3';">
                                            `;
                                        }).join('');
                                        
                                        // ë¹ˆ ìŠ¬ë¡¯ìœ¼ë¡œ 12ê°œ ì±„ìš°ê¸°
                                        const emptySlots = Math.max(0, 12 - finalItems.length);
                                        const emptyHTML = Array(emptySlots).fill('<div class="w-8 h-8 rounded border border-border bg-muted opacity-30"></div>').join('');
                                        
                                        itemsContainer.innerHTML = `
                                            <div class="grid grid-cols-6 gap-1 w-fit">
                                                ${retryItemsHTML}${emptyHTML}
                                            </div>
                                        `;
                                        console.log(`âœ… ë§¤ì¹˜ ${match.matchId}: deadlock-api.comì—ì„œ ì‹¤ì‹œê°„ìœ¼ë¡œ ê°€ì ¸ì˜¨ ${finalItems.length}ê°œ final items í‘œì‹œ ì™„ë£Œ`);
                                        return;
                                    } else {
                                        console.warn(`âš ï¸ ë§¤ì¹˜ ${match.matchId}: í˜„ì¬ í”Œë ˆì´ì–´ì˜ final itemsë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ`);
                                    }
                                } else {
                                    console.warn(`âš ï¸ ë§¤ì¹˜ ${match.matchId}: deadlock-api.comì—ì„œ final items ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ`);
                                }
                            }
                        } catch (retryError) {
                            console.error(`âŒ ë§¤ì¹˜ ${index} ì•„ì´í…œ ì¬ì‹œë„ ì‹¤íŒ¨:`, retryError);
                        }
                        
                        // ìµœì¢…ì ìœ¼ë¡œ ì‹¤íŒ¨í•œ ê²½ìš° ë¹ˆ ìŠ¬ë¡¯ í‘œì‹œ
                        itemsContainer.innerHTML = `
                            <div style="grid-column: 1/-1; text-align: center; color: #666; font-size: 11px; padding: 15px;">
                                <i class="fas fa-info-circle"></i> ê²Œì„ ì¢…ë£Œ ì‹œ ì•„ì´í…œ ì •ë³´ ì—†ìŒ
                            </div>
                        `;
                        }, 1000 + index * 200); // ê° ë§¤ì¹˜ë§ˆë‹¤ ì•½ê°„ì˜ ì§€ì—°ì„ ë‘ì–´ API ë¶€í•˜ ë°©ì§€
                    }
                }
            } else {
                console.error(`âŒ ë§¤ì¹˜ ${index}: items-container ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ`);
            }
        }
        
        console.log('âœ… ë§¤ì¹˜ íˆìŠ¤í† ë¦¬ í‘œì‹œ ì™„ë£Œ');
        
    } catch (error) {
        console.error('âŒ ë§¤ì¹˜ íˆìŠ¤í† ë¦¬ í‘œì‹œ ì˜¤ë¥˜:', error);
        matchesList.innerHTML = '<p style="color: #ff6b6b; text-align: center;">ë§¤ì¹˜ ë°ì´í„° í‘œì‹œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>';
    }
}

// íŒŒí‹° ìŠ¤íƒ¯ í‘œì‹œ
function displayPartyStats(partyStats) {
    const partyStatsList = document.getElementById('party-stats-list');
    
    try {
        console.log('ğŸ‘¥ íŒŒí‹° ìŠ¤íƒ¯ í‘œì‹œ ì‹œì‘:', partyStats);
        
        if (!Array.isArray(partyStats) || partyStats.length === 0) {
            partyStatsList.innerHTML = '<p style="color: #999; text-align: center;">íŒŒí‹° ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
            return;
        }
        
        const formatDate = (dateString) => {
            try {
                if (!dateString) return 'ì•Œ ìˆ˜ ì—†ìŒ';
                const date = new Date(dateString);
                if (isNaN(date.getTime())) return 'ì•Œ ìˆ˜ ì—†ìŒ';
                
                const now = new Date();
                const diffHours = Math.floor((now - date) / (1000 * 60 * 60));
                
                if (diffHours < 1) return 'ë°©ê¸ˆ ì „';
                if (diffHours < 24) return `${diffHours}ì‹œê°„ ì „`;
                const diffDays = Math.floor(diffHours / 24);
                if (diffDays < 7) return `${diffDays}ì¼ ì „`;
                return date.toLocaleDateString('ko-KR');
            } catch (error) {
                return 'ì•Œ ìˆ˜ ì—†ìŒ';
            }
        };
        
        const partyCards = partyStats.map((member, index) => {
            try {
                // deadlock.coach ìŠ¤íƒ€ì¼ ë°ì´í„° ê²€ì¦
                if (!member || !member.accountId || member.accountId === 'undefined' || member.accountId === null) {
                    console.log('âš ï¸ ìœ íš¨í•˜ì§€ ì•Šì€ íŒŒí‹° ë©¤ë²„ ë°ì´í„°:', member);
                    return ''; // ìœ íš¨í•˜ì§€ ì•Šì€ ë°ì´í„°ëŠ” í‘œì‹œí•˜ì§€ ì•ŠìŒ
                }
                
                const accountId = member.accountId;
                const name = member.name && member.name !== 'undefined' ? member.name : `Player_${accountId}`;
                const matches = parseInt(member.matches) || 0;
                const wins = parseInt(member.wins) || 0;
                const losses = parseInt(member.losses) || 0;
                const winRate = parseInt(member.winRate) || 0;
                const avgKda = member.avgKda || '0.0';
                const lastPlayed = member.lastPlayedTogether || null;
                
                return `
                    <div class="party-member" data-account-id="${accountId}">
                        <div class="party-member-avatar">
                            <img src="${member?.avatar || 'https://avatars.cloudflare.steamstatic.com/fef49e7fa7e1997310d705b2a6158ff8dc1cdfeb_full.jpg'}" 
                                 alt="${name}" 
                                 onerror="this.src='https://avatars.cloudflare.steamstatic.com/fef49e7fa7e1997310d705b2a6158ff8dc1cdfeb_full.jpg'">
                        </div>
                        <div class="party-member-info">
                            <div class="party-member-name">${name}</div>
                            <div class="party-member-matches">${matches} ë§¤ì¹˜</div>
                        </div>
                        <div class="party-member-winrate">
                            <div class="winrate-value">${winRate}%</div>
                            <div class="winrate-label">ìŠ¹ë¥ </div>
                        </div>
                    </div>
                `;
            } catch (memberError) {
                console.error('íŒŒí‹° ë©¤ë²„ ì¹´ë“œ ìƒì„± ì˜¤ë¥˜:', memberError, member);
                return `
                    <div class="party-member">
                        <div class="party-member-info">
                            <div class="party-member-name">Unknown Player</div>
                            <div class="party-member-id">ë°ì´í„° ì˜¤ë¥˜</div>
                        </div>
                    </div>
                `;
            }
        });
        
        // deadlock.coach ìŠ¤íƒ€ì¼: ë¹ˆ ì¹´ë“œëŠ” í•„í„°ë§í•˜ê³  í‘œì‹œ
        const validPartyCards = partyCards.filter(card => card.trim() !== '');
        partyStatsList.innerHTML = validPartyCards.join('');
        
        // íŒŒí‹°ì› í´ë¦­ ì‹œ í”„ë¡œí•„ ì´ë™ ê¸°ëŠ¥ ì¶”ê°€
        partyStatsList.addEventListener('click', (e) => {
            const partyMember = e.target.closest('.party-member');
            if (partyMember) {
                const accountId = partyMember.dataset.accountId;
                console.log('íŒŒí‹° ë©¤ë²„ í´ë¦­:', { accountId: accountId });
                if (accountId && accountId !== 'Unknown') {
                    console.log('í”„ë¡œí•„ í˜ì´ì§€ë¡œ ì´ë™:', `/ko/players/${accountId}`);
                    window.location.href = `/ko/players/${accountId}`;
                } else {
                    console.log('ìœ íš¨í•˜ì§€ ì•Šì€ Account ID:', accountId);
                    alert('ì´ í”Œë ˆì´ì–´ì˜ í”„ë¡œí•„ì„ ë³¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                }
            }
        });
        
        console.log('âœ… íŒŒí‹° ìŠ¤íƒ¯ í‘œì‹œ ì™„ë£Œ');
        
    } catch (error) {
        console.error('âŒ íŒŒí‹° ìŠ¤íƒ¯ í‘œì‹œ ì˜¤ë¥˜:', error);
        partyStatsList.innerHTML = '<p style="color: #ff6b6b; text-align: center;">íŒŒí‹° ë°ì´í„° í‘œì‹œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>';
    }
}

// MMR ê·¸ë˜í”„ í‘œì‹œ
function displayMMRGraph(mmrData) {
    try {
        console.log('ğŸ“ˆ MMR ê·¸ë˜í”„ ìƒì„± ì‹œì‘:', mmrData);
        
        const ctx = document.getElementById('mmr-chart').getContext('2d');
        
        // ê¸°ì¡´ ì°¨íŠ¸ê°€ ìˆìœ¼ë©´ ì œê±°
        if (window.mmrChart) {
            window.mmrChart.destroy();
        }
        
        // ë°ì´í„° í¬ë§·íŒ…
        const labels = mmrData.map(entry => {
            const date = new Date(entry.date);
            return date.toLocaleDateString('ko-KR', { month: 'short', day: 'numeric' });
        });
        
        const mmrValues = mmrData.map(entry => entry.mmr);
        
        // ë“±ê¸‰ë³„ ìƒ‰ìƒê³¼ ë ˆë²¨ ì •ì˜ (deadlock-api.com ê¸°ì¤€)
        const rankColors = {
            'Initiate': '#8B4513',
            'Seeker': '#CD853F', 
            'Arcanist': '#4682B4',
            'Alchemist': '#32CD32',
            'Ritualist': '#9932CC',
            'Oracle': '#FF6347',
            'Phantom': '#FF1493',
            'Eternus': '#FFD700'
        };
        
        const rankLevels = {
            'Initiate': 1,
            'Seeker': 2,
            'Arcanist': 3,
            'Alchemist': 4,
            'Ritualist': 5,
            'Oracle': 6,
            'Phantom': 7,
            'Eternus': 8
        };
        
        // í˜„ì¬ ë“±ê¸‰ ê²°ì •
        const currentRank = mmrData.length > 0 ? mmrData[mmrData.length - 1].rank : 'Seeker';
        const currentColor = rankColors[currentRank] || '#CD853F';
        
        window.mmrChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: labels,
                datasets: [{
                    label: 'MMR',
                    data: mmrValues,
                    borderColor: currentColor,
                    backgroundColor: currentColor + '20',
                    borderWidth: 3,
                    fill: true,
                    tension: 0.4,
                    pointBackgroundColor: currentColor,
                    pointBorderColor: '#ffffff',
                    pointBorderWidth: 2,
                    pointRadius: 6,
                    pointHoverRadius: 8
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                interaction: {
                    intersect: false,
                    mode: 'index'
                },
                plugins: {
                    legend: {
                        labels: {
                            color: '#FFEFD7',
                            font: {
                                size: 14,
                                family: 'system-ui, -apple-system, sans-serif'
                            }
                        }
                    },
                    tooltip: {
                        backgroundColor: 'rgba(0, 0, 0, 0.9)',
                        titleColor: '#FFEFD7',
                        bodyColor: '#FFEFD7',
                        borderColor: currentColor,
                        borderWidth: 1,
                        titleFont: {
                            size: 14,
                            weight: 'bold'
                        },
                        bodyFont: {
                            size: 13
                        },
                        callbacks: {
                            label: function(context) {
                                const index = context.dataIndex;
                                const mmr = mmrValues[index];
                                const rank = mmrData[index].rank;
                                const tier = mmrData[index].tier;
                                return [`MMR: ${mmr}`, `ë“±ê¸‰: ${rank} ${tier}`];
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        },
                        ticks: {
                            color: '#999',
                            font: {
                                size: 12
                            }
                        }
                    },
                    y: {
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        },
                        ticks: {
                            color: '#999',
                            font: {
                                size: 12
                            },
                            callback: function(value) {
                                return Math.round(value);
                            }
                        },
                        beginAtZero: false
                    }
                }
            }
        });
        
        console.log('âœ… MMR ê·¸ë˜í”„ ìƒì„± ì™„ë£Œ');
        
    } catch (error) {
        console.error('âŒ MMR ê·¸ë˜í”„ ìƒì„± ì˜¤ë¥˜:', error);
        document.getElementById('mmr-graph-container').innerHTML = '<p style="color: #ff6b6b; text-align: center;">MMR ê·¸ë˜í”„ë¥¼ í‘œì‹œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>';
    }
}

// Load data when page loads
document.addEventListener('DOMContentLoaded', () => {
    // ì•„ì´í…œ ë§¤ì¹­ ì‹œìŠ¤í…œê³¼ í”„ë¡œí•„ ë°ì´í„° ë¡œë“œë¥¼ ë¹„ë™ê¸°ë¡œ ì²˜ë¦¬
    (async () => {
        try {
            // ì•„ì´í…œ ë§¤ì¹­ ì‹œìŠ¤í…œ ë¨¼ì € ì´ˆê¸°í™”
            await initializeItemMatching();
            
            // í”„ë¡œí•„ ë°ì´í„° ë¡œë“œ
            loadMyProfileData();
        } catch (error) {
            console.error('âŒ ì´ˆê¸°í™” ì¤‘ ì˜¤ë¥˜:', error);
            // ì—ëŸ¬ê°€ ë°œìƒí•´ë„ í”„ë¡œí•„ ë°ì´í„°ëŠ” ë¡œë“œ ì‹œë„
            loadMyProfileData();
        }
    })();
});
</script>
<div class="player-detail-section">
    <div class="player-detail-container">
        <!-- Loading State -->
        <div class="player-loading" id="player-loading">
            <div class="loading-spinner"></div>
            <p>í”Œë ˆì´ì–´ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
        </div>

        <!-- Player Content -->
        <div class="player-content" id="player-content" style="display: none;">
            <!-- Player Header -->
            <div class="player-header">
                <div class="player-basic-info">
                    <img class="player-detail-avatar" id="player-avatar" alt="Player Avatar">
                    <div class="player-main-info">
                        <h1 class="player-name" id="player-name">í”Œë ˆì´ì–´</h1>
                        <div class="player-meta">
                            <span class="player-country" id="player-country">ğŸŒ</span>
                            <span class="player-account-id">ê³„ì • ID: <%= accountId %></span>
                        </div>
                    </div>
                </div>
                <div class="player-rank">
                    <div class="rank-badge">
                        <img class="rank-medal" id="rank-medal" alt="Rank Medal">
                        <div class="rank-info">
                            <span class="rank-name" id="rank-name">Oracle</span>
                            <span class="rank-score" id="rank-score">3500</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Player Stats -->
            <div class="player-stats">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="stat-matches">0</div>
                        <div class="stat-label">ë§¤ì¹˜</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="stat-winrate">0%</div>
                        <div class="stat-label">ìŠ¹ë¥ </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="stat-lane-winrate">0%</div>
                        <div class="stat-label">ë¼ì¸ ìŠ¹ë¥ </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="stat-kda">0.0</div>
                        <div class="stat-label">KDA</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="stat-headshots">0%</div>
                        <div class="stat-label">í—¤ë“œìƒ·</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="stat-souls">0</div>
                        <div class="stat-label">ì†Œìš¸/ë¶„</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="stat-damage">0</div>
                        <div class="stat-label">ë°ë¯¸ì§€/ë¶„</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="stat-healing">0</div>
                        <div class="stat-label">íë§/ë¶„</div>
                    </div>
                </div>
            </div>

            <!-- Party Stats Section -->
            <div class="player-section">
                <h2 class="section-title">íŒŒí‹° í†µê³„</h2>
                <div class="party-stats-grid" id="party-stats-grid">
                    <!-- Party stats will be populated by JavaScript -->
                </div>
            </div>

            <!-- Heroes Section -->
            <div class="player-section">
                <h2 class="section-title">í”Œë ˆì´í•œ ì˜ì›…</h2>
                <div class="heroes-grid" id="heroes-grid">
                    <!-- Heroes will be populated by JavaScript -->
                </div>
            </div>

            <!-- Recent Matches -->
            <div class="player-section">
                <h2 class="section-title">ìµœê·¼ ë§¤ì¹˜</h2>
                <div class="matches-list" id="matches-list">
                    <!-- Matches will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Error State -->
        <div class="player-error" id="player-error" style="display: none;">
            <h2>í”Œë ˆì´ì–´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤</h2>
            <p>ìš”ì²­í•˜ì‹  í”Œë ˆì´ì–´ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
            <a href="/ko/leaderboards/asia" class="back-button">ë¦¬ë”ë³´ë“œë¡œ ëŒì•„ê°€ê¸°</a>
        </div>
    </div>
</div>

<style>
/* Player Detail Styles */
.player-detail-section {
    padding: 120px 0 60px;
    min-height: 100vh;
    background: #000000;
}

.player-detail-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 40px;
}

.player-loading {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 100px 20px;
    color: #FFEFD7;
}

.player-content {
    color: #FFEFD7;
}

.player-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: rgba(255, 255, 255, 0.05);
    padding: 40px;
    border-radius: 16px;
    margin-bottom: 40px;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.player-basic-info {
    display: flex;
    align-items: center;
    gap: 30px;
}

.player-detail-avatar {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    border: 3px solid #63a2e2;
    box-shadow: 0 4px 20px rgba(99, 162, 226, 0.3);
}

.player-main-info {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.player-name {
    font-size: 36px;
    font-weight: 700;
    color: #FFEFD7;
    margin: 0;
}

.player-meta {
    display: flex;
    align-items: center;
    gap: 20px;
    font-size: 16px;
}

.player-country {
    font-size: 24px;
}

.player-account-id {
    color: #999;
    font-size: 14px;
}

.player-rank {
    display: flex;
    align-items: center;
}

.rank-badge {
    display: flex;
    align-items: center;
    gap: 15px;
    background: rgba(99, 162, 226, 0.1);
    padding: 20px 30px;
    border-radius: 12px;
    border: 2px solid #63a2e2;
}

.rank-medal {
    width: 60px;
    height: 60px;
}

.rank-info {
    display: flex;
    flex-direction: column;
    gap: 5px;
}

.rank-name {
    font-size: 18px;
    font-weight: 600;
    color: #63a2e2;
}

.rank-score {
    font-size: 24px;
    font-weight: 700;
    color: #FFEFD7;
}

.player-stats {
    background: rgba(255, 255, 255, 0.05);
    padding: 40px;
    border-radius: 16px;
    margin-bottom: 40px;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 30px;
}

.stat-card {
    text-align: center;
    padding: 20px;
    background: rgba(255, 255, 255, 0.03);
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    transition: all 0.3s;
}

.stat-card:hover {
    background: rgba(99, 162, 226, 0.1);
    border-color: #63a2e2;
    transform: translateY(-2px);
}

.stat-value {
    font-size: 28px;
    font-weight: 700;
    color: #63a2e2;
    margin-bottom: 8px;
}

.stat-label {
    font-size: 14px;
    color: #999;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.player-section {
    background: rgba(255, 255, 255, 0.05);
    padding: 40px;
    border-radius: 16px;
    margin-bottom: 40px;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.section-title {
    font-size: 24px;
    font-weight: 600;
    color: #FFEFD7;
    margin-bottom: 30px;
    border-bottom: 2px solid #63a2e2;
    padding-bottom: 10px;
}

.heroes-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
}

.hero-card {
    display: flex;
    align-items: center;
    gap: 15px;
    background: rgba(255, 255, 255, 0.03);
    padding: 20px;
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    transition: all 0.3s;
}

.hero-card:hover {
    background: rgba(99, 162, 226, 0.1);
    border-color: #63a2e2;
    transform: translateY(-2px);
}

.hero-card-image {
    width: 50px;
    height: 50px;
    border-radius: 8px;
}

.hero-card-info h3 {
    font-size: 16px;
    font-weight: 600;
    color: #FFEFD7;
    margin: 0 0 5px 0;
}

.hero-card-stats {
    font-size: 14px;
    color: #999;
}

.matches-list {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.match-card {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: rgba(255, 255, 255, 0.03);
    padding: 20px;
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    transition: all 0.3s;
}

.match-card:hover {
    background: rgba(99, 162, 226, 0.1);
    border-color: #63a2e2;
}

.match-card.win {
    border-left: 4px solid #10B981;
}

.match-card.loss {
    border-left: 4px solid #EF4444;
}

.match-hero {
    display: flex;
    align-items: center;
    gap: 15px;
}

.match-hero-image {
    width: 40px;
    height: 40px;
    border-radius: 6px;
}

.match-result {
    font-weight: 600;
}

.match-result.win {
    color: #10B981;
}

.match-result.loss {
    color: #EF4444;
}

.match-kda {
    font-family: monospace;
    font-size: 16px;
    color: #FFEFD7;
}

.match-stats {
    display: flex;
    gap: 20px;
    font-size: 14px;
    color: #999;
}

.party-stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
}

.party-stat-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    background: rgba(255, 255, 255, 0.03);
    padding: 30px 20px;
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    transition: all 0.3s;
    text-align: center;
}

.party-stat-card:hover {
    background: rgba(99, 162, 226, 0.1);
    border-color: #63a2e2;
    transform: translateY(-2px);
}

.party-size {
    font-size: 48px;
    font-weight: 700;
    color: #63a2e2;
    margin-bottom: 10px;
}

.party-size-label {
    font-size: 16px;
    color: #FFEFD7;
    margin-bottom: 20px;
    font-weight: 600;
}

.party-stats-details {
    display: flex;
    flex-direction: column;
    gap: 8px;
    width: 100%;
}

.party-stat-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 14px;
}

.party-stat-label {
    color: #999;
}

.party-stat-value {
    color: #FFEFD7;
    font-weight: 600;
}

.party-win-rate {
    font-size: 20px;
    font-weight: 700;
    color: #10B981;
    margin-top: 10px;
}

.player-error {
    text-align: center;
    padding: 100px 20px;
    color: #FFEFD7;
}

.player-error h2 {
    font-size: 36px;
    margin-bottom: 20px;
    color: #EF4444;
}

.back-button {
    display: inline-block;
    background: #63a2e2;
    color: white;
    padding: 12px 24px;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 600;
    margin-top: 20px;
    transition: all 0.3s;
}

.back-button:hover {
    background: #4f8bc9;
    transform: translateY(-2px);
}

/* Responsive */
@media (max-width: 768px) {
    .player-detail-container {
        padding: 0 20px;
    }
    
    .player-header {
        flex-direction: column;
        gap: 30px;
        text-align: center;
    }
    
    .player-basic-info {
        flex-direction: column;
        text-align: center;
    }
    
    .player-name {
        font-size: 28px;
    }
    
    .stats-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
    }
    
    .heroes-grid {
        grid-template-columns: 1fr;
    }
    
    .match-card {
        flex-direction: column;
        gap: 15px;
        text-align: center;
    }
}
</style>

<script>
// êµ­ê°€ í”Œë˜ê·¸ë¥¼ ì´ë¯¸ì§€ë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜
function getCountryImage(countryFlag) {
    const flagImageMap = {
        'ğŸ‡ºğŸ‡¸': '<img src="https://flagcdn.com/24x18/us.png" alt="ë¯¸êµ­" title="ë¯¸êµ­" class="flag-image">',
        'ğŸ‡¨ğŸ‡¦': '<img src="https://flagcdn.com/24x18/ca.png" alt="ìºë‚˜ë‹¤" title="ìºë‚˜ë‹¤" class="flag-image">',
        'ğŸ‡²ğŸ‡½': '<img src="https://flagcdn.com/24x18/mx.png" alt="ë©•ì‹œì½”" title="ë©•ì‹œì½”" class="flag-image">',
        'ğŸ‡¬ğŸ‡§': '<img src="https://flagcdn.com/24x18/gb.png" alt="ì˜êµ­" title="ì˜êµ­" class="flag-image">',
        'ğŸ‡©ğŸ‡ª': '<img src="https://flagcdn.com/24x18/de.png" alt="ë…ì¼" title="ë…ì¼" class="flag-image">',
        'ğŸ‡«ğŸ‡·': '<img src="https://flagcdn.com/24x18/fr.png" alt="í”„ë‘ìŠ¤" title="í”„ë‘ìŠ¤" class="flag-image">',
        'ğŸ‡ªğŸ‡¸': '<img src="https://flagcdn.com/24x18/es.png" alt="ìŠ¤í˜ì¸" title="ìŠ¤í˜ì¸" class="flag-image">',
        'ğŸ‡®ğŸ‡¹': '<img src="https://flagcdn.com/24x18/it.png" alt="ì´íƒˆë¦¬ì•„" title="ì´íƒˆë¦¬ì•„" class="flag-image">',
        'ğŸ‡¨ğŸ‡³': '<img src="https://flagcdn.com/24x18/cn.png" alt="ì¤‘êµ­" title="ì¤‘êµ­" class="flag-image">',
        'ğŸ‡¯ğŸ‡µ': '<img src="https://flagcdn.com/24x18/jp.png" alt="ì¼ë³¸" title="ì¼ë³¸" class="flag-image">',
        'ğŸ‡°ğŸ‡·': '<img src="https://flagcdn.com/24x18/kr.png" alt="í•œêµ­" title="í•œêµ­" class="flag-image">',
        'ğŸ‡¹ğŸ‡¼': '<img src="https://flagcdn.com/24x18/tw.png" alt="ëŒ€ë§Œ" title="ëŒ€ë§Œ" class="flag-image">',
        'ğŸ‡¸ğŸ‡¬': '<img src="https://flagcdn.com/24x18/sg.png" alt="ì‹±ê°€í¬ë¥´" title="ì‹±ê°€í¬ë¥´" class="flag-image">',
        'ğŸ‡·ğŸ‡º': '<img src="https://flagcdn.com/24x18/ru.png" alt="ëŸ¬ì‹œì•„" title="ëŸ¬ì‹œì•„" class="flag-image">',
        'ğŸ‡µğŸ‡±': '<img src="https://flagcdn.com/24x18/pl.png" alt="í´ë€ë“œ" title="í´ë€ë“œ" class="flag-image">',
        'ğŸ‡¸ğŸ‡ª': '<img src="https://flagcdn.com/24x18/se.png" alt="ìŠ¤ì›¨ë´" title="ìŠ¤ì›¨ë´" class="flag-image">',
        'ğŸ‡³ğŸ‡´': '<img src="https://flagcdn.com/24x18/no.png" alt="ë…¸ë¥´ì›¨ì´" title="ë…¸ë¥´ì›¨ì´" class="flag-image">',
        'ğŸ‡©ğŸ‡°': '<img src="https://flagcdn.com/24x18/dk.png" alt="ë´ë§ˆí¬" title="ë´ë§ˆí¬" class="flag-image">',
        'ğŸ‡¹ğŸ‡­': '<img src="https://flagcdn.com/24x18/th.png" alt="íƒœêµ­" title="íƒœêµ­" class="flag-image">',
        'ğŸ‡»ğŸ‡³': '<img src="https://flagcdn.com/24x18/vn.png" alt="ë² íŠ¸ë‚¨" title="ë² íŠ¸ë‚¨" class="flag-image">',
        'ğŸ‡²ğŸ‡¾': '<img src="https://flagcdn.com/24x18/my.png" alt="ë§ë ˆì´ì‹œì•„" title="ë§ë ˆì´ì‹œì•„" class="flag-image">',
        'ğŸ‡µğŸ‡­': '<img src="https://flagcdn.com/24x18/ph.png" alt="í•„ë¦¬í•€" title="í•„ë¦¬í•€" class="flag-image">',
        'ğŸ‡®ğŸ‡©': '<img src="https://flagcdn.com/24x18/id.png" alt="ì¸ë„ë„¤ì‹œì•„" title="ì¸ë„ë„¤ì‹œì•„" class="flag-image">',
        'ğŸŒ': '<img src="https://flagcdn.com/24x18/un.png" alt="ì•Œ ìˆ˜ ì—†ìŒ" title="ì•Œ ìˆ˜ ì—†ìŒ" class="flag-image">'
    };
    
    return flagImageMap[countryFlag] || '<img src="https://flagcdn.com/24x18/un.png" alt="ì•Œ ìˆ˜ ì—†ìŒ" title="ì•Œ ìˆ˜ ì—†ìŒ" class="flag-image">';
}

let currentPlayer = null;

async function loadPlayerData() {
    const loading = document.getElementById('player-loading');
    const content = document.getElementById('player-content');
    const error = document.getElementById('player-error');
    
    loading.style.display = 'flex';
    content.style.display = 'none';
    error.style.display = 'none';
    
    try {
        const response = await fetch(`/api/v1/players/<%= accountId %>`);
        const data = await response.json();
        
        if (response.ok) {
            currentPlayer = data;
            updatePlayerUI(data);
            loading.style.display = 'none';
            content.style.display = 'block';
        } else {
            throw new Error(data.error || 'Failed to load player');
        }
        
    } catch (err) {
        console.error('Failed to load player data:', err);
        loading.style.display = 'none';
        error.style.display = 'block';
    }
}

function updatePlayerUI(player) {
    // Basic Info
    document.getElementById('player-avatar').src = player.avatar;
    document.getElementById('player-name').textContent = player.name;
    document.getElementById('player-country').innerHTML = getCountryImage(player.country);
    
    // Rank
    const getMedalImage = (medal, subrank) => {
        const medalRankMap = {
            'Eternus': 11, 'Phantom': 10, 'Oracle': 9, 'Ritualist': 8,
            'Alchemist': 7, 'Arcanist': 6, 'Initiate': 5
        };
        const rankNumber = medalRankMap[medal] || 9;
        return `https://cdn.deadlock.coach/vpk/panorama/images/ranked/badges/rank${rankNumber}/badge_sm_subrank${subrank}.webp`;
    };
    
    document.getElementById('rank-medal').src = getMedalImage(player.rank.medal, player.rank.subrank);
    document.getElementById('rank-name').textContent = `${player.rank.medal} ${player.rank.subrank}`;
    document.getElementById('rank-score').textContent = player.rank.score.toLocaleString();
    
    // Stats
    document.getElementById('stat-matches').textContent = player.stats.matches;
    document.getElementById('stat-winrate').textContent = `${player.stats.winRate}%`;
    document.getElementById('stat-lane-winrate').textContent = `${player.stats.laneWinRate}%`;
    document.getElementById('stat-kda').textContent = player.stats.kda;
    document.getElementById('stat-headshots').textContent = `${player.stats.headshotPercent}%`;
    document.getElementById('stat-souls').textContent = player.stats.soulsPerMin.toLocaleString();
    document.getElementById('stat-damage').textContent = player.stats.damagePerMin.toLocaleString();
    document.getElementById('stat-healing').textContent = player.stats.healingPerMin.toLocaleString();
    
    // Party Stats
    loadPartyStats();
    
    // Heroes
    updateHeroesGrid(player.heroes);
    
    // Recent Matches
    updateMatchesList(player.recentMatches);
}

function updateHeroesGrid(heroes) {
    const grid = document.getElementById('heroes-grid');
    
    const getHeroImage = (heroName) => {
        const heroImageMap = {
            'Abrams': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/bull_card.webp',
            'Bebop': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/bebop_card.webp',
            'Dynamo': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/dynamo_card.webp',
            'Grey Talon': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/archer_card.webp',
            'Haze': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/haze_card.webp',
            'Infernus': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/inferno_card.webp',
            'Ivy': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/ivy_card.webp',
            'Kelvin': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/kelvin_card.webp',
            'Lady Geist': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/spectre_card.webp',
            'Lash': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/lash_card.webp',
            'McGinnis': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/engineer_card.webp',
            'Mo & Krill': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/digger_card.webp',
            'Paradox': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/chrono_card.webp',
            'Pocket': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/synth_card.webp',
            'Seven': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/gigawatt_card.webp',
            'Shiv': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/shiv_card.webp',
            'Viper': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/kali_card.webp',
            'Viscous': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/viscous_card.webp',
            'Warden': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/warden_card.webp',
            'Holliday': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/astro_card.webp',
            'Mirage': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/mirage_card.webp',
            'Wraith': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/wraith_card.webp',
            'Yamato': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/yamato_card.webp'
        };
        return heroImageMap[heroName] || 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/bull_card.webp';
    };
    
    grid.innerHTML = heroes.map(hero => `
        <div class="hero-card">
            <img src="${getHeroImage(hero.name)}" alt="${hero.name}" class="hero-card-image">
            <div class="hero-card-info">
                <h3>${hero.name}</h3>
                <div class="hero-card-stats">
                    ${hero.matches}ê²Œì„ Â· ${hero.winRate}% ìŠ¹ë¥ 
                </div>
            </div>
        </div>
    `).join('');
}

function updateMatchesList(matches) {
    const list = document.getElementById('matches-list');
    
    const getHeroImage = (heroName) => {
        const heroImageMap = {
            'Abrams': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/bull_card.webp',
            'Bebop': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/bebop_card.webp',
            'Dynamo': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/dynamo_card.webp',
            'Grey Talon': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/archer_card.webp',
            'Haze': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/haze_card.webp',
            'Infernus': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/inferno_card.webp',
            'Ivy': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/ivy_card.webp',
            'Kelvin': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/kelvin_card.webp',
            'Lady Geist': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/spectre_card.webp',
            'Lash': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/lash_card.webp',
            'McGinnis': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/engineer_card.webp',
            'Mo & Krill': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/digger_card.webp',
            'Paradox': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/chrono_card.webp',
            'Pocket': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/synth_card.webp',
            'Seven': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/gigawatt_card.webp',
            'Shiv': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/shiv_card.webp',
            'Viper': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/kali_card.webp',
            'Viscous': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/viscous_card.webp',
            'Warden': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/warden_card.webp',
            'Holliday': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/astro_card.webp',
            'Mirage': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/mirage_card.webp',
            'Wraith': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/wraith_card.webp',
            'Yamato': 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/yamato_card.webp'
        };
        return heroImageMap[heroName] || 'https://cdn.deadlock.coach/vpk/panorama/images/heroes/bull_card.webp';
    };
    
    list.innerHTML = matches.map(match => `
        <div class="match-card ${match.result === 'ìŠ¹ë¦¬' ? 'win' : 'loss'}">
            <div class="match-hero">
                <img src="${getHeroImage(match.hero)}" alt="${match.hero}" class="match-hero-image">
                <span class="match-result ${match.result === 'ìŠ¹ë¦¬' ? 'win' : 'loss'}">${match.result}</span>
            </div>
            
            <div class="match-kda">
                ${match.kills}/${match.deaths}/${match.assists}
            </div>
            
            <div class="match-stats">
                <span>${(match.damage / 1000).toFixed(1)}k ë°ë¯¸ì§€</span>
                <span>${(match.healing / 1000).toFixed(1)}k íë§</span>
                <span>${match.duration}ë¶„</span>
                <span>íŒ€ ìˆœìœ„ ${match.teamRank}</span>
            </div>
        </div>
    `).join('');
}

async function loadPartyStats() {
    try {
        const response = await fetch(`/api/v1/players/<%= accountId %>/party-stats`);
        const partyStats = await response.json();
        
        if (response.ok && Array.isArray(partyStats)) {
            updatePartyStatsGrid(partyStats);
        } else {
            console.error('Failed to load party stats:', partyStats);
            document.getElementById('party-stats-grid').innerHTML = '<p style="text-align: center; color: #999;">íŒŒí‹° í†µê³„ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>';
        }
    } catch (error) {
        console.error('Party stats loading error:', error);
        document.getElementById('party-stats-grid').innerHTML = '<p style="text-align: center; color: #999;">íŒŒí‹° í†µê³„ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>';
    }
}

function updatePartyStatsGrid(partyStats) {
    const grid = document.getElementById('party-stats-grid');
    
    if (!partyStats || partyStats.length === 0) {
        grid.innerHTML = '<p style="text-align: center; color: #999;">íŒŒí‹° í†µê³„ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
        return;
    }
    
    grid.innerHTML = partyStats.map(stat => `
        <div class="party-stat-card">
            <div class="party-size">${stat.party_size}</div>
            <div class="party-size-label">${stat.party_size}ì¸ íŒŒí‹°</div>
            
            <div class="party-stats-details">
                <div class="party-stat-row">
                    <span class="party-stat-label">ì´ ê²½ê¸°</span>
                    <span class="party-stat-value">${stat.matches_played}</span>
                </div>
                <div class="party-stat-row">
                    <span class="party-stat-label">ìŠ¹ë¦¬</span>
                    <span class="party-stat-value" style="color: #10B981;">${stat.wins}</span>
                </div>
                <div class="party-stat-row">
                    <span class="party-stat-label">íŒ¨ë°°</span>
                    <span class="party-stat-value" style="color: #EF4444;">${stat.losses}</span>
                </div>
            </div>
            
            <div class="party-win-rate">${stat.win_rate}%</div>
        </div>
    `).join('');
}

// Load data when page loads
document.addEventListener('DOMContentLoaded', loadPlayerData);
</script>